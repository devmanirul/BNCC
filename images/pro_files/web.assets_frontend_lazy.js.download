
/* /web/static/src/js/services/session.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web.session',function(require){"use strict";var Session=require('web.Session');var modules=odoo._modules;var session=new Session(undefined,undefined,{modules:modules,use_cors:false});session.is_bound=session.session_bind();return session;});;

/* /web/static/src/js/public/public_env.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define("web.public_env",function(require){"use strict";const commonEnv=require("web.commonEnv");return commonEnv;});;

/* /web/static/src/js/public/public_crash_manager.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web.PublicCrashManager',function(require){"use strict";const core=require('web.core');const CrashManager=require('web.CrashManager').CrashManager;const PublicCrashManager=CrashManager.extend({_displayWarning(message,title,options){this.displayNotification(Object.assign({},options,{title,message,sticky:true,}));},});core.serviceRegistry.add('crash_manager',PublicCrashManager);return{CrashManager:PublicCrashManager,};});;

/* /web/static/src/js/public/public_notification.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web.public.Notification',function(require){'use strict';var Notification=require('web.Notification');Notification.include({xmlDependencies:['/web/static/src/xml/notification.xml'],});});;

/* /web/static/src/js/public/public_root.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web.public.root',function(require){'use strict';var ajax=require('web.ajax');var dom=require('web.dom');const env=require('web.public_env');var session=require('web.session');var utils=require('web.utils');var publicWidget=require('web.public.widget');var publicRootRegistry=new publicWidget.RootWidgetRegistry();function getLang(){var html=document.documentElement;return(html.getAttribute('lang')||'en_US').replace('-','_');}
var lang=utils.get_cookie('frontend_lang')||getLang();var localeDef=ajax.loadJS('/web/webclient/locale/'+lang.replace('-','_'));var PublicRoot=publicWidget.RootWidget.extend({events:_.extend({},publicWidget.RootWidget.prototype.events||{},{'submit .js_website_submit_form':'_onWebsiteFormSubmit','click .js_disable_on_click':'_onDisableOnClick',}),custom_events:_.extend({},publicWidget.RootWidget.prototype.custom_events||{},{call_service:'_onCallService',context_get:'_onContextGet',main_object_request:'_onMainObjectRequest',widgets_start_request:'_onWidgetsStartRequest',widgets_stop_request:'_onWidgetsStopRequest',}),init:function(){this._super.apply(this,arguments);this.env=env;this.publicWidgets=[];},willStart:function(){return Promise.all([this._super.apply(this,arguments),session.is_bound,localeDef]);},start:function(){var defs=[this._super.apply(this,arguments),this._startWidgets()];this.$(".o_image[data-mimetype^='image']").each(function(){var $img=$(this);if(/gif|jpe|jpg|png/.test($img.data('mimetype'))&&$img.data('src')){$img.css('background-image',"url('"+$img.data('src')+"')");}});if(window.location.hash.indexOf("scrollTop=")>-1){this.el.scrollTop=+window.location.hash.match(/scrollTop=([0-9]+)/)[1];}
if($.fn.placeholder){$('input, textarea').placeholder();}
this.$el.children().on('error.datetimepicker',this._onDateTimePickerError.bind(this));return Promise.all(defs);},_getContext:function(context){return _.extend({'lang':getLang(),},context||{});},_getExtraContext:function(context){return this._getContext(context);},_getPublicWidgetsRegistry:function(options){return publicWidget.registry;},_getRegistry:function(){return publicRootRegistry;},_startWidgets:function($from,options){var self=this;if($from===undefined){$from=this.$('#wrapwrap');if(!$from.length){$from=this.$el;}}
if(options===undefined){options={};}
this._stopWidgets($from);var defs=_.map(this._getPublicWidgetsRegistry(options),function(PublicWidget){var selector=PublicWidget.prototype.selector||'';var $target=dom.cssFind($from,selector,true);var defs=_.map($target,function(el){var widget=new PublicWidget(self,options);self.publicWidgets.push(widget);return widget.attachTo($(el));});return Promise.all(defs);});return Promise.all(defs);},_stopWidgets:function($from){var removedWidgets=_.map(this.publicWidgets,function(widget){if(!$from||$from.filter(widget.el).length||$from.find(widget.el).length){widget.destroy();return widget;}
return null;});this.publicWidgets=_.difference(this.publicWidgets,removedWidgets);},_onCallService:function(ev){function _computeContext(context,noContextKeys){context=_.extend({},this._getContext(),context);if(noContextKeys){context=_.omit(context,noContextKeys);}
return JSON.parse(JSON.stringify(context));}
const payload=ev.data;let args=payload.args||[];if(payload.service==='ajax'&&payload.method==='rpc'){args=args.concat(ev.target);var route=args[0];if(_.str.startsWith(route,'/web/dataset/call_kw/')){var params=args[1];var options=args[2];var noContextKeys;if(options){noContextKeys=options.noContextKeys;args[2]=_.omit(options,'noContextKeys');}
params.kwargs.context=_computeContext.call(this,params.kwargs.context,noContextKeys);}}else if(payload.service==='ajax'&&payload.method==='loadLibs'){args[1]=_computeContext.call(this,args[1]);}
const service=this.env.services[payload.service];const result=service[payload.method].apply(service,args);payload.callback(result);},_onContextGet:function(ev){if(ev.data.extra){ev.data.callback(this._getExtraContext(ev.data.context));}else{ev.data.callback(this._getContext(ev.data.context));}},_onMainObjectRequest:function(ev){var repr=$('html').data('main-object');var m=repr.match(/(.+)\((\d+),(.*)\)/);ev.data.callback({model:m[1],id:m[2]|0,});},_onWidgetsStartRequest:function(ev){this._startWidgets(ev.data.$target,ev.data.options).then(ev.data.onSuccess).guardedCatch(ev.data.onFailure);},_onWidgetsStopRequest:function(ev){this._stopWidgets(ev.data.$target);},_onWebsiteFormSubmit:function(ev){var $buttons=$(ev.currentTarget).find('button[type="submit"], a.a-submit');_.each($buttons,function(btn){var $btn=$(btn);$btn.html('<i class="fa fa-spinner fa-spin"></i> '+$btn.text());$btn.prop('disabled',true);});},_onDisableOnClick:function(ev){$(ev.currentTarget).addClass('disabled');},_onDateTimePickerError:function(ev){return false;},});return{PublicRoot:PublicRoot,publicRootRegistry:publicRootRegistry,};});;

/* /website/static/src/js/content/website_root_instance.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('root.widget',function(require){'use strict';const AbstractService=require('web.AbstractService');const env=require('web.public_env');var lazyloader=require('web.public.lazyloader');var websiteRootData=require('website.root');owl.config.mode=env.isDebug()?"dev":"prod";owl.Component.env=env;AbstractService.prototype.deployServices(env);var websiteRoot=new websiteRootData.WebsiteRoot(null);return lazyloader.allScriptsLoaded.then(function(){return websiteRoot.attachTo(document.body).then(function(){return websiteRoot;});});});;

/* /web/static/src/js/public/public_widget.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web.public.widget',function(require){'use strict';var Class=require('web.Class');var dom=require('web.dom');var mixins=require('web.mixins');var session=require('web.session');var Widget=require('web.Widget');var RootWidget=Widget.extend({custom_events:_.extend({},Widget.prototype.custom_events||{},{'registry_update':'_onRegistryUpdate','get_session':'_onGetSession',}),init:function(){this._super.apply(this,arguments);this._widgets=[];this._listenToUpdates=false;this._getRegistry().setParent(this);},start:function(){var defs=[this._super.apply(this,arguments)];defs.push(this._attachComponents());this._listenToUpdates=true;return Promise.all(defs);},_attachComponent:function(childInfo,$from){var self=this;var $elements=dom.cssFind($from||this.$el,childInfo.selector);var defs=_.map($elements,function(element){var w=new childInfo.Widget(self);self._widgets.push(w);return w.attachTo(element);});return Promise.all(defs);},_attachComponents:function($from){var self=this;var childInfos=this._getRegistry().get();var defs=_.map(childInfos,function(childInfo){return self._attachComponent(childInfo,$from);});return Promise.all(defs);},_getRegistry:function(){},_onGetSession:function(event){if(event.data.callback){event.data.callback(session);}},_onRegistryUpdate:function(ev){ev.stopPropagation();if(this._listenToUpdates){this._attachComponent(ev.data);}},});var RootWidgetRegistry=Class.extend(mixins.EventDispatcherMixin,{init:function(){mixins.EventDispatcherMixin.init.call(this);this._registry=[];},add:function(Widget,selector){var registryInfo={Widget:Widget,selector:selector,};this._registry.push(registryInfo);this.trigger_up('registry_update',registryInfo);},get:function(){return this._registry;},});var PublicWidget=Widget.extend({selector:false,events:{},init:function(parent,options){this._super.apply(this,arguments);this.options=options||{};},destroy:function(){if(this.selector){var $oldel=this.$el;this.setElement(null);}
this._super.apply(this,arguments);if(this.selector){this.$el=$oldel;this.el=$oldel[0];this.$target=this.$el;this.target=this.el;}},setElement:function(){this._super.apply(this,arguments);if(this.selector){this.$target=this.$el;this.target=this.el;}},_delegateEvents:function(){var self=this;var originalEvents=this.events;var events={};_.each(this.events,function(method,event){if(typeof method!=='string'){events[event]=method;return;}
var methodOptions=method.split(' ');if(methodOptions.length<=1){events[event]=method;return;}
var isAsync=_.contains(methodOptions,'async');if(!isAsync){events[event]=method;return;}
method=self.proxy(methodOptions[methodOptions.length-1]);if(_.str.startsWith(event,'click')){method=dom.makeButtonHandler(method);}else{method=dom.makeAsyncHandler(method);}
events[event]=method;});this.events=events;this._super.apply(this,arguments);this.events=originalEvents;},_getContext:function(extra,extraContext){var context;this.trigger_up('context_get',{extra:extra||false,context:extraContext,callback:function(ctx){context=ctx;},});return context;},});var registry={};registry._fixAppleCollapse=PublicWidget.extend({selector:'div[data-toggle="collapse"]',events:{'click':function(){},},});return{RootWidget:RootWidget,RootWidgetRegistry:RootWidgetRegistry,Widget:PublicWidget,registry:registry,};});;

/* /web_editor/static/src/js/frontend/loader.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web_editor.loader',function(require){'use strict';var Wysiwyg=require('web_editor.wysiwyg.root');function load(parent,textarea,options){var loading=textarea.nextElementSibling;if(loading&&!loading.classList.contains('o_wysiwyg_loading')){loading=null;}
if(!textarea.value.match(/\S/)){textarea.value='<p><br/></p>';}
var wysiwyg=new Wysiwyg(parent,options);return wysiwyg.attachTo(textarea).then(()=>{if(loading){loading.parentNode.removeChild(loading);}
return wysiwyg;});}
return{load:load,};});;

/* /portal/static/src/js/portal.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.portal',function(require){'use strict';var publicWidget=require('web.public.widget');const Dialog=require('web.Dialog');const{_t,qweb}=require('web.core');const ajax=require('web.ajax');publicWidget.registry.portalDetails=publicWidget.Widget.extend({selector:'.o_portal_details',events:{'change select[name="country_id"]':'_onCountryChange',},start:function(){var def=this._super.apply(this,arguments);this.$state=this.$('select[name="state_id"]');this.$stateOptions=this.$state.filter(':enabled').find('option:not(:first)');this._adaptAddressForm();return def;},_adaptAddressForm:function(){var $country=this.$('select[name="country_id"]');var countryID=($country.val()||0);this.$stateOptions.detach();var $displayedState=this.$stateOptions.filter('[data-country_id='+countryID+']');var nb=$displayedState.appendTo(this.$state).show().length;this.$state.parent().toggle(nb>=1);},_onCountryChange:function(){this._adaptAddressForm();},});publicWidget.registry.PortalHomeCounters=publicWidget.Widget.extend({selector:'.o_portal_my_home',start:function(){var def=this._super.apply(this,arguments);this._updateCounters();return def;},async _updateCounters(elem){const numberRpc=3;const needed=this.$('[data-placeholder_count]').map((i,o)=>$(o).data('placeholder_count')).toArray();const counterByRpc=Math.ceil(needed.length/numberRpc);const proms=[...Array(Math.min(numberRpc,needed.length)).keys()].map(async i=>{await this._rpc({route:"/my/counters",params:{counters:needed.slice(i*counterByRpc,(i+1)*counterByRpc)},}).then(data=>{Object.keys(data).map(k=>this.$("[data-placeholder_count='"+k+"']").text(data[k]));});});return Promise.all(proms);},});publicWidget.registry.portalSearchPanel=publicWidget.Widget.extend({selector:'.o_portal_search_panel',events:{'click .search-submit':'_onSearchSubmitClick','click .dropdown-item':'_onDropdownItemClick','keyup input[name="search"]':'_onSearchInputKeyup',},start:function(){var def=this._super.apply(this,arguments);this._adaptSearchLabel(this.$('.dropdown-item.active'));return def;},_adaptSearchLabel:function(elem){var $label=$(elem).clone();$label.find('span.nolabel').remove();this.$('input[name="search"]').attr('placeholder',$label.text().trim());},_search:function(){var search=$.deparam(window.location.search.substring(1));search['search_in']=this.$('.dropdown-item.active').attr('href').replace('#','');search['search']=this.$('input[name="search"]').val();window.location.search=$.param(search);},_onSearchSubmitClick:function(){this._search();},_onDropdownItemClick:function(ev){ev.preventDefault();var $item=$(ev.currentTarget);$item.closest('.dropdown-menu').find('.dropdown-item').removeClass('active');$item.addClass('active');this._adaptSearchLabel(ev.currentTarget);},_onSearchInputKeyup:function(ev){if(ev.keyCode===$.ui.keyCode.ENTER){this._search();}},});function handleCheckIdentity(rpc,wrapped){return wrapped.then((r)=>{if(!_.isMatch(r,{type:'ir.actions.act_window',res_model:'res.users.identitycheck'})){return r;}
const check_id=r.res_id;return ajax.loadXML('/portal/static/src/xml/portal_security.xml',qweb).then(()=>new Promise((resolve,reject)=>{const d=new Dialog(null,{title:_t("Security Control"),$content:qweb.render('portal.identitycheck'),buttons:[{text:_t("Confirm Password"),classes:'btn btn-primary',click(){const password_input=this.el.querySelector('[name=password]');if(!password_input.reportValidity()){password_input.classList.add('is-invalid');return;}
return rpc({model:'res.users.identitycheck',method:'write',args:[check_id,{password:password_input.value}]}).then(()=>rpc({model:'res.users.identitycheck',method:'run_check',args:[check_id]})).then((r)=>{this.close();resolve(r);},(err)=>{err.event.preventDefault();password_input.classList.add('is-invalid');password_input.setCustomValidity(_t("Check failed"));password_input.reportValidity();});}},{text:_t('Cancel'),close:true},{text:_t('Forgot password?'),classes:'btn btn-link',click(){window.location.href="/web/reset_password/";}}]}).on('close',null,()=>{reject();});d.opened(()=>{const pw=d.el.querySelector('[name="password"]');pw.focus();pw.addEventListener('input',()=>{pw.classList.remove('is-invalid');pw.setCustomValidity('');});d.el.addEventListener('submit',(e)=>{e.preventDefault();d.$footer.find('.btn-primary').click();});});d.open();}));});}
return{handleCheckIdentity,}});;

/* /portal/static/src/js/portal_chatter.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.chatter',function(require){'use strict';var core=require('web.core');const dom=require('web.dom');var publicWidget=require('web.public.widget');var time=require('web.time');var portalComposer=require('portal.composer');var qweb=core.qweb;var _t=core._t;var PortalChatter=publicWidget.Widget.extend({template:'portal.Chatter',xmlDependencies:['/portal/static/src/xml/portal_chatter.xml'],events:{'click .o_portal_chatter_pager_btn':'_onClickPager','click .o_portal_chatter_js_is_internal':'async _onClickUpdateIsInternal',},init:function(parent,options){var self=this;this.options={};this._super.apply(this,arguments);_.each(options,function(val,key){self.options[_.str.underscored(key)]=val;});this.options=_.defaults(this.options,{'allow_composer':true,'display_composer':false,'csrf_token':odoo.csrf_token,'message_count':0,'pager_step':10,'pager_scope':5,'pager_start':1,'is_user_public':true,'is_user_employee':false,'is_user_publisher':false,'hash':false,'pid':false,'domain':[],});this.set('messages',[]);this.set('message_count',this.options['message_count']);this.set('pager',{});this.set('domain',this.options['domain']);this._currentPage=this.options['pager_start'];},willStart:function(){return Promise.all([this._super.apply(this,arguments),this._chatterInit()]);},start:function(){this.on("change:messages",this,this._renderMessages);this.on("change:message_count",this,function(){this._renderMessageCount();this.set('pager',this._pager(this._currentPage));});this.on("change:pager",this,this._renderPager);this.on("change:domain",this,this._onChangeDomain);this.set('message_count',this.options['message_count']);this.set('messages',this.preprocessMessages(this.result['messages']));var defs=[];defs.push(this._super.apply(this,arguments));if(this.options['display_composer']){this._composer=new portalComposer.PortalComposer(this,this.options);defs.push(this._composer.replace(this.$('.o_portal_chatter_composer')));}
return Promise.all(defs);},messageFetch:function(domain){var self=this;return this._rpc({route:'/mail/chatter_fetch',params:self._messageFetchPrepareParams(),}).then(function(result){self.set('messages',self.preprocessMessages(result['messages']));self.set('message_count',result['message_count']);});},preprocessMessages:function(messages){_.each(messages,function(m){m['author_avatar_url']=_.str.sprintf('/web/image/%s/%s/author_avatar/50x50','mail.message',m.id);m['published_date_str']=_.str.sprintf(_t('Published on %s'),moment(time.str_to_datetime(m.date)).format('MMMM Do YYYY, h:mm:ss a'));});return messages;},_chatterInit:function(){var self=this;return this._rpc({route:'/mail/chatter_init',params:this._messageFetchPrepareParams()}).then(function(result){self.result=result;self.options=_.extend(self.options,self.result['options']||{});return result;});},_changeCurrentPage:function(page,domain){this._currentPage=page;var d=domain?domain:_.clone(this.get('domain'));this.set('domain',d);},_messageFetchPrepareParams:function(){var self=this;var data={'res_model':this.options['res_model'],'res_id':this.options['res_id'],'limit':this.options['pager_step'],'offset':(this._currentPage-1)*this.options['pager_step'],'allow_composer':this.options['allow_composer'],};if(self.options['token']){data['token']=self.options['token'];}
if(this.get('domain')){data['domain']=this.get('domain');}
return data;},_pager:function(page){page=page||1;var total=this.get('message_count');var scope=this.options['pager_scope'];var step=this.options['pager_step'];var pageCount=Math.ceil(parseFloat(total)/step);page=Math.max(1,Math.min(parseInt(page),pageCount));scope-=1;var pmin=Math.max(page-parseInt(Math.floor(scope/2)),1);var pmax=Math.min(pmin+scope,pageCount);if(pmax-scope>0){pmin=pmax-scope;}else{pmin=1;}
var pages=[];_.each(_.range(pmin,pmax+1),function(index){pages.push(index);});return{"page_count":pageCount,"offset":(page-1)*step,"page":page,"page_start":pmin,"page_previous":Math.max(pmin,page-1),"page_next":Math.min(pmax,page+1),"page_end":pmax,"pages":pages};},_renderMessages:function(){this.$('.o_portal_chatter_messages').html(qweb.render("portal.chatter_messages",{widget:this}));},_renderMessageCount:function(){this.$('.o_message_counter').replaceWith(qweb.render("portal.chatter_message_count",{widget:this}));},_renderPager:function(){this.$('.o_portal_chatter_pager').replaceWith(qweb.render("portal.pager",{widget:this}));},_onChangeDomain:function(){var self=this;this.messageFetch().then(function(){var p=self._currentPage;self.set('pager',self._pager(p));});},_onClickPager:function(ev){ev.preventDefault();var page=$(ev.currentTarget).data('page');this._changeCurrentPage(page);},_onClickUpdateIsInternal:function(ev){ev.preventDefault();var $elem=$(ev.currentTarget);return this._rpc({route:'/mail/update_is_internal',params:{message_id:$elem.data('message-id'),is_internal:!$elem.data('is-internal'),},}).then(function(result){$elem.data('is-internal',result);if(result===true){$elem.addClass('o_portal_message_internal_on');$elem.removeClass('o_portal_message_internal_off');}else{$elem.addClass('o_portal_message_internal_off');$elem.removeClass('o_portal_message_internal_on');}});},});publicWidget.registry.portalChatter=publicWidget.Widget.extend({selector:'.o_portal_chatter',async start(){const proms=[this._super.apply(this,arguments)];const chatter=new PortalChatter(this,this.$el.data());proms.push(chatter.appendTo(this.$el));await Promise.all(proms);if(window.location.hash===`#${this.el.id}`){dom.scrollTo(this.el,{duration:0});}},});return{PortalChatter:PortalChatter,};});;

/* /portal/static/src/js/portal_composer.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.composer',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var publicWidget=require('web.public.widget');var qweb=core.qweb;var _t=core._t;var PortalComposer=publicWidget.Widget.extend({template:'portal.Composer',xmlDependencies:['/portal/static/src/xml/portal_chatter.xml'],events:{'change .o_portal_chatter_file_input':'_onFileInputChange','click .o_portal_chatter_attachment_btn':'_onAttachmentButtonClick','click .o_portal_chatter_attachment_delete':'async _onAttachmentDeleteClick','click .o_portal_chatter_composer_btn':'async _onSubmitButtonClick',},init:function(parent,options){this._super.apply(this,arguments);this.options=_.defaults(options||{},{'allow_composer':true,'display_composer':false,'csrf_token':odoo.csrf_token,'token':false,'res_model':false,'res_id':false,});this.attachments=[];},start:function(){var self=this;this.$attachmentButton=this.$('.o_portal_chatter_attachment_btn');this.$fileInput=this.$('.o_portal_chatter_file_input');this.$sendButton=this.$('.o_portal_chatter_composer_btn');this.$attachments=this.$('.o_portal_chatter_composer_form .o_portal_chatter_attachments');this.$attachmentIds=this.$('.o_portal_chatter_attachment_ids');this.$attachmentTokens=this.$('.o_portal_chatter_attachment_tokens');return this._super.apply(this,arguments).then(function(){if(self.options.default_attachment_ids){self.attachments=self.options.default_attachment_ids||[];_.each(self.attachments,function(attachment){attachment.state='done';});self._updateAttachments();}
return Promise.resolve();});},_onAttachmentButtonClick:function(){this.$fileInput.click();},_onAttachmentDeleteClick:function(ev){var self=this;var attachmentId=$(ev.currentTarget).closest('.o_portal_chatter_attachment').data('id');var accessToken=_.find(this.attachments,{'id':attachmentId}).access_token;ev.preventDefault();ev.stopPropagation();this.$sendButton.prop('disabled',true);return this._rpc({route:'/portal/attachment/remove',params:{'attachment_id':attachmentId,'access_token':accessToken,},}).then(function(){self.attachments=_.reject(self.attachments,{'id':attachmentId});self._updateAttachments();self.$sendButton.prop('disabled',false);});},_onFileInputChange:function(){var self=this;this.$sendButton.prop('disabled',true);return Promise.all(_.map(this.$fileInput[0].files,function(file){return new Promise(function(resolve,reject){var data={'name':file.name,'file':file,'res_id':self.options.res_id,'res_model':self.options.res_model,'access_token':self.options.token,};ajax.post('/portal/attachment/add',data).then(function(attachment){attachment.state='pending';self.attachments.push(attachment);self._updateAttachments();resolve();}).guardedCatch(function(error){self.displayNotification({message:_.str.sprintf(_t("Could not save file <strong>%s</strong>"),_.escape(file.name)),type:'warning',sticky:true,});resolve();});});})).then(function(){self.$fileInput[0].value=null;self.$sendButton.prop('disabled',false);});},_onSubmitButtonClick:function(){return new Promise(function(resolve,reject){});},_updateAttachments:function(){this.$attachmentIds.val(_.pluck(this.attachments,'id'));this.$attachmentTokens.val(_.pluck(this.attachments,'access_token'));this.$attachments.html(qweb.render('portal.Chatter.Attachments',{attachments:this.attachments,showDelete:true,}));},});return{PortalComposer:PortalComposer,};});;

/* /portal/static/src/js/portal_signature.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.signature_form',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var NameAndSignature=require('web.name_and_signature').NameAndSignature;var qweb=core.qweb;var _t=core._t;var SignatureForm=publicWidget.Widget.extend({template:'portal.portal_signature',xmlDependencies:['/portal/static/src/xml/portal_signature.xml'],events:{'click .o_portal_sign_submit':'async _onClickSignSubmit',},custom_events:{'signature_changed':'_onChangeSignature',},init:function(parent,options){this._super.apply(this,arguments);this.csrf_token=odoo.csrf_token;this.callUrl=options.callUrl||'';this.rpcParams=options.rpcParams||{};this.sendLabel=options.sendLabel||_t("Accept & Sign");this.nameAndSignature=new NameAndSignature(this,options.nameAndSignatureOptions||{});},start:function(){var self=this;this.$confirm_btn=this.$('.o_portal_sign_submit');this.$controls=this.$('.o_portal_sign_controls');var subWidgetStart=this.nameAndSignature.replace(this.$('.o_web_sign_name_and_signature'));return Promise.all([subWidgetStart,this._super.apply(this,arguments)]).then(function(){self.nameAndSignature.resetSignature();});},focusName:function(){this.nameAndSignature.focusName();},resetSignature:function(){return this.nameAndSignature.resetSignature();},_onClickSignSubmit:function(ev){var self=this;ev.preventDefault();if(!this.nameAndSignature.validateSignature()){return;}
var name=this.nameAndSignature.getName();var signature=this.nameAndSignature.getSignatureImage()[1];return this._rpc({route:this.callUrl,params:_.extend(this.rpcParams,{'name':name,'signature':signature,}),}).then(function(data){if(data.error){self.$('.o_portal_sign_error_msg').remove();self.$controls.prepend(qweb.render('portal.portal_signature_error',{widget:data}));}else if(data.success){var $success=qweb.render('portal.portal_signature_success',{widget:data});self.$el.empty().append($success);}
if(data.force_refresh){if(data.redirect_url){window.location=data.redirect_url;}else{window.location.reload();}
return new Promise(function(){});}});},_onChangeSignature:function(){var isEmpty=this.nameAndSignature.isSignatureEmpty();this.$confirm_btn.prop('disabled',isEmpty);},});publicWidget.registry.SignatureForm=publicWidget.Widget.extend({selector:'.o_portal_signature_form',start:function(){var hasBeenReset=false;var callUrl=this.$el.data('call-url');var nameAndSignatureOptions={defaultName:this.$el.data('default-name'),mode:this.$el.data('mode'),displaySignatureRatio:this.$el.data('signature-ratio'),signatureType:this.$el.data('signature-type'),fontColor:this.$el.data('font-color')||'black',};var sendLabel=this.$el.data('send-label');var form=new SignatureForm(this,{callUrl:callUrl,nameAndSignatureOptions:nameAndSignatureOptions,sendLabel:sendLabel,});this.$el.closest('.modal').on('shown.bs.modal',function(ev){if(!hasBeenReset){hasBeenReset=true;form.resetSignature();}else{form.focusName();}});return Promise.all([this._super.apply(this,arguments),form.appendTo(this.$el)]);},});return{SignatureForm:SignatureForm,};});;

/* /portal/static/src/js/portal_sidebar.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.PortalSidebar',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var time=require('web.time');var session=require('web.session');var _t=core._t;var PortalSidebar=publicWidget.Widget.extend({start:function(){this._setDelayLabel();return this._super.apply(this,arguments);},_setDelayLabel:function(){var $sidebarTimeago=this.$el.find('.o_portal_sidebar_timeago');_.each($sidebarTimeago,function(el){var dateTime=moment(time.auto_str_to_date($(el).attr('datetime'))),today=moment().startOf('day'),diff=dateTime.diff(today,'days',true),displayStr;session.is_bound.then(function(){if(diff===0){displayStr=_t('Due today');}else if(diff>0){displayStr=_.str.sprintf(_t('Due in %1d days'),Math.abs(diff));}else{displayStr=_.str.sprintf(_t('%1d days overdue'),Math.abs(diff));}
$(el).text(displayStr);});});},_printIframeContent:function(href){if($.browser.mozilla){window.open(href,'_blank');return;}
if(!this.printContent){this.printContent=$('<iframe id="print_iframe_content" src="'+href+'" style="display:none"></iframe>');this.$el.append(this.printContent);this.printContent.on('load',function(){$(this).get(0).contentWindow.print();});}else{this.printContent.get(0).contentWindow.print();}},});return PortalSidebar;});;

/* /auth_totp_portal/static/src/js/totp_frontend.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('auth_totp_portal.button',function(require){'use strict';const{_t}=require('web.core');const publicWidget=require('web.public.widget');const Dialog=require('web.Dialog');const{handleCheckIdentity}=require('portal.portal');function fromField(f,record){switch(f.getAttribute('name')){case'qrcode':const qrcode=document.createElement('img');qrcode.setAttribute('class','img img-fluid offset-1');qrcode.setAttribute('src','data:image/png;base64,'+record['qrcode']);return qrcode;case'url':const url=document.createElement('a');url.setAttribute('href',record['url']);url.textContent=f.getAttribute('text')||record['url'];return url;case'code':const code=document.createElement('input');code.setAttribute('name','code');code.setAttribute('class','form-control col-10 col-md-6');code.setAttribute('placeholder','6-digit code');code.required=true;code.maxLength=6;code.minLength=6;return code;default:return document.createTextNode(record[f.getAttribute('name')]||'');}}
function fixupViewBody(oldNode,record){let qrcode=null,code=null,node=null;switch(oldNode.nodeType){case 1:if(oldNode.tagName==='field'){node=fromField(oldNode,record);switch(oldNode.getAttribute('name')){case'qrcode':qrcode=node;break;case'code':code=node;break}
break;}
node=document.createElement(oldNode.tagName);for(let i=0;i<oldNode.attributes.length;++i){const attr=oldNode.attributes[i];node.setAttribute(attr.name,attr.value);}
for(let j=0;j<oldNode.childNodes.length;++j){const[ch,qr,co]=fixupViewBody(oldNode.childNodes[j],record);if(ch){node.appendChild(ch);}
if(qr){qrcode=qr;}
if(co){code=co;}}
break;case 3:case 4:node=document.createTextNode(oldNode.data);break;default:}
return[node,qrcode,code]}
class Button{constructor(parent,model,record_id,input_node,button_node){this._parent=parent;this.model=model;this.record_id=record_id;this.input=input_node;this.text=button_node.getAttribute('string');this.classes=button_node.getAttribute('class')||null;this.action=button_node.getAttribute('name');if(button_node.getAttribute('special')==='cancel'){this.close=true;this.click=null;}else{this.close=false;this.click=this._click.bind(this);}}
async _click(){if(!this.input.reportValidity()){this.input.classList.add('is-invalid');return;}
try{await this.callAction(this.record_id,{code:this.input.value});}catch(e){this.input.classList.add('is-invalid');this.input.setCustomValidity(e.message);this.input.reportValidity();return;}
this.input.classList.remove('is-invalid');window.location=window.location;}
async callAction(id,update){try{await this._parent._rpc({model:this.model,method:'write',args:[id,update]});await handleCheckIdentity(this._parent.proxy('_rpc'),this._parent._rpc({model:this.model,method:this.action,args:[id]}));}catch(e){e.event.preventDefault();throw new Error(!e.message?e.toString():!e.message.data?e.message.message:e.message.data.message||_t("Operation failed for unknown reason."));}}}
publicWidget.registry.TOTPButton=publicWidget.Widget.extend({selector:'#auth_totp_portal_enable',events:{click:'_onClick',},async _onClick(e){e.preventDefault();const w=await handleCheckIdentity(this.proxy('_rpc'),this._rpc({model:'res.users',method:'totp_enable_wizard',args:[this.getSession().user_id]}));if(!w){window.location=window.location;return;}
const{res_model:model,res_id:wizard_id}=w;const record=await this._rpc({model,method:'read',args:[wizard_id,[]]}).then(ar=>ar[0]);const doc=new DOMParser().parseFromString(document.getElementById('totp_wizard_view').textContent,'application/xhtml+xml');const xmlBody=doc.querySelector('sheet *');const[body,,codeInput]=fixupViewBody(xmlBody,record);codeInput.addEventListener('input',()=>codeInput.setCustomValidity(''));const buttons=[];for(const button of doc.querySelectorAll('footer button')){buttons.push(new Button(this,model,record.id,codeInput,button));}
const $content=document.createElement('form');$content.appendChild(body);$content.addEventListener('submit',(e)=>{e.preventDefault();dialog.$footer.find('.btn-primary').click();});var dialog=new Dialog(this,{$content,buttons}).open();}});publicWidget.registry.DisableTOTPButton=publicWidget.Widget.extend({selector:'#auth_totp_portal_disable',events:{click:'_onClick'},async _onClick(e){e.preventDefault();await handleCheckIdentity(this.proxy('_rpc'),this._rpc({model:'res.users',method:'totp_disable',args:[this.getSession().user_id]}))
window.location=window.location;}});});;

/* /website/static/src/js/set_view_track.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.set_view_track',function(require){"use strict";var CustomizeMenu=require('website.customizeMenu');var Widget=require('web.Widget');var TrackPage=Widget.extend({template:'website.track_page',xmlDependencies:['/website/static/src/xml/track_page.xml'],events:{'change #switch-track-page':'_onTrackChange',},start:function(){this.$input=this.$('#switch-track-page');this._isTracked().then((data)=>{if(data[0]['track']){this.track=true;this.$input.attr('checked','checked');}else{this.track=false;}});},_isTracked:function(val){var viewid=$('html').data('viewid');if(!viewid){return Promise.reject();}else{return this._rpc({model:'ir.ui.view',method:'read',args:[[viewid],['track']],});}},_onTrackChange:function(ev){var checkboxValue=this.$input.is(':checked');if(checkboxValue!==this.track){this.track=checkboxValue;this._trackPage(checkboxValue);}},_trackPage:function(val){var viewid=$('html').data('viewid');if(!viewid){return Promise.reject();}else{return this._rpc({model:'ir.ui.view',method:'write',args:[[viewid],{track:val}],});}},});CustomizeMenu.include({_loadCustomizeOptions:function(){var self=this;var def=this._super.apply(this,arguments);return def.then(function(){if(!self.__trackpageLoaded){self.__trackpageLoaded=true;self.trackPage=new TrackPage(self);self.trackPage.appendTo(self.$el.children('.dropdown-menu'));}});},});});;

/* /website/static/src/js/utils.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.utils',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var qweb=core.qweb;function loadAnchors(url){return new Promise(function(resolve,reject){if(url!==window.location.pathname&&url[0]!=='#'){$.get(window.location.origin+url).then(resolve,reject);}else{resolve(document.body.outerHTML);}}).then(function(response){return _.map($(response).find('[id][data-anchor=true]'),function(el){return'#'+el.id;});});}
function autocompleteWithPages(self,$input,options){$.widget("website.urlcomplete",$.ui.autocomplete,{options:options||{},_create:function(){this._super();this.widget().menu("option","items","> :not(.ui-autocomplete-category)");},_renderMenu:function(ul,items){const self=this;items.forEach(item=>{if(item.separator){self._renderSeparator(ul,item);}
else{self._renderItem(ul,item);}});},_renderSeparator:function(ul,item){return $("<li class='ui-autocomplete-category font-weight-bold text-capitalize p-2'>").append(`<div>${item.separator}</div>`).appendTo(ul);},_renderItem:function(ul,item){return $("<li>").data('ui-autocomplete-item',item).append(`<div>${item.label}</div>`).appendTo(ul);},});$input.urlcomplete({source:function(request,response){if(request.term[0]==='#'){loadAnchors(request.term).then(function(anchors){response(anchors);});}else{return self._rpc({route:'/website/get_suggested_links',params:{needle:request.term,limit:15,}}).then(function(res){let choices=res.matching_pages;res.others.forEach(other=>{if(other.values.length){choices=choices.concat([{separator:other.title}],other.values,);}});response(choices);});}},select:function(ev,ui){ev.target.value=ui.item.value;self.trigger_up('website_url_chosen');ev.preventDefault();},});}
function onceAllImagesLoaded($element,$excluded){var defs=_.map($element.find('img').addBack('img'),function(img){if(img.complete||$excluded&&($excluded.is(img)||$excluded.has(img).length)){return;}
var def=new Promise(function(resolve,reject){$(img).one('load',function(){resolve();});});return def;});return Promise.all(defs);}
function prompt(options,_qweb){if(typeof options==='string'){options={text:options};}
var xmlDef;if(_.isUndefined(_qweb)){_qweb='website.prompt';xmlDef=ajax.loadXML('/website/static/src/xml/website.xml',core.qweb);}
options=_.extend({window_title:'',field_name:'','default':'',init:function(){},},options||{});var type=_.intersection(Object.keys(options),['input','textarea','select']);type=type.length?type[0]:'input';options.field_type=type;options.field_name=options.field_name||options[type];var def=new Promise(function(resolve,reject){Promise.resolve(xmlDef).then(function(){var dialog=$(qweb.render(_qweb,options)).appendTo('body');options.$dialog=dialog;var field=dialog.find(options.field_type).first();field.val(options['default']);field.fillWith=function(data){if(field.is('select')){var select=field[0];data.forEach(function(item){select.options[select.options.length]=new window.Option(item[1],item[0]);});}else{field.val(data);}};var init=options.init(field,dialog);Promise.resolve(init).then(function(fill){if(fill){field.fillWith(fill);}
dialog.modal('show');field.focus();dialog.on('click','.btn-primary',function(){var backdrop=$('.modal-backdrop');resolve({val:field.val(),field:field,dialog:dialog});dialog.modal('hide').remove();backdrop.remove();});});dialog.on('hidden.bs.modal',function(){var backdrop=$('.modal-backdrop');reject();dialog.remove();backdrop.remove();});if(field.is('input[type="text"], select')){field.keypress(function(e){if(e.which===13){e.preventDefault();dialog.find('.btn-primary').trigger('click');}});}});});return def;}
function websiteDomain(self){var websiteID;self.trigger_up('context_get',{callback:function(ctx){websiteID=ctx['website_id'];},});return['|',['website_id','=',false],['website_id','=',websiteID]];}
function sendRequest(route,params){function _addInput(form,name,value){let param=document.createElement('input');param.setAttribute('type','hidden');param.setAttribute('name',name);param.setAttribute('value',value);form.appendChild(param);}
let form=document.createElement('form');form.setAttribute('action',route);form.setAttribute('method',params.method||'POST');if(core.csrf_token){_addInput(form,'csrf_token',core.csrf_token);}
for(const key in params){const value=params[key];if(Array.isArray(value)&&value.length){for(const val of value){_addInput(form,key,val);}}else{_addInput(form,key,value);}}
document.body.appendChild(form);form.submit();}
function removeLoader(){const $loader=$('#o_website_page_loader');if($loader){$loader.remove();}}
return{loadAnchors:loadAnchors,autocompleteWithPages:autocompleteWithPages,onceAllImagesLoaded:onceAllImagesLoaded,prompt:prompt,sendRequest:sendRequest,websiteDomain:websiteDomain,removeLoader:removeLoader,};});;

/* /website/static/src/js/content/website_root.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.root',function(require){'use strict';const ajax=require('web.ajax');const{_t}=require('web.core');var Dialog=require('web.Dialog');const KeyboardNavigationMixin=require('web.KeyboardNavigationMixin');const session=require('web.session');var publicRootData=require('web.public.root');require("web.zoomodoo");var websiteRootRegistry=publicRootData.publicRootRegistry;var WebsiteRoot=publicRootData.PublicRoot.extend(KeyboardNavigationMixin,{events:_.extend({},KeyboardNavigationMixin.events,publicRootData.PublicRoot.prototype.events||{},{'click .js_change_lang':'_onLangChangeClick','click .js_publish_management .js_publish_btn':'_onPublishBtnClick','click .js_multi_website_switch':'_onWebsiteSwitch','shown.bs.modal':'_onModalShown',}),custom_events:_.extend({},publicRootData.PublicRoot.prototype.custom_events||{},{'gmap_api_request':'_onGMapAPIRequest','gmap_api_key_request':'_onGMapAPIKeyRequest','ready_to_clean_for_save':'_onWidgetsStopRequest','seo_object_request':'_onSeoObjectRequest',}),init(){this.isFullscreen=false;KeyboardNavigationMixin.init.call(this,{autoAccessKeys:false,});return this._super(...arguments);},start:function(){KeyboardNavigationMixin.start.call(this);if(!this.$('.js_change_lang').length){var $links=this.$('.js_language_selector a:not([data-oe-id])');var m=$(_.min($links,function(l){return $(l).attr('href').length;})).attr('href');$links.each(function(){var $link=$(this);var t=$link.attr('href');var l=(t===m)?"default":t.split('/')[1];$link.data('lang',l).addClass('js_change_lang');});}
this.$('.zoomable img[data-zoom]').zoomOdoo();return this._super.apply(this,arguments);},destroy(){KeyboardNavigationMixin.destroy.call(this);return this._super(...arguments);},_getContext:function(context){var html=document.documentElement;return _.extend({'website_id':html.getAttribute('data-website-id')|0,},this._super.apply(this,arguments));},_getExtraContext:function(context){var html=document.documentElement;return _.extend({'editable':!!(html.dataset.editable||$('[data-oe-model]').length),'translatable':!!html.dataset.translatable,'edit_translations':!!html.dataset.edit_translations,},this._super.apply(this,arguments));},async _getGMapAPIKey(refetch){if(refetch||!this._gmapAPIKeyProm){this._gmapAPIKeyProm=new Promise(async resolve=>{const data=await this._rpc({route:'/website/google_maps_api_key',});resolve(JSON.parse(data).google_maps_api_key||'');});}
return this._gmapAPIKeyProm;},_getPublicWidgetsRegistry:function(options){var registry=this._super.apply(this,arguments);if(options.editableMode){return _.pick(registry,function(PublicWidget){return!PublicWidget.prototype.disabledInEditableMode;});}
return registry;},async _loadGMapAPI(editableMode,refetch){if(refetch||!this._gmapAPILoading){this._gmapAPILoading=new Promise(async resolve=>{const key=await this._getGMapAPIKey(refetch);window.odoo_gmap_api_post_load=(async function odoo_gmap_api_post_load(){await this._startWidgets(undefined,{editableMode:editableMode});resolve(key);}).bind(this);if(!key){if(!editableMode&&session.is_admin){this.displayNotification({type:'warning',sticky:true,message:$('<div/>').append($('<span/>',{text:_t("Cannot load google map.")}),$('<br/>'),$('<a/>',{href:"/web#action=website.action_website_configuration",text:_t("Check your configuration."),}),)[0].outerHTML,});}
resolve(false);this._gmapAPILoading=false;return;}
await ajax.loadJS(`https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&callback=odoo_gmap_api_post_load&key=${key}`);});}
return this._gmapAPILoading;},_toggleFullscreen(state){this.isFullscreen=state;document.body.classList.add('o_fullscreen_transition');document.body.classList.toggle('o_fullscreen',this.isFullscreen);document.body.style.overflowX='hidden';let resizing=true;window.requestAnimationFrame(function resizeFunction(){window.dispatchEvent(new Event('resize'));if(resizing){window.requestAnimationFrame(resizeFunction);}});let stopResizing;const onTransitionEnd=ev=>{if(ev.target===document.body&&ev.propertyName==='padding-top'){stopResizing();}};stopResizing=()=>{resizing=false;document.body.style.overflowX='';document.body.removeEventListener('transitionend',onTransitionEnd);document.body.classList.remove('o_fullscreen_transition');};document.body.addEventListener('transitionend',onTransitionEnd);window.setTimeout(()=>stopResizing(),500);},_onWidgetsStartRequest:function(ev){ev.data.options=_.clone(ev.data.options||{});ev.data.options.editableMode=ev.data.editableMode;this._super.apply(this,arguments);},_onLangChangeClick:function(ev){ev.preventDefault();var $target=$(ev.currentTarget);var redirect={lang:$target.data('url_code'),url:encodeURIComponent($target.attr('href').replace(/[&?]edit_translations[^&?]+/,'')),hash:encodeURIComponent(window.location.hash)};window.location.href=_.str.sprintf("/website/lang/%(lang)s?r=%(url)s%(hash)s",redirect);},async _onGMapAPIRequest(ev){ev.stopPropagation();const apiKey=await this._loadGMapAPI(ev.data.editableMode,ev.data.refetch);ev.data.onSuccess(apiKey);},async _onGMapAPIKeyRequest(ev){ev.stopPropagation();const apiKey=await this._getGMapAPIKey(ev.data.refetch);ev.data.onSuccess(apiKey);},_onSeoObjectRequest:function(ev){var res=this._unslugHtmlDataObject('seo-object');ev.data.callback(res);},_unslugHtmlDataObject:function(dataAttr){var repr=$('html').data(dataAttr);var match=repr&&repr.match(/(.+)\((\d+),(.*)\)/);if(!match){return null;}
return{model:match[1],id:match[2]|0,};},_onPublishBtnClick:function(ev){ev.preventDefault();if(document.body.classList.contains('editor_enable')){return;}
var self=this;var $data=$(ev.currentTarget).parents(".js_publish_management:first");this._rpc({route:$data.data('controller')||'/website/publish',params:{id:+$data.data('id'),object:$data.data('object'),},}).then(function(result){$data.toggleClass("css_unpublished css_published");$data.find('input').prop("checked",result);$data.parents("[data-publish]").attr("data-publish",+result?'on':'off');if(result){self.displayNotification({type:'success',message:$data.data('description')?_.str.sprintf(_t("You've published your %s."),$data.data('description')):_t("Published with success."),});}});},_onWebsiteSwitch:function(ev){var websiteId=ev.currentTarget.getAttribute('website-id');var websiteDomain=ev.currentTarget.getAttribute('domain');let url=`/website/force/${websiteId}`;if(websiteDomain&&window.location.hostname!==websiteDomain){url=websiteDomain+url;}
const path=window.location.pathname+window.location.search+window.location.hash;window.location.href=$.param.querystring(url,{'path':path});},_onModalShown:function(ev){$(ev.target).addClass('modal_shown');},_onKeyDown(ev){if(!session.user_id){return;}
if(ev.keyCode!==$.ui.keyCode.ESCAPE||!document.body.contains(ev.target)||ev.target.closest('.modal')){return KeyboardNavigationMixin._onKeyDown.apply(this,arguments);}
this._toggleFullscreen(!this.isFullscreen);},});return{WebsiteRoot:WebsiteRoot,websiteRootRegistry:websiteRootRegistry,};});;

/* /website/static/src/js/content/compatibility.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.content.compatibility',function(require){'use strict';require('web.dom_ready');var browser=_.findKey($.browser,function(v){return v===true;});if($.browser.mozilla&&+$.browser.version.replace(/^([0-9]+\.[0-9]+).*/,'\$1')<20){browser='msie';}
browser+=(','+$.browser.version);var mobileRegex=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i;if(mobileRegex.test(window.navigator.userAgent.toLowerCase())){browser+=',mobile';}
document.documentElement.setAttribute('data-browser',browser);var htmlStyle=document.documentElement.style;var isFlexSupported=(('flexWrap'in htmlStyle)||('WebkitFlexWrap'in htmlStyle)||('msFlexWrap'in htmlStyle));if(!isFlexSupported){document.documentElement.setAttribute('data-no-flex','');}
return{browser:browser,isFlexSupported:isFlexSupported,};});;

/* /website/static/src/js/content/menu.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.content.menu',function(require){'use strict';const config=require('web.config');var dom=require('web.dom');var publicWidget=require('web.public.widget');var wUtils=require('website.utils');var animations=require('website.content.snippets.animation');const extraMenuUpdateCallbacks=[];const BaseAnimatedHeader=animations.Animation.extend({disabledInEditableMode:false,effects:[{startEvents:'scroll',update:'_updateHeaderOnScroll',},{startEvents:'resize',update:'_updateHeaderOnResize',}],init:function(){this._super(...arguments);this.fixedHeader=false;this.scrolledPoint=0;this.hasScrolled=false;},start:function(){this.$main=this.$el.next('main');this.isOverlayHeader=!!this.$el.closest('.o_header_overlay, .o_header_overlay_theme').length;this.$dropdowns=this.$el.find('.dropdown, .dropdown-menu');this.$navbarCollapses=this.$el.find('.navbar-collapse');this.$navbarCollapses.on('show.bs.collapse.BaseAnimatedHeader',function(){if(config.device.size_class<=config.device.SIZES.SM){$(document.body).addClass('overflow-hidden');}}).on('hide.bs.collapse.BaseAnimatedHeader',function(){$(document.body).removeClass('overflow-hidden');});this._transitionCount=0;this.$el.on('odoo-transitionstart.BaseAnimatedHeader',()=>this._adaptToHeaderChangeLoop(1));this.$el.on('transitionend.BaseAnimatedHeader',()=>this._adaptToHeaderChangeLoop(-1));return this._super(...arguments);},destroy:function(){this._toggleFixedHeader(false);this.$el.removeClass('o_header_affixed o_header_is_scrolled o_header_no_transition');this.$navbarCollapses.off('.BaseAnimatedHeader');this.$el.off('.BaseAnimatedHeader');this._super(...arguments);},_adaptFixedHeaderPosition(){dom.compensateScrollbar(this.el,this.fixedHeader,false,'right');},_adaptToHeaderChange:function(){this._updateMainPaddingTop();this.el.classList.toggle('o_top_fixed_element',this.fixedHeader&&this._isShown());for(const callback of extraMenuUpdateCallbacks){callback();}},_adaptToHeaderChangeLoop:function(addCount=0){this._adaptToHeaderChange();this._transitionCount+=addCount;this._transitionCount=Math.max(0,this._transitionCount);if(this._transitionCount>0){window.requestAnimationFrame(()=>this._adaptToHeaderChangeLoop());if(addCount!==0){clearTimeout(this._changeLoopTimer);this._changeLoopTimer=setTimeout(()=>{this._adaptToHeaderChangeLoop(-this._transitionCount);},500);}}else{clearTimeout(this._changeLoopTimer);}},_computeTopGap(){return 0;},_isShown(){return true;},_toggleFixedHeader:function(useFixed=true){this.fixedHeader=useFixed;this._adaptToHeaderChange();this.el.classList.toggle('o_header_affixed',useFixed);this._adaptFixedHeaderPosition();},_updateMainPaddingTop:function(){this.headerHeight=this.$el.outerHeight();this.topGap=this._computeTopGap();if(this.isOverlayHeader){return;}
this.$main.css('padding-top',this.fixedHeader?this.headerHeight:'');},_updateHeaderOnScroll:function(scroll){if(!this.hasScrolled){this.hasScrolled=true;if(scroll>0){this.$el.addClass('o_header_no_transition');}}else{this.$el.removeClass('o_header_no_transition');}
const headerIsScrolled=(scroll>this.scrolledPoint);if(this.headerIsScrolled!==headerIsScrolled){this.el.classList.toggle('o_header_is_scrolled',headerIsScrolled);this.$el.trigger('odoo-transitionstart');this.headerIsScrolled=headerIsScrolled;}
this.$dropdowns.removeClass('show');this.$navbarCollapses.removeClass('show').attr('aria-expanded',false);},_updateHeaderOnResize:function(){this._adaptFixedHeaderPosition();if(document.body.classList.contains('overflow-hidden')&&config.device.size_class>config.device.SIZES.SM){document.body.classList.remove('overflow-hidden');this.$el.find('.navbar-collapse').removeClass('show');}},});publicWidget.registry.StandardAffixedHeader=BaseAnimatedHeader.extend({selector:'header.o_header_standard:not(.o_header_sidebar)',init:function(){this._super(...arguments);this.fixedHeaderShow=false;this.scrolledPoint=300;},start:function(){this.headerHeight=this.$el.outerHeight();return this._super.apply(this,arguments);},_isShown(){return!this.fixedHeader||this.fixedHeaderShow;},_updateHeaderOnScroll:function(scroll){this._super(...arguments);const mainPosScrolled=(scroll>this.headerHeight+this.topGap);const reachPosScrolled=(scroll>this.scrolledPoint+this.topGap);if(this.fixedHeader!==mainPosScrolled){this.$el.css('transform',mainPosScrolled?'translate(0, -100%)':'');void this.$el[0].offsetWidth;this._toggleFixedHeader(mainPosScrolled);}
if(this.fixedHeaderShow!==reachPosScrolled){this.$el.css('transform',reachPosScrolled?`translate(0, -${this.topGap}px)`:'translate(0, -100%)');this.fixedHeaderShow=reachPosScrolled;this._adaptToHeaderChange();}},});publicWidget.registry.FixedHeader=BaseAnimatedHeader.extend({selector:'header.o_header_fixed',_updateHeaderOnScroll:function(scroll){this._super(...arguments);if(scroll>(this.scrolledPoint+this.topGap)){if(!this.$el.hasClass('o_header_affixed')){this.$el.css('transform',`translate(0, -${this.topGap}px)`);void this.$el[0].offsetWidth;this._toggleFixedHeader(true);}}else{this._toggleFixedHeader(false);void this.$el[0].offsetWidth;this.$el.css('transform','');}},});const BaseDisappearingHeader=publicWidget.registry.FixedHeader.extend({init:function(){this._super(...arguments);this.scrollingDownwards=true;this.hiddenHeader=false;this.position=0;this.atTop=true;this.checkPoint=0;this.scrollOffsetLimit=200;},destroy:function(){this._showHeader();this._super.apply(this,arguments);},_hideHeader:function(){this.$el.trigger('odoo-transitionstart');},_isShown(){return!this.fixedHeader||!this.hiddenHeader;},_showHeader:function(){this.$el.trigger('odoo-transitionstart');},_updateHeaderOnScroll:function(scroll){this._super(...arguments);const scrollingDownwards=(scroll>this.position);const atTop=(scroll<=0);if(scrollingDownwards!==this.scrollingDownwards){this.checkPoint=scroll;}
this.scrollingDownwards=scrollingDownwards;this.position=scroll;this.atTop=atTop;if(scrollingDownwards){if(!this.hiddenHeader&&scroll-this.checkPoint>(this.scrollOffsetLimit+this.topGap)){this.hiddenHeader=true;this._hideHeader();}}else{if(this.hiddenHeader&&scroll-this.checkPoint<-(this.scrollOffsetLimit+this.topGap)/2){this.hiddenHeader=false;this._showHeader();}}
if(atTop&&!this.atTop){this._showHeader();}},});publicWidget.registry.DisappearingHeader=BaseDisappearingHeader.extend({selector:'header.o_header_disappears',_hideHeader:function(){this._super(...arguments);this.$el.css('transform','translate(0, -100%)');},_showHeader:function(){this._super(...arguments);this.$el.css('transform',this.atTop?'':`translate(0, -${this.topGap}px)`);},});publicWidget.registry.FadeOutHeader=BaseDisappearingHeader.extend({selector:'header.o_header_fade_out',_hideHeader:function(){this._super(...arguments);this.$el.stop(false,true).fadeOut();},_showHeader:function(){this._super(...arguments);this.$el.css('transform',this.atTop?'':`translate(0, -${this.topGap}px)`);this.$el.stop(false,true).fadeIn();},});publicWidget.registry.autohideMenu=publicWidget.Widget.extend({selector:'header#top',disabledInEditableMode:false,async start(){await this._super(...arguments);this.$topMenu=this.$('#top_menu');this.noAutohide=this.$el.is('.o_no_autohide_menu');if(!this.noAutohide){await wUtils.onceAllImagesLoaded(this.$('.navbar'),this.$('.o_mega_menu, .o_offcanvas_logo_container, .dropdown-menu .o_lang_flag'));var $window=$(window);$window.on('load.autohideMenu',function(){$window.trigger('resize');});dom.initAutoMoreMenu(this.$topMenu,{unfoldable:'.divider, .divider ~ li, .o_no_autohide_item'});}
this.$topMenu.removeClass('o_menu_loading');this.$topMenu.trigger('menu_loaded');},destroy(){this._super(...arguments);if(!this.noAutohide&&this.$topMenu){$(window).off('.autohideMenu');dom.destroyAutoMoreMenu(this.$topMenu);}},});publicWidget.registry.menuDirection=publicWidget.Widget.extend({selector:'header .navbar .nav',disabledInEditableMode:false,events:{'show.bs.dropdown':'_onDropdownShow',},start:function(){this.defaultAlignment=this.$el.is('.ml-auto, .ml-auto ~ *')?'right':'left';return this._super.apply(this,arguments);},_checkOpening:function(alignment,liOffset,liWidth,menuWidth,pageWidth){if(alignment==='left'){return(liOffset+menuWidth<=pageWidth);}else{return(liOffset+liWidth-menuWidth>=0);}},_onDropdownShow:function(ev){var $li=$(ev.target);var $menu=$li.children('.dropdown-menu');var liOffset=$li.offset().left;var liWidth=$li.outerWidth();var menuWidth=$menu.outerWidth();var pageWidth=$('#wrapwrap').outerWidth();$menu.removeClass('dropdown-menu-left dropdown-menu-right');var alignment=this.defaultAlignment;if($li.nextAll(':visible').length===0){alignment='right';}
for(var i=0;i<2;i++){if(!this._checkOpening(alignment,liOffset,liWidth,menuWidth,pageWidth)){alignment=(alignment==='left'?'right':'left');}}
$menu.addClass('dropdown-menu-'+alignment);},});publicWidget.registry.hoverableDropdown=animations.Animation.extend({selector:'header.o_hoverable_dropdown',disabledInEditableMode:false,effects:[{startEvents:'resize',update:'_dropdownHover',}],events:{'mouseenter .dropdown':'_onMouseEnter','mouseleave .dropdown':'_onMouseLeave',},start:function(){this.$dropdownMenus=this.$el.find('.dropdown-menu');this.$dropdownToggles=this.$el.find('.dropdown-toggle');this._dropdownHover();return this._super.apply(this,arguments);},_dropdownHover:function(){if(config.device.size_class>config.device.SIZES.SM){this.$dropdownMenus.css('margin-top','0');this.$dropdownMenus.css('top','unset');}else{this.$dropdownMenus.css('margin-top','');this.$dropdownMenus.css('top','');}},_onMouseEnter:function(ev){if(config.device.size_class<=config.device.SIZES.SM){return;}
const $dropdown=$(ev.currentTarget);$dropdown.addClass('show');$dropdown.find(this.$dropdownToggles).attr('aria-expanded','true');$dropdown.find(this.$dropdownMenus).addClass('show');},_onMouseLeave:function(ev){if(config.device.size_class<=config.device.SIZES.SM){return;}
const $dropdown=$(ev.currentTarget);$dropdown.removeClass('show');$dropdown.find(this.$dropdownToggles).attr('aria-expanded','false');$dropdown.find(this.$dropdownMenus).removeClass('show');},});publicWidget.registry.HeaderMainCollapse=publicWidget.Widget.extend({selector:'header#top',events:{'show.bs.collapse #top_menu_collapse':'_onCollapseShow','hidden.bs.collapse #top_menu_collapse':'_onCollapseHidden',},_onCollapseShow(){this.el.classList.add('o_top_menu_collapse_shown');},_onCollapseHidden(){this.el.classList.remove('o_top_menu_collapse_shown');},});return{extraMenuUpdateCallbacks:extraMenuUpdateCallbacks,};});;

/* /website/static/src/js/content/snippets.animation.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.content.snippets.animation',function(require){'use strict';var Class=require('web.Class');var config=require('web.config');var core=require('web.core');const dom=require('web.dom');var mixins=require('web.mixins');var publicWidget=require('web.public.widget');var utils=require('web.utils');var qweb=core.qweb;window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame;if(!window.performance||!window.performance.now){window.performance={now:function(){return Date.now();}};}
publicWidget.Widget.include({disabledInEditableMode:true,edit_events:null,read_events:null,init:function(parent,options){this._super.apply(this,arguments);this.editableMode=this.options.editableMode||false;var extraEvents=this.editableMode?this.edit_events:this.read_events;if(extraEvents){this.events=_.extend({},this.events||{},extraEvents);}},});var AnimationEffect=Class.extend(mixins.ParentedMixin,{init:function(parent,updateCallback,startEvents,$startTarget,options){mixins.ParentedMixin.init.call(this);this.setParent(parent);options=options||{};this._minFrameTime=1000/(options.maxFPS||100);this._updateCallback=updateCallback;this.startEvents=startEvents||'scroll';const mainScrollingElement=$().getScrollingElement()[0];const mainScrollingTarget=mainScrollingElement===document.documentElement?window:mainScrollingElement;this.$startTarget=$($startTarget?$startTarget:this.startEvents==='scroll'?mainScrollingTarget:window);if(options.getStateCallback){this._getStateCallback=options.getStateCallback;}else if(this.startEvents==='scroll'&&this.$startTarget[0]===mainScrollingTarget){const $scrollable=this.$startTarget;this._getStateCallback=function(){return $scrollable.scrollTop();};}else if(this.startEvents==='resize'&&this.$startTarget[0]===window){this._getStateCallback=function(){return{width:window.innerWidth,height:window.innerHeight,};};}else{this._getStateCallback=function(){return undefined;};}
this.endEvents=options.endEvents||false;this.$endTarget=options.$endTarget?$(options.$endTarget):this.$startTarget;this._updateCallback=this._updateCallback.bind(parent);this._getStateCallback=this._getStateCallback.bind(parent);this._uid='_animationEffect'+_.uniqueId();this.startEvents=_processEvents(this.startEvents,this._uid);if(this.endEvents){this.endEvents=_processEvents(this.endEvents,this._uid);}
function _processEvents(events,namespace){events=events.split(' ');return _.each(events,function(e,index){events[index]+=('.'+namespace);}).join(' ');}},destroy:function(){mixins.ParentedMixin.destroy.call(this);this.stop();},start:function(){this._paused=false;this._rafID=window.requestAnimationFrame((function(t){this._update(t);this._paused=true;}).bind(this));if(this.endEvents){this.$startTarget.on(this.startEvents,(function(e){if(this._paused){_.defer(this.play.bind(this,e));}}).bind(this));this.$endTarget.on(this.endEvents,(function(){if(!this._paused){_.defer(this.pause.bind(this));}}).bind(this));}else{var pauseTimer=null;this.$startTarget.on(this.startEvents,_.throttle((function(e){this.play(e);clearTimeout(pauseTimer);pauseTimer=_.delay((function(){this.pause();pauseTimer=null;}).bind(this),2000);}).bind(this),250,{trailing:false}));}},stop:function(){this.$startTarget.off(this.startEvents);if(this.endEvents){this.$endTarget.off(this.endEvents);}
this.pause();},play:function(e){this._newEvent=e;if(!this._paused){return;}
this._paused=false;this._rafID=window.requestAnimationFrame(this._update.bind(this));this._lastUpdateTimestamp=undefined;},pause:function(){if(this._paused){return;}
this._paused=true;window.cancelAnimationFrame(this._rafID);this._lastUpdateTimestamp=undefined;},_update:function(timestamp){if(this._paused){return;}
this._rafID=window.requestAnimationFrame(this._update.bind(this));var elapsedTime=0;if(this._lastUpdateTimestamp){elapsedTime=timestamp-this._lastUpdateTimestamp;if(elapsedTime<this._minFrameTime){return;}}
var animationState=this._getStateCallback(elapsedTime,this._newEvent);if(!this._newEvent&&animationState!==undefined&&_.isEqual(animationState,this._animationLastState)){return;}
this._animationLastState=animationState;this._updateCallback(this._animationLastState,elapsedTime,this._newEvent);this._lastUpdateTimestamp=timestamp;this._newEvent=undefined;},});var Animation=publicWidget.Widget.extend({maxFPS:100,effects:[],start:function(){this._prepareEffects();_.each(this._animationEffects,function(effect){effect.start();});return this._super.apply(this,arguments);},_prepareEffects:function(){this._animationEffects=[];var self=this;_.each(this.effects,function(desc){self._addEffect(self[desc.update],desc.startEvents,_findTarget(desc.startTarget),{getStateCallback:desc.getState&&self[desc.getState],endEvents:desc.endEvents||undefined,$endTarget:_findTarget(desc.endTarget),maxFPS:self.maxFPS,});function _findTarget(selector){if(selector){if(selector==='selector'){return self.$target;}
return self.$(selector);}
return undefined;}});},_addEffect:function(updateCallback,startEvents,$startTarget,options){this._animationEffects.push(new AnimationEffect(this,updateCallback,startEvents,$startTarget,options));},});var registry=publicWidget.registry;registry.slider=publicWidget.Widget.extend({selector:'.carousel',disabledInEditableMode:false,edit_events:{'content_changed':'_onContentChanged',},start:function(){this.$('img').on('load.slider',()=>this._computeHeights());this._computeHeights();this.$target.carousel(this.editableMode?'pause':undefined);$(window).on('resize.slider',_.debounce(()=>this._computeHeights(),250));return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);this.$('img').off('.slider');this.$target.carousel('pause');this.$target.removeData('bs.carousel');_.each(this.$('.carousel-item'),function(el){$(el).css('min-height','');});$(window).off('.slider');},_computeHeights:function(){var maxHeight=0;var $items=this.$('.carousel-item');$items.css('min-height','');_.each($items,function(el){var $item=$(el);var isActive=$item.hasClass('active');$item.addClass('active');var height=$item.outerHeight();if(height>maxHeight){maxHeight=height;}
$item.toggleClass('active',isActive);});$items.css('min-height',maxHeight);},_onContentChanged:function(ev){this._computeHeights();},});registry.Parallax=Animation.extend({selector:'.parallax',disabledInEditableMode:false,effects:[{startEvents:'scroll',update:'_onWindowScroll',}],start:function(){this._rebuild();$(window).on('resize.animation_parallax',_.debounce(this._rebuild.bind(this),500));return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);$(window).off('.animation_parallax');},_rebuild:function(){this.$bg=this.$('> .s_parallax_bg');this.speed=parseFloat(this.$target.attr('data-scroll-background-ratio')||0);var noParallaxSpeed=(this.speed===0||this.speed===1);if(noParallaxSpeed){this.$bg.css({transform:'',top:'',bottom:'',});return;}
this.viewport=document.body.clientHeight-$('#wrapwrap').position().top;this.visibleArea=[this.$target.offset().top];this.visibleArea.push(this.visibleArea[0]+this.$target.innerHeight()+this.viewport);this.ratio=this.speed*(this.viewport/10);const absoluteRatio=Math.abs(this.ratio);this.$bg.css({top:-absoluteRatio,bottom:-absoluteRatio,});},_onWindowScroll:function(scrollOffset){if(this.speed===0||this.speed===1){return;}
var vpEndOffset=scrollOffset+this.viewport;if(vpEndOffset>=this.visibleArea[0]&&vpEndOffset<=this.visibleArea[1]){this.$bg.css('transform','translateY('+_getNormalizedPosition.call(this,vpEndOffset)+'px)');}
function _getNormalizedPosition(pos){var r=(pos-this.visibleArea[1])/(this.visibleArea[0]-this.visibleArea[1]);return Math.round(this.ratio*(2*r-1));}},});registry.mediaVideo=publicWidget.Widget.extend({selector:'.media_iframe_video',start:function(){var def=this._super.apply(this,arguments);if(this.$target.children('iframe').length){return def;}
this.$target.empty();this.$target.append('<div class="css_editable_mode_display">&nbsp;</div>'+'<div class="media_iframe_video_size">&nbsp;</div>');this.$target.append($('<iframe/>',{src:_.escape(this.$target.data('oe-expression')||this.$target.data('src')),frameborder:'0',allowfullscreen:'allowfullscreen',sandbox:'allow-scripts allow-same-origin',}));return def;},});registry.backgroundVideo=publicWidget.Widget.extend({selector:'.o_background_video',xmlDependencies:['/website/static/src/xml/website.background.video.xml'],disabledInEditableMode:false,start:function(){var proms=[this._super(...arguments)];this.videoSrc=this.el.dataset.bgVideoSrc;this.iframeID=_.uniqueId('o_bg_video_iframe_');this.isYoutubeVideo=this.videoSrc.indexOf('youtube')>=0;this.isMobileEnv=config.device.size_class<=config.device.SIZES.LG&&config.device.touch;if(this.isYoutubeVideo&&this.isMobileEnv){this.videoSrc=this.videoSrc+"&enablejsapi=1";if(!window.YT){var oldOnYoutubeIframeAPIReady=window.onYouTubeIframeAPIReady;proms.push(new Promise(resolve=>{window.onYouTubeIframeAPIReady=()=>{if(oldOnYoutubeIframeAPIReady){oldOnYoutubeIframeAPIReady();}
return resolve();};}));$('<script/>',{src:'https://www.youtube.com/iframe_api',}).appendTo('head');}}
var throttledUpdate=_.throttle(()=>this._adjustIframe(),50);var $dropdownMenu=this.$el.closest('.dropdown-menu');if($dropdownMenu.length){this.$dropdownParent=$dropdownMenu.parent();this.$dropdownParent.on('shown.bs.dropdown.backgroundVideo',throttledUpdate);}
$(window).on('resize.'+this.iframeID,throttledUpdate);return Promise.all(proms).then(()=>this._appendBgVideo());},destroy:function(){this._super.apply(this,arguments);if(this.$dropdownParent){this.$dropdownParent.off('.backgroundVideo');}
$(window).off('resize.'+this.iframeID);if(this.$bgVideoContainer){this.$bgVideoContainer.remove();}},_adjustIframe:function(){if(!this.$iframe){return;}
this.$iframe.removeClass('show');var wrapperWidth=this.$target.innerWidth();var wrapperHeight=this.$target.innerHeight();var relativeRatio=(wrapperWidth/wrapperHeight)/(16/9);var style={};if(relativeRatio>=1.0){style['width']='100%';style['height']=(relativeRatio*100)+'%';style['left']='0';style['top']=(-(relativeRatio-1.0)/2*100)+'%';}else{style['width']=((1/relativeRatio)*100)+'%';style['height']='100%';style['left']=(-((1/relativeRatio)-1.0)/2*100)+'%';style['top']='0';}
this.$iframe.css(style);void this.$iframe[0].offsetWidth;this.$iframe.addClass('show');},_appendBgVideo:function(){var $oldContainer=this.$bgVideoContainer||this.$('> .o_bg_video_container');this.$bgVideoContainer=$(qweb.render('website.background.video',{videoSrc:this.videoSrc,iframeID:this.iframeID,}));this.$iframe=this.$bgVideoContainer.find('.o_bg_video_iframe');this.$iframe.one('load',()=>{this.$bgVideoContainer.find('.o_bg_video_loading').remove();});this.$bgVideoContainer.prependTo(this.$target);$oldContainer.remove();this._adjustIframe();if(this.isMobileEnv&&this.isYoutubeVideo){new window.YT.Player(this.iframeID,{events:{onReady:ev=>ev.target.playVideo(),}});}},});registry.socialShare=publicWidget.Widget.extend({selector:'.oe_social_share',xmlDependencies:['/website/static/src/xml/website.share.xml'],events:{'mouseenter':'_onMouseEnter',},_bindSocialEvent:function(){this.$('.oe_social_facebook').click($.proxy(this._renderSocial,this,'facebook'));this.$('.oe_social_twitter').click($.proxy(this._renderSocial,this,'twitter'));this.$('.oe_social_linkedin').click($.proxy(this._renderSocial,this,'linkedin'));},_render:function(){this.$el.popover({content:qweb.render('website.social_hover',{medias:this.socialList}),placement:'bottom',container:this.$el,html:true,trigger:'manual',animation:false,}).popover("show");this.$el.off('mouseleave.socialShare').on('mouseleave.socialShare',function(){var self=this;setTimeout(function(){if(!$(".popover:hover").length){$(self).popover('dispose');}},200);});},_renderSocial:function(social){var url=this.$el.data('urlshare')||document.URL.split(/[?#]/)[0];url=encodeURIComponent(url);var title=document.title.split(" | ")[0];var hashtags=' #'+document.title.split(" | ")[1].replace(' ','')+' '+this.hashtags;var socialNetworks={'facebook':'https://www.facebook.com/sharer/sharer.php?u='+url,'twitter':'https://twitter.com/intent/tweet?original_referer='+url+'&text='+encodeURIComponent(title+hashtags+' - ')+url,'linkedin':'https://www.linkedin.com/sharing/share-offsite/?url='+url,};if(!_.contains(_.keys(socialNetworks),social)){return;}
var wHeight=500;var wWidth=500;window.open(socialNetworks[social],'','menubar=no, toolbar=no, resizable=yes, scrollbar=yes, height='+wHeight+',width='+wWidth);},_onMouseEnter:function(){var social=this.$el.data('social');this.socialList=social?social.split(','):['facebook','twitter','linkedin'];this.hashtags=this.$el.data('hashtags')||'';this._render();this._bindSocialEvent();},});registry.anchorSlide=publicWidget.Widget.extend({selector:'a[href^="/"][href*="#"], a[href^="#"]',events:{'click':'_onAnimateClick',},async _scrollTo($el,scrollValue='true'){return dom.scrollTo($el[0],{duration:scrollValue==='true'?500:0,extraOffset:this._computeExtraOffset(),});},_computeExtraOffset(){return 0;},_onAnimateClick:function(ev){if(this.$target[0].pathname!==window.location.pathname){return;}
var hash=this.$target[0].hash;if(!utils.isValidAnchor(hash)){return;}
var $anchor=$(hash);const scrollValue=$anchor.attr('data-anchor');if(!$anchor.length||!scrollValue){return;}
ev.preventDefault();this._scrollTo($anchor,scrollValue);},});registry.FullScreenHeight=publicWidget.Widget.extend({selector:'.o_full_screen_height',disabledInEditableMode:false,start(){if(this.$el.outerHeight()>this._computeIdealHeight()){this._adaptSize();$(window).on('resize.FullScreenHeight',_.debounce(()=>this._adaptSize(),250));}
return this._super(...arguments);},destroy(){this._super(...arguments);$(window).off('.FullScreenHeight');this.el.style.setProperty('min-height','');},_adaptSize(){const height=this._computeIdealHeight();this.el.style.setProperty('min-height',`${height}px`,'important');},_computeIdealHeight(){const windowHeight=$(window).outerHeight();const firstContentEl=$('#wrapwrap > main > :first-child')[0];const mainTopPos=firstContentEl.getBoundingClientRect().top+dom.closestScrollable(firstContentEl.parentNode).scrollTop;return(windowHeight-mainTopPos);},});registry.ScrollButton=registry.anchorSlide.extend({selector:'.o_scroll_button',_onAnimateClick:function(ev){ev.preventDefault();const $nextSection=this.$el.closest('section').next('section');if($nextSection.length){this._scrollTo($nextSection);}},});registry.FooterSlideout=publicWidget.Widget.extend({selector:'#wrapwrap:has(.o_footer_slideout)',disabledInEditableMode:false,async start(){const $main=this.$('> main');const slideoutEffect=$main.outerHeight()>=$(window).outerHeight();this.el.classList.toggle('o_footer_effect_enable',slideoutEffect);this.__pixelEl=document.createElement('div');this.__pixelEl.style.width=`1px`;this.__pixelEl.style.height=`1px`;this.__pixelEl.style.marginTop=`-1px`;this.el.appendChild(this.__pixelEl);return this._super(...arguments);},destroy(){this._super(...arguments);this.el.classList.remove('o_footer_effect_enable');this.__pixelEl.remove();},});registry.HeaderHamburgerFull=publicWidget.Widget.extend({selector:'header:has(.o_header_hamburger_full_toggler):not(:has(.o_offcanvas_menu_toggler))',events:{'click .o_header_hamburger_full_toggler':'_onToggleClick',},_onToggleClick(){document.body.classList.add('overflow-hidden');setTimeout(()=>$(window).trigger('scroll'),100);},});return{Widget:publicWidget.Widget,Animation:Animation,registry:registry,Class:Animation,};});;

/* /website/static/src/js/menu/navbar.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.navbar',function(require){'use strict';var core=require('web.core');var dom=require('web.dom');var publicWidget=require('web.public.widget');var concurrency=require('web.concurrency');var Widget=require('web.Widget');var websiteRootData=require('website.root');var websiteNavbarRegistry=new publicWidget.RootWidgetRegistry();var WebsiteNavbar=publicWidget.RootWidget.extend({xmlDependencies:['/website/static/src/xml/website.xml'],events:_.extend({},publicWidget.RootWidget.prototype.events||{},{'click [data-action]':'_onActionMenuClick','mouseover > ul > li.dropdown:not(.show)':'_onMenuHovered','click .o_mobile_menu_toggle':'_onMobileMenuToggleClick','mouseenter #oe_applications:not(:has(.dropdown-item))':'_onOeApplicationsHovered','show.bs.dropdown #oe_applications:not(:has(.dropdown-item))':'_onOeApplicationsShow',}),custom_events:_.extend({},publicWidget.RootWidget.prototype.custom_events||{},{'action_demand':'_onActionDemand','edit_mode':'_onEditMode','readonly_mode':'_onReadonlyMode','ready_to_save':'_onSave',}),init:function(){this._super.apply(this,arguments);var self=this;var initPromise=new Promise(function(resolve){self.resolveInit=resolve;});this._widgetDefs=[initPromise];},start:function(){var self=this;dom.initAutoMoreMenu(this.$('ul.o_menu_sections'),{maxWidth:function(){return self.$el.width()
-(self.$('.o_menu_systray').outerWidth(true)||0)
-(self.$('ul#oe_applications').outerWidth(true)||0)
-(self.$('.o_menu_toggle').outerWidth(true)||0)
-(self.$('.o_menu_brand').outerWidth(true)||0);},});return this._super.apply(this,arguments).then(function(){self.resolveInit();});},_attachComponent:function(){var def=this._super.apply(this,arguments);this._widgetDefs.push(def);return def;},_getRegistry:function(){return websiteNavbarRegistry;},_handleAction:function(actionName,params,_i){var self=this;return this._whenReadyForActions().then(function(){var defs=[];_.each(self._widgets,function(w){if(!w.handleAction){return;}
var def=w.handleAction(actionName,params);if(def!==null){defs.push(def);}});if(!defs.length){if(_i>50){console.warn(_.str.sprintf("Action '%s' was not able to be handled.",actionName));return Promise.reject();}
return concurrency.delay(100).then(function(){return self._handleAction(actionName,params,(_i||0)+1);});}
return Promise.all(defs).then(function(values){if(values.length===1){return values[0];}
return values;});});},async _loadAppMenus(){if(!this._loadAppMenusProm){this._loadAppMenusProm=this._rpc({model:'ir.ui.menu',method:'load_menus_root',args:[],});const result=await this._loadAppMenusProm;const menus=core.qweb.render('website.oe_applications_menu',{'menu_data':result,});this.$('#oe_applications .dropdown-menu').html(menus);}
return this._loadAppMenusProm;},_whenReadyForActions:function(){return Promise.all(this._widgetDefs);},_onOeApplicationsHovered:function(){this._loadAppMenus();},_onOeApplicationsShow:function(){this._loadAppMenus();},_onActionMenuClick:function(ev){const restore=dom.addButtonLoadingEffect(ev.currentTarget);this._handleAction($(ev.currentTarget).data('action')).then(restore).guardedCatch(restore);},_onActionDemand:function(ev){var def=this._handleAction(ev.data.actionName,ev.data.params);if(ev.data.onSuccess){def.then(ev.data.onSuccess);}
if(ev.data.onFailure){def.guardedCatch(ev.data.onFailure);}},_onEditMode:function(){this.$el.addClass('editing_mode');this.do_hide();},_onMenuHovered:function(ev){var $opened=this.$('> ul > li.dropdown.show');if($opened.length){$opened.find('.dropdown-toggle').dropdown('toggle');$(ev.currentTarget).find('.dropdown-toggle').dropdown('toggle');}},_onMobileMenuToggleClick:function(){this.$el.parent().toggleClass('o_mobile_menu_opened');},_onReadonlyMode:function(){this.$el.removeClass('editing_mode');this.do_show();},_onSave:function(ev){ev.data.defs.push(this._handleAction('on_save'));},});var WebsiteNavbarActionWidget=Widget.extend({actions:{},handleAction:function(actionName,params){var action=this[this.actions[actionName]];if(action){return Promise.resolve(action.apply(this,params||[]));}
return null;},});websiteRootData.websiteRootRegistry.add(WebsiteNavbar,'#oe_main_menu_navbar');return{WebsiteNavbar:WebsiteNavbar,websiteNavbarRegistry:websiteNavbarRegistry,WebsiteNavbarActionWidget:WebsiteNavbarActionWidget,};});;

/* /website/static/src/js/show_password.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.show_password',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.ShowPassword=publicWidget.Widget.extend({selector:'#showPass',events:{'mousedown':'_onShowText','touchstart':'_onShowText',},destroy:function(){this._super(...arguments);$('body').off(".ShowPassword");},_onShowPassword:function(){this.$el.closest('.input-group').find('#password').attr('type','password');},_onShowText:function(){$('body').one('mouseup.ShowPassword touchend.ShowPassword',this._onShowPassword.bind(this));this.$el.closest('.input-group').find('#password').attr('type','text');},});return publicWidget.registry.ShowPassword;});;

/* /website/static/src/js/post_link.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.post_link',function(require){'use strict';const publicWidget=require('web.public.widget');const wUtils=require('website.utils');publicWidget.registry.postLink=publicWidget.Widget.extend({selector:'.post_link',events:{'click':'_onClickPost',},_onClickPost:function(ev){ev.preventDefault();const url=this.el.dataset.post||this.el.href;let data={};for(let[key,value]of Object.entries(this.el.dataset)){if(key.startsWith('post_')){data[key.slice(5)]=value;}};wUtils.sendRequest(url,data);},});});;

/* /website/static/src/js/user_custom_javascript.js defined in bundle 'web.assets_frontend_lazy' */
;

/* /website/static/src/snippets/s_share/000.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.s_share',function(require){'use strict';const publicWidget=require('web.public.widget');const ShareWidget=publicWidget.Widget.extend({selector:'.s_share, .oe_share',start:function(){var urlRegex=/(\?(?:|.*&)(?:u|url|body)=)(.*?)(&|#|$)/;var titleRegex=/(\?(?:|.*&)(?:title|text|subject)=)(.*?)(&|#|$)/;var url=encodeURIComponent(window.location.href);var title=encodeURIComponent($('title').text());this.$('a').each(function(){var $a=$(this);$a.attr('href',function(i,href){return href.replace(urlRegex,function(match,a,b,c){return a+url+c;}).replace(titleRegex,function(match,a,b,c){return a+title+c;});});if($a.attr('target')&&$a.attr('target').match(/_blank/i)&&!$a.closest('.o_editable').length){$a.on('click',function(){window.open(this.href,'','menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=550,width=600');return false;});}});return this._super.apply(this,arguments);},});publicWidget.registry.share=ShareWidget;return ShareWidget;});;

/* /website/static/src/snippets/s_facebook_page/000.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.s_facebook_page',function(require){'use strict';var publicWidget=require('web.public.widget');var utils=require('web.utils');const FacebookPageWidget=publicWidget.Widget.extend({selector:'.o_facebook_page',disabledInEditableMode:false,start:function(){var def=this._super.apply(this,arguments);var params=_.pick(this.$el.data(),'href','height','tabs','small_header','hide_cover','show_facepile');if(!params.href){return def;}
params.width=utils.confine(Math.floor(this.$el.width()),180,500);var src=$.param.querystring('https://www.facebook.com/plugins/page.php',params);this.$iframe=$('<iframe/>',{src:src,class:'o_temp_auto_element',width:params.width,height:params.height,css:{border:'none',overflow:'hidden',},scrolling:'no',frameborder:'0',allowTransparency:'true',});this.$el.append(this.$iframe);return def;},destroy:function(){this._super.apply(this,arguments);if(this.$iframe){this.$iframe.remove();}},});publicWidget.registry.facebookPage=FacebookPageWidget;return FacebookPageWidget;});;

/* /website/static/src/snippets/s_image_gallery/000.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.s_image_gallery',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var qweb=core.qweb;const GalleryWidget=publicWidget.Widget.extend({selector:'.s_image_gallery:not(.o_slideshow)',xmlDependencies:['/website/static/src/snippets/s_image_gallery/000.xml'],events:{'click img':'_onClickImg',},_onClickImg:function(ev){var self=this;var $cur=$(ev.currentTarget);var $images=$cur.closest('.s_image_gallery').find('img');var size=0.8;var dimensions={min_width:Math.round(window.innerWidth*size*0.9),min_height:Math.round(window.innerHeight*size),max_width:Math.round(window.innerWidth*size*0.9),max_height:Math.round(window.innerHeight*size),width:Math.round(window.innerWidth*size*0.9),height:Math.round(window.innerHeight*size)};var $img=($cur.is('img')===true)?$cur:$cur.closest('img');const milliseconds=$cur.closest('.s_image_gallery').data('interval')||false;var $modal=$(qweb.render('website.gallery.slideshow.lightbox',{images:$images.get(),index:$images.index($img),dim:dimensions,interval:milliseconds||0,id:_.uniqueId('slideshow_'),}));$modal.modal({keyboard:true,backdrop:true,});$modal.on('hidden.bs.modal',function(){$(this).hide();$(this).siblings().filter('.modal-backdrop').remove();$(this).remove();});$modal.find('.modal-content, .modal-body.o_slideshow').css('height','100%');$modal.appendTo(document.body);$modal.one('shown.bs.modal',function(){self.trigger_up('widgets_start_request',{editableMode:false,$target:$modal.find('.modal-body.o_slideshow'),});});},});const GallerySliderWidget=publicWidget.Widget.extend({selector:'.o_slideshow',xmlDependencies:['/website/static/src/snippets/s_image_gallery/000.xml'],disabledInEditableMode:false,start:function(){var self=this;this.$carousel=this.$target.is('.carousel')?this.$target:this.$target.find('.carousel');this.$indicator=this.$carousel.find('.carousel-indicators');this.$prev=this.$indicator.find('li.o_indicators_left').css('visibility','');this.$next=this.$indicator.find('li.o_indicators_right').css('visibility','');var $lis=this.$indicator.find('li[data-slide-to]');let indicatorWidth=this.$indicator.width();if(indicatorWidth===0){const $indicatorParent=this.$indicator.parents().not(':visible').last();if(!$indicatorParent[0].style.display){$indicatorParent[0].style.display='block';indicatorWidth=this.$indicator.width();$indicatorParent[0].style.display='';}}
let nbPerPage=Math.floor(indicatorWidth/$lis.first().outerWidth(true))-3;var realNbPerPage=nbPerPage||1;var nbPages=Math.ceil($lis.length/realNbPerPage);var index;var page;update();function hide(){$lis.each(function(i){$(this).toggleClass('d-none',i<page*nbPerPage||i>=(page+1)*nbPerPage);});if(page<=0){self.$prev.detach();}else{self.$prev.removeClass('d-none');self.$prev.prependTo(self.$indicator);}
if(page>=nbPages-1){self.$next.detach();}else{self.$next.removeClass('d-none');self.$next.appendTo(self.$indicator);}}
function update(){const active=$lis.filter('.active');index=active.length?$lis.index(active):0;page=Math.floor(index/realNbPerPage);hide();}
this.$carousel.on('slide.bs.carousel.gallery_slider',function(){setTimeout(function(){var $item=self.$carousel.find('.carousel-inner .carousel-item-prev, .carousel-inner .carousel-item-next');var index=$item.index();$lis.removeClass('active').filter('[data-slide-to="'+index+'"]').addClass('active');},0);});this.$indicator.on('click.gallery_slider','> li:not([data-slide-to])',function(){page+=($(this).hasClass('o_indicators_left')?-1:1);page=Math.max(0,Math.min(nbPages-1,page));self.$carousel.carousel(page*realNbPerPage);if(!self.editableMode){hide();}});this.$carousel.on('slid.bs.carousel.gallery_slider',update);return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);if(!this.$indicator){return;}
this.$prev.prependTo(this.$indicator);this.$next.appendTo(this.$indicator);this.$carousel.off('.gallery_slider');this.$indicator.off('.gallery_slider');},});publicWidget.registry.gallery=GalleryWidget;publicWidget.registry.gallerySlider=GallerySliderWidget;return{GalleryWidget:GalleryWidget,GallerySliderWidget:GallerySliderWidget,};});;

/* /website/static/src/snippets/s_countdown/000.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.s_countdown',function(require){'use strict';const{ColorpickerWidget}=require('web.Colorpicker');const core=require('web.core');const publicWidget=require('web.public.widget');const weUtils=require('web_editor.utils');const qweb=core.qweb;const _t=core._t;const CountdownWidget=publicWidget.Widget.extend({selector:'.s_countdown',xmlDependencies:['/website/static/src/snippets/s_countdown/000.xml'],disabledInEditableMode:false,defaultColor:'rgba(0, 0, 0, 255)',start:function(){this.$wrapper=this.$('.s_countdown_canvas_wrapper');this.hereBeforeTimerEnds=false;this.endAction=this.el.dataset.endAction;this.endTime=parseInt(this.el.dataset.endTime);this.size=parseInt(this.el.dataset.size);this.display=this.el.dataset.display;this.layout=this.el.dataset.layout;this.layoutBackground=this.el.dataset.layoutBackground;this.progressBarStyle=this.el.dataset.progressBarStyle;this.progressBarWeight=this.el.dataset.progressBarWeight;this.textColor=this._ensureCssColor(this.el.dataset.textColor);this.layoutBackgroundColor=this._ensureCssColor(this.el.dataset.layoutBackgroundColor);this.progressBarColor=this._ensureCssColor(this.el.dataset.progressBarColor);this.onlyOneUnit=this.display==='d';this.width=parseInt(this.size);if(this.layout==='boxes'){this.width/=1.75;}
this._initTimeDiff();this._render();this.setInterval=setInterval(this._render.bind(this),1000);return this._super(...arguments);},destroy:function(){this.$('.s_countdown_end_redirect_message').remove();this.$('canvas').remove();this.$('.s_countdown_end_message').addClass('d-none');this.$('.s_countdown_text_wrapper').remove();this.$('.s_countdown_canvas_wrapper').removeClass('d-none');clearInterval(this.setInterval);this._super(...arguments);},_ensureCssColor:function(color){if(ColorpickerWidget.isCSSColor(color)){return color;}
return weUtils.getCSSVariableValue(color)||this.defaultColor;},_getDelta:function(){const currentTimestamp=Date.now()/1000;return this.endTime-currentTimestamp;},_handleEndCountdownAction:function(){if(this.endAction==='redirect'){const redirectUrl=this.el.dataset.redirectUrl||'/';if(this.hereBeforeTimerEnds){setTimeout(()=>window.location=redirectUrl,500);}else{if(!this.$('.s_countdown_end_redirect_message').length){const $container=this.$('> .container, > .container-fluid, > .o_container_small');$container.append($(qweb.render('website.s_countdown.end_redirect_message',{redirectUrl:redirectUrl,})));}}}else if(this.endAction==='message'){this.$('.s_countdown_end_message').removeClass('d-none');}},_initTimeDiff:function(){const delta=this._getDelta();this.diff=[];if(this._isUnitVisible('d')&&!(this.onlyOneUnit&&delta<86400)){this.diff.push({canvas:$('<canvas/>',{class:'o_temp_auto_element'}).appendTo(this.$wrapper)[0],total:15,label:_t("Days"),nbSeconds:86400,});}
if(this._isUnitVisible('h')||(this.onlyOneUnit&&delta<86400&&delta>3600)){this.diff.push({canvas:$('<canvas/>',{class:'o_temp_auto_element'}).appendTo(this.$wrapper)[0],total:24,label:_t("Hours"),nbSeconds:3600,});}
if(this._isUnitVisible('m')||(this.onlyOneUnit&&delta<3600&&delta>60)){this.diff.push({canvas:$('<canvas/>',{class:'o_temp_auto_element'}).appendTo(this.$wrapper)[0],total:60,label:_t("Minutes"),nbSeconds:60,});}
if(this._isUnitVisible('s')||(this.onlyOneUnit&&delta<60)){this.diff.push({canvas:$('<canvas/>',{class:'o_temp_auto_element'}).appendTo(this.$wrapper)[0],total:60,label:_t("Seconds"),nbSeconds:1,});}},_isUnitVisible:function(unit){return this.display.includes(unit);},_render:function(){if(this.onlyOneUnit&&this._getDelta()<this.diff[0].nbSeconds){this.$('canvas').remove();this._initTimeDiff();}
this._updateTimeDiff();const hideCountdown=this.isFinished&&!this.editableMode&&this.$el.hasClass('hide-countdown');if(this.layout==='text'){this.$('canvas').addClass('d-none');if(!this.$textWrapper){this.$textWrapper=$('<span/>').attr({class:'s_countdown_text_wrapper d-none',});this.$textWrapper.text(_t("Countdown ends in"));this.$textWrapper.append($('<span/>').attr({class:'s_countdown_text ml-1',}));this.$textWrapper.appendTo(this.$wrapper);}
this.$textWrapper.toggleClass('d-none',hideCountdown);const countdownText=this.diff.map(e=>e.nb+' '+e.label).join(', ');this.$('.s_countdown_text').text(countdownText.toLowerCase());}else{for(const val of this.diff){const canvas=val.canvas;const ctx=canvas.getContext("2d");ctx.canvas.width=this.width;ctx.canvas.height=this.size;this._clearCanvas(ctx);$(canvas).toggleClass('d-none',hideCountdown);if(hideCountdown){continue;}
if(this.layoutBackground!=='none'){this._drawBgShape(ctx,this.layoutBackground==='plain');}
this._drawText(canvas,val.nb,val.label,this.layoutBackground==='plain');if(this.progressBarStyle==='surrounded'){this._drawProgressBarBg(ctx,this.progressBarWeight==='thin');}
if(this.progressBarStyle!=='none'){this._drawProgressBar(ctx,val.nb,val.total,this.progressBarWeight==='thin');}
$(canvas).toggleClass('mx-2',this.layout==='boxes');}}
if(this.isFinished){clearInterval(this.setInterval);if(!this.editableMode){this._handleEndCountdownAction();}}},_updateTimeDiff:function(){let delta=this._getDelta();this.isFinished=delta<0;if(this.isFinished){for(const unitData of this.diff){unitData.nb=0;}
return;}
this.hereBeforeTimerEnds=true;for(const unitData of this.diff){unitData.nb=Math.floor(delta/unitData.nbSeconds);delta-=unitData.nb*unitData.nbSeconds;}},_clearCanvas:function(ctx){ctx.clearRect(0,0,this.size,this.size);},_drawText:function(canvas,textNb,textUnit,full=false){const ctx=canvas.getContext("2d");const nbSize=this.size/4;ctx.font=`${nbSize}px Arial`;ctx.fillStyle=this.textColor;ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText(textNb,canvas.width/2,canvas.height/2);const unitSize=this.size/12;ctx.font=`${unitSize}px Arial`;ctx.fillText(textUnit,canvas.width/2,canvas.height/2+nbSize/1.5,this.width);if(this.layout==='boxes'&&this.layoutBackground!=='none'&&this.progressBarStyle==='none'){let barWidth=this.size/(this.progressBarWeight==='thin'?31:10);if(full){barWidth=0;}
ctx.beginPath();ctx.moveTo(barWidth,this.size/2);ctx.lineTo(this.width-barWidth,this.size/2);ctx.stroke();}},_drawBgShape:function(ctx,full=false){ctx.fillStyle=this.layoutBackgroundColor;ctx.beginPath();if(this.layout==='circle'){let rayon=this.size/2;if(this.progressBarWeight==='thin'){rayon-=full?this.size/29:this.size/15;}else{rayon-=full?0:this.size/10;}
ctx.arc(this.size/2,this.size/2,rayon,0,Math.PI*2);ctx.fill();}else if(this.layout==='boxes'){let barWidth=this.size/(this.progressBarWeight==='thin'?31:10);if(full){barWidth=0;}
ctx.fillStyle=this.layoutBackgroundColor;ctx.rect(barWidth,barWidth,this.width-barWidth*2,this.size-barWidth*2);ctx.fill();const gradient=ctx.createLinearGradient(0,this.width,0,0);gradient.addColorStop(0,'#ffffff24');gradient.addColorStop(1,this.layoutBackgroundColor);ctx.fillStyle=gradient;ctx.rect(barWidth,barWidth,this.width-barWidth*2,this.size-barWidth*2);ctx.fill();$(ctx.canvas).css({'border-radius':'8px'});}},_drawProgressBar:function(ctx,nbUnit,totalUnit,thinLine){ctx.strokeStyle=this.progressBarColor;ctx.lineWidth=thinLine?this.size/35:this.size/10;if(this.layout==='circle'){ctx.beginPath();ctx.arc(this.size/2,this.size/2,this.size/2-this.size/20,Math.PI/-2,(Math.PI*2)*(nbUnit/totalUnit)+(Math.PI/-2));ctx.stroke();}else if(this.layout==='boxes'){ctx.lineWidth*=2;let pc=nbUnit/totalUnit*100;const linesCoordFuncs=[(linePc)=>[0+ctx.lineWidth/2,0,(this.width-ctx.lineWidth/2)*linePc/25+ctx.lineWidth/2,0],(linePc)=>[this.width,0+ctx.lineWidth/2,this.width,(this.size-ctx.lineWidth/2)*linePc/25+ctx.lineWidth/2],(linePc)=>[this.width-((this.width-ctx.lineWidth/2)*linePc/25)-ctx.lineWidth/2,this.size,this.width-ctx.lineWidth/2,this.size],(linePc)=>[0,this.size-((this.size-ctx.lineWidth/2)*linePc/25)-ctx.lineWidth/2,0,this.size-ctx.lineWidth/2],];while(pc>0&&linesCoordFuncs.length){const linePc=Math.min(pc,25);const lineCoord=(linesCoordFuncs.shift())(linePc);ctx.beginPath();ctx.moveTo(lineCoord[0],lineCoord[1]);ctx.lineTo(lineCoord[2],lineCoord[3]);ctx.stroke();pc-=linePc;}}},_drawProgressBarBg:function(ctx,thinLine){ctx.strokeStyle=this.progressBarColor;ctx.globalAlpha=0.2;ctx.lineWidth=thinLine?this.size/35:this.size/10;if(this.layout==='circle'){ctx.beginPath();ctx.arc(this.size/2,this.size/2,this.size/2-this.size/20,0,Math.PI*2);ctx.stroke();}else if(this.layout==='boxes'){ctx.lineWidth*=2;const points=[[0+ctx.lineWidth/2,0,this.width,0],[this.width,0+ctx.lineWidth/2,this.width,this.size],[0,this.size,this.width-ctx.lineWidth/2,this.size],[0,0,0,this.size-ctx.lineWidth/2],];while(points.length){const point=points.shift();ctx.beginPath();ctx.moveTo(point[0],point[1]);ctx.lineTo(point[2],point[3]);ctx.stroke();}}
ctx.globalAlpha=1;},});publicWidget.registry.countdown=CountdownWidget;return CountdownWidget;});;

/* /website/static/src/snippets/s_popup/000.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.s_popup',function(require){'use strict';const config=require('web.config');const publicWidget=require('web.public.widget');const utils=require('web.utils');const PopupWidget=publicWidget.Widget.extend({selector:'.s_popup',events:{'click .js_close_popup':'_onCloseClick','hide.bs.modal':'_onHideModal',},start:function(){this._popupAlreadyShown=!!utils.get_cookie(this.$el.attr('id'));if(!this._popupAlreadyShown){this._bindPopup();}
return this._super(...arguments);},destroy:function(){this._super.apply(this,arguments);$(document).off('mouseleave.open_popup');this.$target.find('.modal').modal('hide');clearTimeout(this.timeout);},_bindPopup:function(){const $main=this.$target.find('.modal');let display=$main.data('display');let delay=$main.data('showAfter');if(config.device.isMobile){if(display==='mouseExit'){display='afterDelay';delay=5000;}
this.$('.modal').removeClass('s_popup_middle').addClass('s_popup_bottom');}
if(display==='afterDelay'){this.timeout=setTimeout(()=>this._showPopup(),delay);}else{$(document).on('mouseleave.open_popup',()=>this._showPopup());}},_hidePopup:function(){this.$target.find('.modal').modal('hide');},_showPopup:function(){if(this._popupAlreadyShown){return;}
this.$target.find('.modal').modal('show');},_onCloseClick:function(){this._hidePopup();},_onHideModal:function(){const nbDays=this.$el.find('.modal').data('consentsDuration');utils.set_cookie(this.$el.attr('id'),true,nbDays*24*60*60);this._popupAlreadyShown=true;},});publicWidget.registry.popup=PopupWidget;const _baseSetScrollbar=$.fn.modal.Constructor.prototype._setScrollbar;$.fn.modal.Constructor.prototype._setScrollbar=function(){if(this._element.classList.contains('s_popup_no_backdrop')){return;}
return _baseSetScrollbar.apply(this,...arguments);};const _baseGetScrollbarWidth=$.fn.modal.Constructor.prototype._getScrollbarWidth;$.fn.modal.Constructor.prototype._getScrollbarWidth=function(){if(this._element.classList.contains('s_popup_no_backdrop')){return 0;}
return _baseGetScrollbarWidth.apply(this,...arguments);};return PopupWidget;});;

/* /website/static/src/snippets/s_table_of_content/000.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.s_table_of_content',function(require){'use strict';const publicWidget=require('web.public.widget');const{extraMenuUpdateCallbacks}=require('website.content.menu');const TableOfContent=publicWidget.Widget.extend({selector:'section .s_table_of_content_navbar_sticky',disabledInEditableMode:false,async start(){await this._super(...arguments);this._updateTableOfContentNavbarPosition();extraMenuUpdateCallbacks.push(this._updateTableOfContentNavbarPosition.bind(this));},destroy(){this.$target.css('top','');this.$target.find('.s_table_of_content_navbar').css('top','');this._super(...arguments);},_updateTableOfContentNavbarPosition(){let position=0;const $fixedElements=$('.o_top_fixed_element');_.each($fixedElements,el=>position+=$(el).outerHeight());const isHorizontalNavbar=this.$target.hasClass('s_table_of_content_horizontal_navbar');this.$target.css('top',isHorizontalNavbar?position:'');this.$target.find('.s_table_of_content_navbar').css('top',isHorizontalNavbar?'':position+20);const $mainNavBar=$('#oe_main_menu_navbar');position+=$mainNavBar.length?$mainNavBar.outerHeight():0;position+=isHorizontalNavbar?this.$target.outerHeight():0;$().getScrollingElement().scrollspy({target:'.s_table_of_content_navbar',method:'offset',offset:position+100});},});publicWidget.registry.anchorSlide.include({_computeExtraOffset(){let extraOffset=this._super(...arguments);if(this.$el.hasClass('table_of_content_link')){const tableOfContentNavbarEl=this.$el.closest('.s_table_of_content_navbar_sticky.s_table_of_content_horizontal_navbar');if(tableOfContentNavbarEl.length>0){extraOffset+=$(tableOfContentNavbarEl).outerHeight();}}
return extraOffset;},});publicWidget.registry.snippetTableOfContent=TableOfContent;return TableOfContent;});;

/* /website/static/src/snippets/s_chart/000.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.s_chart',function(require){'use strict';const publicWidget=require('web.public.widget');const weUtils=require('web_editor.utils');const ChartWidget=publicWidget.Widget.extend({selector:'.s_chart',disabledInEditableMode:false,jsLibs:['/web/static/lib/Chart/Chart.js',],init:function(parent,options){this._super.apply(this,arguments);this.style=window.getComputedStyle(document.documentElement);},start:function(){const data=JSON.parse(this.el.dataset.data);data.datasets.forEach(el=>{if(Array.isArray(el.backgroundColor)){el.backgroundColor=el.backgroundColor.map(el=>this._convertToCssColor(el));el.borderColor=el.borderColor.map(el=>this._convertToCssColor(el));}else{el.backgroundColor=this._convertToCssColor(el.backgroundColor);el.borderColor=this._convertToCssColor(el.borderColor);}
el.borderWidth=this.el.dataset.borderWidth;});const chartData={type:this.el.dataset.type,data:data,options:{legend:{display:this.el.dataset.legendPosition!=='none',position:this.el.dataset.legendPosition,},tooltips:{enabled:this.el.dataset.tooltipDisplay==='true',},title:{display:!!this.el.dataset.title,text:this.el.dataset.title,},},};if(this.el.dataset.type==='radar'){chartData.options.scale={ticks:{beginAtZero:true,}};}else if(['pie','doughnut'].includes(this.el.dataset.type)){chartData.options.tooltips.callbacks={label:(tooltipItem,data)=>{const label=data.datasets[tooltipItem.datasetIndex].label;const secondLabel=data.labels[tooltipItem.index];let final=label;if(label){if(secondLabel){final=label+' - '+secondLabel;}}else if(secondLabel){final=secondLabel;}
return final+':'+data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];},};}else{chartData.options.scales={xAxes:[{stacked:this.el.dataset.stacked==='true',ticks:{beginAtZero:true},}],yAxes:[{stacked:this.el.dataset.stacked==='true',ticks:{beginAtZero:true},}],};}
if(this.editableMode){chartData.options.animation={duration:0,};}
const canvas=this.el.querySelector('canvas');this.chart=new window.Chart(canvas,chartData);return this._super.apply(this,arguments);},destroy:function(){if(this.chart){this.chart.destroy();this.el.querySelectorAll('.chartjs-size-monitor').forEach(el=>el.remove());}
this._super.apply(this,arguments);},_convertToCssColor:function(color){if(!color){return'transparent';}
return weUtils.getCSSVariableValue(color,this.style)||color;},});publicWidget.registry.chart=ChartWidget;return ChartWidget;});;

/* /website/static/src/snippets/s_google_map/000.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.s_google_map',function(require){'use strict';const publicWidget=require('web.public.widget');publicWidget.registry.GoogleMap=publicWidget.Widget.extend({selector:'.s_google_map',disabledInEditableMode:false,mapColors:{lightMonoMap:[{"featureType":"administrative.locality","elementType":"all","stylers":[{"hue":"#2c2e33"},{"saturation":7},{"lightness":19},{"visibility":"on"}]},{"featureType":"landscape","elementType":"all","stylers":[{"hue":"#ffffff"},{"saturation":-100},{"lightness":100},{"visibility":"simplified"}]},{"featureType":"poi","elementType":"all","stylers":[{"hue":"#ffffff"},{"saturation":-100},{"lightness":100},{"visibility":"off"}]},{"featureType":"road","elementType":"geometry","stylers":[{"hue":"#bbc0c4"},{"saturation":-93},{"lightness":31},{"visibility":"simplified"}]},{"featureType":"road","elementType":"labels","stylers":[{"hue":"#bbc0c4"},{"saturation":-93},{"lightness":31},{"visibility":"on"}]},{"featureType":"road.arterial","elementType":"labels","stylers":[{"hue":"#bbc0c4"},{"saturation":-93},{"lightness":-2},{"visibility":"simplified"}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"hue":"#e9ebed"},{"saturation":-90},{"lightness":-8},{"visibility":"simplified"}]},{"featureType":"transit","elementType":"all","stylers":[{"hue":"#e9ebed"},{"saturation":10},{"lightness":69},{"visibility":"on"}]},{"featureType":"water","elementType":"all","stylers":[{"hue":"#e9ebed"},{"saturation":-78},{"lightness":67},{"visibility":"simplified"}]}],lillaMap:[{elementType:"labels",stylers:[{saturation:-20}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:'road.highway',elementType:'labels',stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry.fill",stylers:[{hue:'#2d313f'},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{hue:'#2d313f'},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"poi.government",elementType:"geometry.fill",stylers:[{hue:'#2d313f'},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"poi.sport_complex",elementType:"geometry.fill",stylers:[{hue:'#2d313f'},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"poi.attraction",elementType:"geometry.fill",stylers:[{hue:'#2d313f'},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"poi.business",elementType:"geometry.fill",stylers:[{hue:'#2d313f'},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"transit",elementType:"geometry.fill",stylers:[{hue:'#2d313f'},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"transit.station",elementType:"geometry.fill",stylers:[{hue:'#2d313f'},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"landscape",stylers:[{hue:'#2d313f'},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"road",elementType:"geometry.fill",stylers:[{hue:'#2d313f'},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{hue:'#2d313f'},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"water",elementType:"geometry",stylers:[{hue:'#2d313f'},{visibility:"on"},{lightness:5},{saturation:-20}]}],blueMap:[{stylers:[{hue:"#00ffe6"},{saturation:-20}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]}],retroMap:[{"featureType":"administrative","elementType":"all","stylers":[{"visibility":"on"},{"lightness":33}]},{"featureType":"landscape","elementType":"all","stylers":[{"color":"#f2e5d4"}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#c5dac6"}]},{"featureType":"poi.park","elementType":"labels","stylers":[{"visibility":"on"},{"lightness":20}]},{"featureType":"road","elementType":"all","stylers":[{"lightness":20}]},{"featureType":"road.highway","elementType":"geometry","stylers":[{"color":"#c5c6c6"}]},{"featureType":"road.arterial","elementType":"geometry","stylers":[{"color":"#e4d7c6"}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"color":"#fbfaf7"}]},{"featureType":"water","elementType":"all","stylers":[{"visibility":"on"},{"color":"#acbcc9"}]}],flatMap:[{"stylers":[{"visibility":"off"}]},{"featureType":"road","stylers":[{"visibility":"on"},{"color":"#ffffff"}]},{"featureType":"road.arterial","stylers":[{"visibility":"on"},{"color":"#fee379"}]},{"featureType":"road.highway","stylers":[{"visibility":"on"},{"color":"#fee379"}]},{"featureType":"landscape","stylers":[{"visibility":"on"},{"color":"#f3f4f4"}]},{"featureType":"water","stylers":[{"visibility":"on"},{"color":"#7fc8ed"}]},{},{"featureType":"road","elementType":"labels","stylers":[{"visibility":"on"}]},{"featureType":"poi.park","elementType":"geometry.fill","stylers":[{"visibility":"on"},{"color":"#83cead"}]},{"elementType":"labels","stylers":[{"visibility":"on"}]},{"featureType":"landscape.man_made","elementType":"geometry","stylers":[{"weight":0.9},{"visibility":"off"}]}],cobaltMap:[{"featureType":"all","elementType":"all","stylers":[{"invert_lightness":true},{"saturation":10},{"lightness":30},{"gamma":0.5},{"hue":"#435158"}]}],cupertinoMap:[{"featureType":"water","elementType":"geometry","stylers":[{"color":"#a2daf2"}]},{"featureType":"landscape.man_made","elementType":"geometry","stylers":[{"color":"#f7f1df"}]},{"featureType":"landscape.natural","elementType":"geometry","stylers":[{"color":"#d0e3b4"}]},{"featureType":"landscape.natural.terrain","elementType":"geometry","stylers":[{"visibility":"off"}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#bde6ab"}]},{"featureType":"poi","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"poi.medical","elementType":"geometry","stylers":[{"color":"#fbd3da"}]},{"featureType":"poi.business","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"geometry.stroke","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#ffe15f"}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"color":"#efd151"}]},{"featureType":"road.arterial","elementType":"geometry.fill","stylers":[{"color":"#ffffff"}]},{"featureType":"road.local","elementType":"geometry.fill","stylers":[{"color":"black"}]},{"featureType":"transit.station.airport","elementType":"geometry.fill","stylers":[{"color":"#cfb2db"}]}],carMap:[{"featureType":"administrative","stylers":[{"visibility":"off"}]},{"featureType":"poi","stylers":[{"visibility":"simplified"}]},{"featureType":"road","stylers":[{"visibility":"simplified"}]},{"featureType":"water","stylers":[{"visibility":"simplified"}]},{"featureType":"transit","stylers":[{"visibility":"simplified"}]},{"featureType":"landscape","stylers":[{"visibility":"simplified"}]},{"featureType":"road.highway","stylers":[{"visibility":"off"}]},{"featureType":"road.local","stylers":[{"visibility":"on"}]},{"featureType":"road.highway","elementType":"geometry","stylers":[{"visibility":"on"}]},{"featureType":"water","stylers":[{"color":"#84afa3"},{"lightness":52}]},{"stylers":[{"saturation":-77}]},{"featureType":"road"}],bwMap:[{stylers:[{hue:"#00ffe6"},{saturation:-100}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]}],},async start(){await this._super(...arguments);if(typeof google!=='object'||typeof google.maps!=='object'){await new Promise(resolve=>{this.trigger_up('gmap_api_request',{editableMode:this.editableMode,onSuccess:()=>resolve(),});});return;}
const std=[];new google.maps.StyledMapType(std,{name:"Std Map"});const myOptions={zoom:12,center:new google.maps.LatLng(50.854975,4.3753899),mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:false,zoomControl:false,mapTypeControl:false,streetViewControl:false,scrollwheel:false,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,'map_style']}};const mapC=this.$('.map_container');const map=new google.maps.Map(mapC.get(0),myOptions);const p=this.el.dataset.mapGps.substring(1).slice(0,-1).split(',');const gps=new google.maps.LatLng(p[0],p[1]);map.setCenter(gps);google.maps.event.addDomListener(window,'resize',()=>{map.setCenter(gps);});const markerOptions={map:map,animation:google.maps.Animation.DROP,position:new google.maps.LatLng(p[0],p[1])};if(this.el.dataset.pinStyle==='flat'){markerOptions.icon='/website/static/src/img/snippets_thumbs/s_google_map_marker.png';}
new google.maps.Marker(markerOptions);map.setMapTypeId(google.maps.MapTypeId[this.el.dataset.mapType]);map.setZoom(parseInt(this.el.dataset.mapZoom));const mapColorAttr=this.el.dataset.mapColor;if(mapColorAttr){const mapColor=this.mapColors[mapColorAttr];map.mapTypes.set('map_style',new google.maps.StyledMapType(mapColor,{name:"Styled Map"}));map.setMapTypeId('map_style');}},});});;

/* /website/static/src/snippets/s_dynamic_snippet/000.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.s_dynamic_snippet',function(require){'use strict';const core=require('web.core');const config=require('web.config');const publicWidget=require('web.public.widget');const DynamicSnippet=publicWidget.Widget.extend({selector:'.s_dynamic_snippet',xmlDependencies:['/website/static/src/snippets/s_dynamic_snippet/000.xml'],read_events:{'click [data-url]':'_onCallToAction',},disabledInEditableMode:false,init:function(){this._super.apply(this,arguments);this.data=[];this.renderedContent='';this.isDesplayedAsMobile=config.device.isMobile;this.uniqueId=_.uniqueId('s_dynamic_snippet_');this.template_key='website.s_dynamic_snippet.grid';},willStart:function(){return this._super.apply(this,arguments).then(()=>Promise.all([this._fetchData(),this._manageWarningMessageVisibility()]));},start:function(){return this._super.apply(this,arguments).then(()=>{this._setupSizeChangedManagement(true);this._render();this._toggleVisibility(true);});},destroy:function(){this._toggleVisibility(false);this._setupSizeChangedManagement(false);this._clearContent();this._super.apply(this,arguments);},_clearContent:function(){const $dynamicSnippetTemplate=this.$el.find('.dynamic_snippet_template');if($dynamicSnippetTemplate){$dynamicSnippetTemplate.html('');}},_isConfigComplete:function(){return this.$el.get(0).dataset.filterId!==undefined&&this.$el.get(0).dataset.templateKey!==undefined;},_getSearchDomain:function(){return[];},_fetchData:function(){if(this._isConfigComplete()){return this._rpc({'route':'/website/snippet/filters','params':{'filter_id':parseInt(this.$el.get(0).dataset.filterId),'template_key':this.$el.get(0).dataset.templateKey,'limit':parseInt(this.$el.get(0).dataset.numberOfRecords),'search_domain':this._getSearchDomain()},}).then((data)=>{this.data=data;});}else{return new Promise((resolve)=>{this.data=[];resolve();});}},_mustMessageWarningBeHidden:function(){return this._isConfigComplete()||!this.editableMode;},_manageWarningMessageVisibility:async function(){this.$el.find('.missing_option_warning').toggleClass('d-none',this._mustMessageWarningBeHidden());},_prepareContent:function(){if(this.$target[0].dataset.numberOfElements&&this.$target[0].dataset.numberOfElementsSmallDevices){this.renderedContent=core.qweb.render(this.template_key,this._getQWebRenderOptions());}else{this.renderedContent='';}},_getQWebRenderOptions:function(){return{chunkSize:parseInt(config.device.isMobile?this.$target[0].dataset.numberOfElementsSmallDevices:this.$target[0].dataset.numberOfElements),data:this.data,uniqueId:this.uniqueId};},_render:function(){if(this.data.length){this._prepareContent();}else{this.renderedContent='';}
this._renderContent();},_renderContent:function(){this.$el.find('.dynamic_snippet_template').html(this.renderedContent);},_setupSizeChangedManagement:function(enable){if(enable===true){config.device.bus.on('size_changed',this,this._onSizeChanged);}else{config.device.bus.off('size_changed',this,this._onSizeChanged);}},_toggleVisibility:function(visible){this.$el.toggleClass('d-none',!visible);},_onCallToAction:function(ev){window.location=$(ev.currentTarget).attr('data-url');},_onSizeChanged:function(size){if(this.isDesplayedAsMobile!==config.device.isMobile){this.isDesplayedAsMobile=config.device.isMobile;this._render();}},});publicWidget.registry.dynamic_snippet=DynamicSnippet;return DynamicSnippet;});;

/* /website/static/src/snippets/s_dynamic_snippet_carousel/000.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website.s_dynamic_snippet_carousel',function(require){'use strict';const config=require('web.config');const core=require('web.core');const publicWidget=require('web.public.widget');const DynamicSnippet=require('website.s_dynamic_snippet');const DynamicSnippetCarousel=DynamicSnippet.extend({selector:'.s_dynamic_snippet_carousel',xmlDependencies:(DynamicSnippet.prototype.xmlDependencies||[]).concat(['/website/static/src/snippets/s_dynamic_snippet_carousel/000.xml']),init:function(){this._super.apply(this,arguments);this.template_key='website.s_dynamic_snippet.carousel';},_getQWebRenderParams:function(){return Object.assign(this._super.apply(this,arguments),{interval:parseInt(this.$target[0].dataset.carouselInterval),},);},});publicWidget.registry.dynamic_snippet_carousel=DynamicSnippetCarousel;return DynamicSnippetCarousel;});;

/* /website_sale/static/src/snippets/s_dynamic_snippet_products/000.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.s_dynamic_snippet_products',function(require){'use strict';const config=require('web.config');const core=require('web.core');const publicWidget=require('web.public.widget');const DynamicSnippetCarousel=require('website.s_dynamic_snippet_carousel');const DynamicSnippetProducts=DynamicSnippetCarousel.extend({selector:'.s_dynamic_snippet_products',_isConfigComplete:function(){return this._super.apply(this,arguments)&&this.$el.get(0).dataset.productCategoryId!==undefined;},_mustMessageWarningBeHidden:function(){const isInitialDrop=this.$el.get(0).dataset.templateKey===undefined;return isInitialDrop||this._super.apply(this,arguments);},_getSearchDomain:function(){const searchDomain=this._super.apply(this,arguments);const productCategoryId=parseInt(this.$el.get(0).dataset.productCategoryId);if(productCategoryId>=0){searchDomain.push(['public_categ_ids','child_of',productCategoryId]);}
return searchDomain;},});publicWidget.registry.dynamic_snippet_products=DynamicSnippetProducts;return DynamicSnippetProducts;});;

/* /website_mail/static/src/js/follow.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_mail.follow',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.follow=publicWidget.Widget.extend({selector:'#wrapwrap:has(.js_follow)',disabledInEditableMode:false,start:function(){var self=this;this.isUser=false;var $jsFollowEls=this.$el.find('.js_follow');var always=function(data){self.isUser=data[0].is_user;const $jsFollowToEnable=$jsFollowEls.filter(function(){const model=this.dataset.object;return model in data[1]&&data[1][model].includes(parseInt(this.dataset.id));});self._toggleSubscription(true,data[0].email,$jsFollowToEnable);self._toggleSubscription(false,data[0].email,$jsFollowEls.not($jsFollowToEnable));$jsFollowEls.removeClass('d-none');};const records={};for(const el of $jsFollowEls){const model=el.dataset.object;if(!(model in records)){records[model]=[];}
records[model].push(parseInt(el.dataset.id));}
this._rpc({route:'/website_mail/is_follower',params:{records:records,},}).then(always).guardedCatch(always);if(!this.editableMode){$('.js_follow > .input-group-append.d-none').removeClass('d-none');this.$target.find('.js_follow_btn, .js_unfollow_btn').on('click',function(event){event.preventDefault();self._onClick(event);});}
return this._super.apply(this,arguments);},_toggleSubscription:function(follow,email,$jsFollowEls){if(follow){this._updateSubscriptionDOM(follow,email,$jsFollowEls);}else{for(const el of $jsFollowEls){const follow=!email&&el.getAttribute('data-unsubscribe');this._updateSubscriptionDOM(follow,email,$(el));}}},_updateSubscriptionDOM:function(follow,email,$jsFollowEls){$jsFollowEls.find('input.js_follow_email').val(email||"").attr("disabled",email&&(follow||this.isUser)?"disabled":false);$jsFollowEls.attr("data-follow",follow?'on':'off');},_onClick:function(ev){var self=this;var $jsFollow=$(ev.currentTarget).closest('.js_follow');var $email=$jsFollow.find(".js_follow_email");if($email.length&&!$email.val().match(/.+@.+/)){$jsFollow.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');return false;}
$jsFollow.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');var email=$email.length?$email.val():false;if(email||this.isUser){this._rpc({route:'/website_mail/follow',params:{'id':+$jsFollow.data('id'),'object':$jsFollow.data('object'),'message_is_follower':$jsFollow.attr("data-follow")||"off",'email':email,},}).then(function(follow){self._toggleSubscription(follow,email,$jsFollow);});}},});});;

/* /website_form/static/src/snippets/s_website_form/000.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_form.s_website_form',function(require){'use strict';var core=require('web.core');var time=require('web.time');const{ReCaptcha}=require('google_recaptcha.ReCaptchaV3');var ajax=require('web.ajax');var publicWidget=require('web.public.widget');const dom=require('web.dom');var _t=core._t;var qweb=core.qweb;publicWidget.registry.s_website_form=publicWidget.Widget.extend({selector:'.s_website_form form, form.s_website_form',xmlDependencies:['/website_form/static/src/xml/website_form.xml'],events:{'click .s_website_form_send, .o_website_form_send':'send',},init:function(){this._super(...arguments);this._recaptcha=new ReCaptcha();this.__started=new Promise(resolve=>this.__startResolve=resolve);},willStart:function(){const res=this._super(...arguments);if(!this.$target[0].classList.contains('s_website_form_no_recaptcha')){this._recaptchaLoaded=true;this._recaptcha.loadLibs();}
return res;},start:function(){var self=this;var datepickers_options={minDate:moment({y:1000}),maxDate:moment({y:9999,M:11,d:31}),calendarWeeks:true,icons:{time:'fa fa-clock-o',date:'fa fa-calendar',next:'fa fa-chevron-right',previous:'fa fa-chevron-left',up:'fa fa-chevron-up',down:'fa fa-chevron-down',},locale:moment.locale(),format:time.getLangDatetimeFormat(),};this.$target.find('.s_website_form_datetime, .o_website_form_datetime').datetimepicker(datepickers_options);datepickers_options.format=time.getLangDateFormat();this.$target.find('.s_website_form_date, .o_website_form_date').datetimepicker(datepickers_options);var $values=$('[data-for='+this.$target.attr('id')+']');if($values.length){var values=JSON.parse($values.data('values').replace('False','""').replace('None','""').replace(/'/g,'"'));var fields=_.pluck(this.$target.serializeArray(),'name');_.each(fields,function(field){if(_.has(values,field)){var $field=self.$target.find('input[name="'+field+'"], textarea[name="'+field+'"]');if(!$field.val()){$field.val(values[field]);$field.data('website_form_original_default_value',$field.val());}}});}
return this._super(...arguments).then(()=>this.__startResolve());},destroy:function(){this._super.apply(this,arguments);this.$target.find('button').off('click');this.$target[0].reset();this.$target.find('.o_has_error').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');this.$target.find('#s_website_form_result, #o_website_form_result').empty();this.$target.removeClass('d-none');this.$target.parent().find('.s_website_form_end_message').addClass('d-none');},send:async function(e){e.preventDefault();this.$target.find('.s_website_form_send, .o_website_form_send').addClass('disabled').attr('disabled','disabled');var self=this;self.$target.find('#s_website_form_result, #o_website_form_result').empty();if(!self.check_error_fields({})){self.update_status('error',_t("Please fill in the form correctly."));return false;}
this.form_fields=this.$target.serializeArray();$.each(this.$target.find('input[type=file]'),function(outer_index,input){$.each($(input).prop('files'),function(index,file){self.form_fields.push({name:input.name+'['+outer_index+']['+index+']',value:file});});});var form_values={};_.each(this.form_fields,function(input){if(input.name in form_values){if(Array.isArray(form_values[input.name])){form_values[input.name].push(input.value);}else{form_values[input.name]=[form_values[input.name],input.value];}}else{if(input.value!==''){form_values[input.name]=input.value;}}});this.$target.find('.s_website_form_field:not(.s_website_form_custom)').find('.s_website_form_date, .s_website_form_datetime').each(function(){var date=$(this).datetimepicker('viewDate').clone().locale('en');var format='YYYY-MM-DD';if($(this).hasClass('s_website_form_datetime')){date=date.utc();format='YYYY-MM-DD HH:mm:ss';}
form_values[$(this).find('input').attr('name')]=date.format(format);});if(this._recaptchaLoaded){const tokenObj=await this._recaptcha.getToken('website_form');if(tokenObj.token){form_values['recaptcha_token_response']=tokenObj.token;}else if(tokenObj.error){self.update_status('error',tokenObj.error);return false;}}
ajax.post(this.$target.attr('action')+(this.$target.data('force_action')||this.$target.data('model_name')),form_values).then(function(result_data){self.$target.find('.s_website_form_send, .o_website_form_send').removeAttr('disabled').removeClass('disabled');result_data=JSON.parse(result_data);if(!result_data.id){self.update_status('error',result_data.error?result_data.error:false);if(result_data.error_fields){self.check_error_fields(result_data.error_fields);}}else{let successMode=self.$target[0].dataset.successMode;let successPage=self.$target[0].dataset.successPage;if(!successMode){successPage=self.$target.attr('data-success_page');successMode=successPage?'redirect':'nothing';}
switch(successMode){case'redirect':if(successPage.charAt(0)==="#"){dom.scrollTo($(successPage)[0],{duration:500,extraOffset:0,});}else{$(window.location).attr('href',successPage);}
break;case'message':self.$target[0].classList.add('d-none');self.$target[0].parentElement.querySelector('.s_website_form_end_message').classList.remove('d-none');break;default:self.update_status('success');break;}
self.$target[0].reset();}}).guardedCatch(function(){self.update_status('error');});},check_error_fields:function(error_fields){var self=this;var form_valid=true;this.$target.find('.form-field, .s_website_form_field').each(function(k,field){var $field=$(field);var field_name=$field.find('.col-form-label').attr('for');var inputs=$field.find('.s_website_form_input, .o_website_form_input').not('#editable_select');var invalid_inputs=inputs.toArray().filter(function(input,k,inputs){if(input.required&&input.type==='checkbox'){var checkboxes=_.filter(inputs,function(input){return input.required&&input.type==='checkbox';});return!_.any(checkboxes,checkbox=>checkbox.checked);}else if($(input).hasClass('s_website_form_date')||$(input).hasClass('o_website_form_date')){if(!self.is_datetime_valid(input.value,'date')){return true;}}else if($(input).hasClass('s_website_form_datetime')||$(input).hasClass('o_website_form_datetime')){if(!self.is_datetime_valid(input.value,'datetime')){return true;}}
return!input.checkValidity();});$field.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');if(invalid_inputs.length||error_fields[field_name]){$field.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');if(_.isString(error_fields[field_name])){$field.popover({content:error_fields[field_name],trigger:'hover',container:'body',placement:'top'});$field.data("bs.popover").config.content=error_fields[field_name];$field.popover('show');}
form_valid=false;}});return form_valid;},is_datetime_valid:function(value,type_of_date){if(value===""){return true;}else{try{this.parse_date(value,type_of_date);return true;}catch(e){return false;}}},parse_date:function(value,type_of_date,value_if_empty){var date_pattern=time.getLangDateFormat(),time_pattern=time.getLangTimeFormat();var date_pattern_wo_zero=date_pattern.replace('MM','M').replace('DD','D'),time_pattern_wo_zero=time_pattern.replace('HH','H').replace('mm','m').replace('ss','s');switch(type_of_date){case'datetime':var datetime=moment(value,[date_pattern+' '+time_pattern,date_pattern_wo_zero+' '+time_pattern_wo_zero],true);if(datetime.isValid()){return time.datetime_to_str(datetime.toDate());}
throw new Error(_.str.sprintf(_t("'%s' is not a correct datetime"),value));case'date':var date=moment(value,[date_pattern,date_pattern_wo_zero],true);if(date.isValid()){return time.date_to_str(date.toDate());}
throw new Error(_.str.sprintf(_t("'%s' is not a correct date"),value));}
return value;},update_status:function(status,message){if(status!=='success'){this.$target.find('.s_website_form_send, .o_website_form_send').removeAttr('disabled').removeClass('disabled');}
var $result=this.$('#s_website_form_result, #o_website_form_result');if(status==='error'&&!message){message=_t("An error has occured, the form has not been sent.");}
this.__started.then(()=>$result.replaceWith(qweb.render(`website_form.status_${status}`,{message:message,})));},});});;

/* /website_blog/static/src/js/contentshare.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_blog.contentshare',function(require){'use strict';const dom=require('web.dom');$.fn.share=function(options){var option=$.extend($.fn.share.defaults,options);var selected_text="";$.extend($.fn.share,{init:function(shareable){var self=this;$.fn.share.defaults.shareable=shareable;$.fn.share.defaults.shareable.on('mouseup',function(){if($(this).parents('body.editor_enable').length===0){self.popOver();}});$.fn.share.defaults.shareable.on('mousedown',function(){self.destroy();});},getContent:function(){var $popover_content=$('<div class="h4 m-0"/>');if($('.o_wblog_title, .o_wblog_post_content_field').hasClass('js_comment')){selected_text=this.getSelection('string');var $btn_c=$('<a class="o_share_comment btn btn-link px-2" href="#"/>').append($('<i class="fa fa-lg fa-comment"/>'));$popover_content.append($btn_c);}
if($('.o_wblog_title, .o_wblog_post_content_field').hasClass('js_tweet')){var tweet='"%s" - %s';var baseLength=tweet.replace(/%s/g,'').length;var selectedText=this.getSelection('string').substring(0,option.maxLength-baseLength-23);var text=window.btoa(encodeURIComponent(_.str.sprintf(tweet,selectedText,window.location.href)));$popover_content.append(_.str.sprintf("<a onclick=\"window.open('%s' + atob('%s'), '_%s','location=yes,height=570,width=520,scrollbars=yes,status=yes')\"><i class=\"ml4 mr4 fa fa-twitter fa-lg\"/></a>",option.shareLink,text,option.target));}
return $popover_content;},commentEdition:function(){$(".o_portal_chatter_composer_form textarea").val('"'+selected_text+'" ').focus();const commentsEl=$('#o_wblog_post_comments')[0];if(commentsEl){dom.scrollTo(commentsEl).then(()=>{window.location.hash='blog_post_comment_quote';});}},getSelection:function(share){if(window.getSelection){var selection=window.getSelection();if(!selection||selection.rangeCount===0){return"";}
if(share==='string'){return String(selection.getRangeAt(0)).replace(/\s{2,}/g,' ');}else{return selection.getRangeAt(0);}}else if(document.selection){if(share==='string'){return document.selection.createRange().text.replace(/\s{2,}/g,' ');}else{return document.selection.createRange();}}},popOver:function(){this.destroy();if(this.getSelection('string').length<option.minLength){return;}
var data=this.getContent();var range=this.getSelection();var newNode=document.createElement("span");range.insertNode(newNode);newNode.className=option.className;var $pop=$(newNode);$pop.popover({trigger:'manual',placement:option.placement,html:true,content:function(){return data;}}).popover('show');$('.o_share_comment').on('click',this.commentEdition);},destroy:function(){var $span=$('span.'+option.className);$span.popover('hide');$span.remove();}});$.fn.share.init(this);};$.fn.share.defaults={shareLink:"http://twitter.com/intent/tweet?text=",minLength:5,maxLength:140,target:"blank",className:"share",placement:"top",};});;

/* /website_blog/static/src/js/website_blog.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_blog.website_blog',function(require){'use strict';var core=require('web.core');const dom=require('web.dom');const publicWidget=require('web.public.widget');publicWidget.registry.websiteBlog=publicWidget.Widget.extend({selector:'.website_blog',events:{'click #o_wblog_next_container':'_onNextBlogClick','click #o_wblog_post_content_jump':'_onContentAnchorClick','click .o_twitter, .o_facebook, .o_linkedin, .o_google, .o_twitter_complete, .o_facebook_complete, .o_linkedin_complete, .o_google_complete':'_onShareArticle',},start:function(){$('.js_tweet, .js_comment').share({});return this._super.apply(this,arguments);},_onNextBlogClick:function(ev){ev.preventDefault();var self=this;var $el=$(ev.currentTarget);var nexInfo=$el.find('#o_wblog_next_post_info').data();$el.find('.o_record_cover_container').addClass(nexInfo.size+' '+nexInfo.text).end().find('.o_wblog_toggle').toggleClass('d-none');const placeholder=document.createElement('div');placeholder.style.minHeight='100vh';this.$('#o_wblog_next_container').append(placeholder);_.defer(function(){self._forumScrollAction($el,300,function(){window.location.href=nexInfo.url;});});},_onContentAnchorClick:function(ev){ev.preventDefault();ev.stopImmediatePropagation();var $el=$(ev.currentTarget.hash);this._forumScrollAction($el,500,function(){window.location.hash='blog_content';});},_onShareArticle:function(ev){ev.preventDefault();var url='';var $element=$(ev.currentTarget);var blogPostTitle=encodeURIComponent($('#o_wblog_post_name').html()||'');var articleURL=encodeURIComponent(window.location.href);if($element.hasClass('o_twitter')){var twitterText=core._t("Amazing blog article: %s! Check it live: %s");var tweetText=_.string.sprintf(twitterText,blogPostTitle,articleURL);url='https://twitter.com/intent/tweet?tw_p=tweetbutton&text='+tweetText;}else if($element.hasClass('o_facebook')){url='https://www.facebook.com/sharer/sharer.php?u='+articleURL;}else if($element.hasClass('o_linkedin')){url='https://www.linkedin.com/sharing/share-offsite/?url='+articleURL;}
window.open(url,'','menubar=no, width=500, height=400');},_forumScrollAction:function($el,duration,callback){dom.scrollTo($el[0],{duration:duration}).then(()=>callback());},});});;

/* /website_blog/static/src/snippets/s_latest_posts/000.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_blog.s_latest_posts_frontend',function(require){'use strict';var core=require('web.core');var wUtils=require('website.utils');var publicWidget=require('web.public.widget');var _t=core._t;publicWidget.registry.js_get_posts=publicWidget.Widget.extend({selector:'.js_get_posts',disabledInEditableMode:false,start:function(){var self=this;const data=self.$target[0].dataset;const limit=parseInt(data.postsLimit)||4;const blogID=parseInt(data.filterByBlogId);if(data.template&&data.template.endsWith('.s_latest_posts_big_orizontal_template')){data.template='website_blog.s_latest_posts_horizontal_template';}
const template=data.template||'website_blog.s_latest_posts_list_template';const loading=data.loading==='true';const order=data.order||'published_date desc';this.$target.empty();this.$target.attr('contenteditable','False');var domain=[];if(blogID){domain.push(['blog_id','=',blogID]);}
if(order.includes('visits')){domain.push(['visits','!=',false]);}
var prom=new Promise(function(resolve){self._rpc({route:'/blog/render_latest_posts',params:{template:template,domain:domain,limit:limit,order:order,},}).then(function(posts){var $posts=$(posts).filter('.s_latest_posts_post');if(!$posts.length){self.$target.append($('<div/>',{class:'col-md-6 offset-md-3'}).append($('<div/>',{class:'alert alert-warning alert-dismissible text-center',text:_t("No blog post was found. Make sure your posts are published."),})));resolve();}
if(loading){self._showLoading($posts);}else{self.$target.html($posts);}
resolve();}).guardedCatch(function(){if(self.editableMode){self.$target.append($('<p/>',{class:'text-danger',text:_t("An error occured with this latest posts block. If the problem persists, please consider deleting it and adding a new one"),}));}
resolve();});});return Promise.all([this._super.apply(this,arguments),prom]);},destroy:function(){this.$target.empty();this._super.apply(this,arguments);},_showLoading:function($posts){var self=this;_.each($posts,function(post,i){var $post=$(post);var $progress=$post.find('.s_latest_posts_loader');var bgUrl=$post.find('.o_record_cover_image').css('background-image').replace('url(','').replace(')','').replace(/\"/gi,"")||'none';$post.appendTo(self.$target);if(bgUrl==='none'){$post.addClass('s_latest_posts_loader_no_cover');$progress.remove();return;}
$progress.find('> div').removeClass('d-none').css('animation-delay',i*200+'ms');var $dummyImg=$('<img/>',{src:bgUrl});var timer=setTimeout(function(){$post.find('.o_record_cover_image').addClass('bg-200');$progress.remove();},10000);wUtils.onceAllImagesLoaded($dummyImg).then(function(){$progress.fadeOut(500,function(){$progress.removeClass('d-flex');});$dummyImg.remove();clearTimeout(timer);});});},});});;

/* /sale/static/src/js/variant_mixin.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('sale.VariantMixin',function(require){'use strict';var concurrency=require('web.concurrency');var core=require('web.core');var utils=require('web.utils');var ajax=require('web.ajax');var _t=core._t;var VariantMixin={events:{'change .css_attribute_color input':'_onChangeColorAttribute','change .main_product:not(.in_cart) input.js_quantity':'onChangeAddQuantity','change [data-attribute_exclusions]':'onChangeVariant'},onChangeVariant:function(ev){var $parent=$(ev.target).closest('.js_product');if(!$parent.data('uniqueId')){$parent.data('uniqueId',_.uniqueId());}
this._throttledGetCombinationInfo($parent.data('uniqueId'))(ev);},_getCombinationInfo:function(ev){var self=this;if($(ev.target).hasClass('variant_custom_value')){return Promise.resolve();}
var $parent=$(ev.target).closest('.js_product');var qty=$parent.find('input[name="add_qty"]').val();var combination=this.getSelectedVariantValues($parent);var parentCombination=$parent.find('ul[data-attribute_exclusions]').data('attribute_exclusions').parent_combination;var productTemplateId=parseInt($parent.find('.product_template_id').val());self._checkExclusions($parent,combination);return ajax.jsonRpc(this._getUri('/sale/get_combination_info'),'call',{'product_template_id':productTemplateId,'product_id':this._getProductId($parent),'combination':combination,'add_qty':parseInt(qty),'pricelist_id':this.pricelistId||false,'parent_combination':parentCombination,}).then(function(combinationData){self._onChangeCombination(ev,$parent,combinationData);});},handleCustomValues:function($target){var $variantContainer;var $customInput=false;if($target.is('input[type=radio]')&&$target.is(':checked')){$variantContainer=$target.closest('ul').closest('li');$customInput=$target;}else if($target.is('select')){$variantContainer=$target.closest('li');$customInput=$target.find('option[value="'+$target.val()+'"]');}
if($variantContainer){if($customInput&&$customInput.data('is_custom')==='True'){var attributeValueId=$customInput.data('value_id');var attributeValueName=$customInput.data('value_name');if($variantContainer.find('.variant_custom_value').length===0||$variantContainer.find('.variant_custom_value').data('custom_product_template_attribute_value_id')!==parseInt(attributeValueId)){$variantContainer.find('.variant_custom_value').remove();var $input=$('<input>',{type:'text','data-custom_product_template_attribute_value_id':attributeValueId,'data-attribute_value_name':attributeValueName,class:'variant_custom_value form-control'});var isRadioInput=$target.is('input[type=radio]')&&$target.closest('label.css_attribute_color').length===0;if(isRadioInput&&$customInput.data('is_single_and_custom')!=='True'){$input.addClass('custom_value_radio');$target.closest('div').after($input);}else{$input.attr('placeholder',attributeValueName);$input.addClass('custom_value_own_line');$variantContainer.append($input);}}}else{$variantContainer.find('.variant_custom_value').remove();}}},onClickAddCartJSON:function(ev){ev.preventDefault();var $link=$(ev.currentTarget);var $input=$link.closest('.input-group').find("input");var min=parseFloat($input.data("min")||0);var max=parseFloat($input.data("max")||Infinity);var previousQty=parseFloat($input.val()||0,10);var quantity=($link.has(".fa-minus").length?-1:1)+previousQty;var newQty=quantity>min?(quantity<max?quantity:max):min;if(newQty!==previousQty){$input.val(newQty).trigger('change');}
return false;},onChangeAddQuantity:function(ev){var $parent;if($(ev.currentTarget).closest('.oe_optional_products_modal').length>0){$parent=$(ev.currentTarget).closest('.oe_optional_products_modal');}else if($(ev.currentTarget).closest('form').length>0){$parent=$(ev.currentTarget).closest('form');}else{$parent=$(ev.currentTarget).closest('.o_product_configurator');}
this.triggerVariantChange($parent);},triggerVariantChange:function($container){var self=this;$container.find('ul[data-attribute_exclusions]').trigger('change');$container.find('input.js_variant_change:checked, select.js_variant_change').each(function(){self.handleCustomValues($(this));});},getCustomVariantValues:function($container){var variantCustomValues=[];$container.find('.variant_custom_value').each(function(){var $variantCustomValueInput=$(this);if($variantCustomValueInput.length!==0){variantCustomValues.push({'custom_product_template_attribute_value_id':$variantCustomValueInput.data('custom_product_template_attribute_value_id'),'attribute_value_name':$variantCustomValueInput.data('attribute_value_name'),'custom_value':$variantCustomValueInput.val(),});}});return variantCustomValues;},getNoVariantAttributeValues:function($container){var noVariantAttributeValues=[];var variantsValuesSelectors=['input.no_variant.js_variant_change:checked','select.no_variant.js_variant_change'];$container.find(variantsValuesSelectors.join(',')).each(function(){var $variantValueInput=$(this);var singleNoCustom=$variantValueInput.data('is_single')&&!$variantValueInput.data('is_custom');if($variantValueInput.is('select')){$variantValueInput=$variantValueInput.find('option[value='+$variantValueInput.val()+']');}
if($variantValueInput.length!==0&&!singleNoCustom){noVariantAttributeValues.push({'custom_product_template_attribute_value_id':$variantValueInput.data('value_id'),'attribute_value_name':$variantValueInput.data('value_name'),'value':$variantValueInput.val(),'attribute_name':$variantValueInput.data('attribute_name'),'is_custom':$variantValueInput.data('is_custom')});}});return noVariantAttributeValues;},getSelectedVariantValues:function($container){var values=[];var unchangedValues=$container.find('div.oe_unchanged_value_ids').data('unchanged_value_ids')||[];var variantsValuesSelectors=['input.js_variant_change:checked','select.js_variant_change'];_.each($container.find(variantsValuesSelectors.join(', ')),function(el){values.push(+$(el).val());});return values.concat(unchangedValues);},selectOrCreateProduct:function($container,productId,productTemplateId,useAjax){var self=this;productId=parseInt(productId);productTemplateId=parseInt(productTemplateId);var productReady=Promise.resolve();if(productId){productReady=Promise.resolve(productId);}else{var params={product_template_id:productTemplateId,product_template_attribute_value_ids:JSON.stringify(self.getSelectedVariantValues($container)),};var route='/sale/create_product_variant';if(useAjax){productReady=ajax.jsonRpc(route,'call',params);}else{productReady=this._rpc({route:route,params:params});}}
return productReady;},_checkExclusions:function($parent,combination){var self=this;var combinationData=$parent.find('ul[data-attribute_exclusions]').data('attribute_exclusions');$parent.find('option, input, label').removeClass('css_not_available').attr('title',function(){return $(this).data('value_name')||'';}).data('excluded-by','');if(combinationData.exclusions){_.each(combination,function(current_ptav){if(combinationData.exclusions.hasOwnProperty(current_ptav)){_.each(combinationData.exclusions[current_ptav],function(excluded_ptav){self._disableInput($parent,excluded_ptav,current_ptav,combinationData.mapped_attribute_names);});}});}
_.each(combinationData.parent_exclusions,function(exclusions,excluded_by){_.each(exclusions,function(ptav){self._disableInput($parent,ptav,excluded_by,combinationData.mapped_attribute_names,combinationData.parent_product_name);});});},_getProductId:function($parent){return parseInt($parent.find('.product_id').val());},_disableInput:function($parent,attributeValueId,excludedBy,attributeNames,productName){var $input=$parent.find('option[value='+attributeValueId+'], input[value='+attributeValueId+']');$input.addClass('css_not_available');$input.closest('label').addClass('css_not_available');if(excludedBy&&attributeNames){var $target=$input.is('option')?$input:$input.closest('label').add($input);var excludedByData=[];if($target.data('excluded-by')){excludedByData=JSON.parse($target.data('excluded-by'));}
var excludedByName=attributeNames[excludedBy];if(productName){excludedByName=productName+' ('+excludedByName+')';}
excludedByData.push(excludedByName);$target.attr('title',_.str.sprintf(_t('Not available with %s'),excludedByData.join(', ')));$target.data('excluded-by',JSON.stringify(excludedByData));}},_onChangeCombination:function(ev,$parent,combination){var self=this;var $price=$parent.find(".oe_price:first .oe_currency_value");var $default_price=$parent.find(".oe_default_price:first .oe_currency_value");var $optional_price=$parent.find(".oe_optional:first .oe_currency_value");$price.text(self._priceToStr(combination.price));$default_price.text(self._priceToStr(combination.list_price));var isCombinationPossible=true;if(!_.isUndefined(combination.is_combination_possible)){isCombinationPossible=combination.is_combination_possible;}
this._toggleDisable($parent,isCombinationPossible);if(combination.has_discounted_price){$default_price.closest('.oe_website_sale').addClass("discount");$optional_price.closest('.oe_optional').removeClass('d-none').css('text-decoration','line-through');$default_price.parent().removeClass('d-none');}else{$default_price.closest('.oe_website_sale').removeClass("discount");$optional_price.closest('.oe_optional').addClass('d-none');$default_price.parent().addClass('d-none');}
var rootComponentSelectors=['tr.js_product','.oe_website_sale','.o_product_configurator'];if(!combination.product_id||!this.last_product_id||combination.product_id!==this.last_product_id){this.last_product_id=combination.product_id;self._updateProductImage($parent.closest(rootComponentSelectors.join(', ')),combination.display_image,combination.product_id,combination.product_template_id,combination.carousel,isCombinationPossible);}
$parent.find('.product_id').first().val(combination.product_id||0).trigger('change');$parent.find('.product_display_name').first().text(combination.display_name);$parent.find('.js_raw_price').first().text(combination.price).trigger('change');this.handleCustomValues($(ev.target));},_priceToStr:function(price){var l10n=_t.database.parameters;var precision=2;if($('.decimal_precision').length){precision=parseInt($('.decimal_precision').last().data('precision'));}
var formatted=_.str.sprintf('%.'+precision+'f',price).split('.');formatted[0]=utils.insert_thousand_seps(formatted[0]);return formatted.join(l10n.decimal_point);},_throttledGetCombinationInfo:_.memoize(function(uniqueId){var dropMisordered=new concurrency.DropMisordered();var _getCombinationInfo=_.throttle(this._getCombinationInfo.bind(this),500);return function(ev,params){return dropMisordered.add(_getCombinationInfo(ev,params));};}),_toggleDisable:function($parent,isCombinationPossible){$parent.toggleClass('css_not_available',!isCombinationPossible);},_updateProductImage:function($productContainer,displayImage,productId,productTemplateId){var model=productId?'product.product':'product.template';var modelId=productId||productTemplateId;var imageUrl='/web/image/{0}/{1}/'+(this._productImageField?this._productImageField:'image_1024');var imageSrc=imageUrl.replace("{0}",model).replace("{1}",modelId);var imagesSelectors=['span[data-oe-model^="product."][data-oe-type="image"] img:first','img.product_detail_img','span.variant_image img','img.variant_image',];var $img=$productContainer.find(imagesSelectors.join(', '));if(displayImage){$img.removeClass('invisible').attr('src',imageSrc);}else{$img.addClass('invisible');}},_onChangeColorAttribute:function(ev){var $parent=$(ev.target).closest('.js_product');$parent.find('.css_attribute_color').removeClass("active").filter(':has(input:checked)').addClass("active");},_getUri:function(uri){return uri;}};return VariantMixin;});;

/* /website_sale/static/src/js/variant_mixin.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.VariantMixin',function(require){'use strict';var VariantMixin=require('sale.VariantMixin');VariantMixin._getUri=function(uri){if(this.isWebsite){return uri+'_website';}else{return uri;}};return VariantMixin;});;

/* /website_sale/static/src/js/website_sale.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.cart',function(require){'use strict';var publicWidget=require('web.public.widget');var core=require('web.core');var _t=core._t;var timeout;publicWidget.registry.websiteSaleCartLink=publicWidget.Widget.extend({selector:'#top_menu a[href$="/shop/cart"]',events:{'mouseenter':'_onMouseEnter','mouseleave':'_onMouseLeave','click':'_onClick',},init:function(){this._super.apply(this,arguments);this._popoverRPC=null;},start:function(){this.$el.popover({trigger:'manual',animation:true,html:true,title:function(){return _t("My Cart");},container:'body',placement:'auto',template:'<div class="popover mycart-popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'});return this._super.apply(this,arguments);},_onMouseEnter:function(ev){var self=this;clearTimeout(timeout);$(this.selector).not(ev.currentTarget).popover('hide');timeout=setTimeout(function(){if(!self.$el.is(':hover')||$('.mycart-popover:visible').length){return;}
self._popoverRPC=$.get("/shop/cart",{type:'popover',}).then(function(data){self.$el.data("bs.popover").config.content=data;self.$el.popover("show");$('.popover').on('mouseleave',function(){self.$el.trigger('mouseleave');});});},300);},_onMouseLeave:function(ev){var self=this;setTimeout(function(){if($('.popover:hover').length){return;}
if(!self.$el.is(':hover')){self.$el.popover('hide');}},1000);},_onClick:function(ev){clearTimeout(timeout);if(this._popoverRPC&&this._popoverRPC.state()==='pending'){ev.preventDefault();var href=ev.currentTarget.href;this._popoverRPC.then(function(){window.location.href=href;});}},});});odoo.define('website_sale.website_sale_category',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.websiteSaleCategory=publicWidget.Widget.extend({selector:'#o_shop_collapse_category',events:{'click .fa-chevron-right':'_onOpenClick','click .fa-chevron-down':'_onCloseClick',},_onOpenClick:function(ev){var $fa=$(ev.currentTarget);$fa.parent().siblings().find('.fa-chevron-down:first').click();$fa.parents('li').find('ul:first').show('normal');$fa.toggleClass('fa-chevron-down fa-chevron-right');},_onCloseClick:function(ev){var $fa=$(ev.currentTarget);$fa.parent().find('ul:first').hide('normal');$fa.toggleClass('fa-chevron-down fa-chevron-right');},});});odoo.define('website_sale.website_sale',function(require){'use strict';var core=require('web.core');var config=require('web.config');var publicWidget=require('web.public.widget');var VariantMixin=require('sale.VariantMixin');var wSaleUtils=require('website_sale.utils');const wUtils=require('website.utils');require("web.zoomodoo");publicWidget.registry.WebsiteSale=publicWidget.Widget.extend(VariantMixin,{selector:'.oe_website_sale',events:_.extend({},VariantMixin.events||{},{'change form .js_product:first input[name="add_qty"]':'_onChangeAddQuantity','mouseup .js_publish':'_onMouseupPublish','touchend .js_publish':'_onMouseupPublish','change .oe_cart input.js_quantity[data-product-id]':'_onChangeCartQuantity','click .oe_cart a.js_add_suggested_products':'_onClickSuggestedProduct','click a.js_add_cart_json':'_onClickAddCartJSON','click .a-submit':'_onClickSubmit','change form.js_attributes input, form.js_attributes select':'_onChangeAttribute','mouseup form.js_add_cart_json label':'_onMouseupAddCartLabel','touchend form.js_add_cart_json label':'_onMouseupAddCartLabel','click .show_coupon':'_onClickShowCoupon','submit .o_wsale_products_searchbar_form':'_onSubmitSaleSearch','change select[name="country_id"]':'_onChangeCountry','change #shipping_use_same':'_onChangeShippingUseSame','click .toggle_summary':'_onToggleSummary','click #add_to_cart, #buy_now, #products_grid .o_wsale_product_btn .a-submit':'async _onClickAdd','click input.js_product_change':'onChangeVariant','change .js_main_product [data-attribute_exclusions]':'onChangeVariant','change oe_optional_products_modal [data-attribute_exclusions]':'onChangeVariant',}),init:function(){this._super.apply(this,arguments);this._changeCartQuantity=_.debounce(this._changeCartQuantity.bind(this),500);this._changeCountry=_.debounce(this._changeCountry.bind(this),500);this.isWebsite=true;delete this.events['change .main_product:not(.in_cart) input.js_quantity'];delete this.events['change [data-attribute_exclusions]'];},start(){const def=this._super(...arguments);this._applyHashFromSearch();_.each(this.$('div.js_product'),function(product){$('input.js_product_change',product).first().trigger('change');});this.triggerVariantChange(this.$el);this.$('select[name="country_id"]').change();core.bus.on('resize',this,function(){if(config.device.size_class===config.device.SIZES.XL){$('.toggle_summary_div').addClass('d-none d-xl-block');}});this._startZoom();window.addEventListener('hashchange',()=>{this._applyHash();this.triggerVariantChange(this.$el);});return def;},getSelectedVariantValues:function($container){var combination=$container.find('input.js_product_change:checked').data('combination');if(combination){return combination;}
return VariantMixin.getSelectedVariantValues.apply(this,arguments);},_applyHash:function(){var hash=window.location.hash.substring(1);if(hash){var params=$.deparam(hash);if(params['attr']){var attributeIds=params['attr'].split(',');var $inputs=this.$('input.js_variant_change, select.js_variant_change option');_.each(attributeIds,function(id){var $toSelect=$inputs.filter('[data-value_id="'+id+'"]');if($toSelect.is('input[type="radio"]')){$toSelect.prop('checked',true);}else if($toSelect.is('option')){$toSelect.prop('selected',true);}});this._changeColorAttribute();}}},_setUrlHash:function($parent){var $attributes=$parent.find('input.js_variant_change:checked, select.js_variant_change option:selected');var attributeIds=_.map($attributes,function(elem){return $(elem).data('value_id');});history.replaceState(undefined,undefined,'#attr='+attributeIds.join(','));},_changeColorAttribute:function(){$('.css_attribute_color').removeClass("active").filter(':has(input:checked)').addClass("active");},_changeCartQuantity:function($input,value,$dom_optional,line_id,productIDs){_.each($dom_optional,function(elem){$(elem).find('.js_quantity').text(value);productIDs.push($(elem).find('span[data-product-id]').data('product-id'));});$input.data('update_change',true);this._rpc({route:"/shop/cart/update_json",params:{line_id:line_id,product_id:parseInt($input.data('product-id'),10),set_qty:value},}).then(function(data){$input.data('update_change',false);var check_value=parseInt($input.val()||0,10);if(isNaN(check_value)){check_value=1;}
if(value!==check_value){$input.trigger('change');return;}
if(!data.cart_quantity){return window.location='/shop/cart';}
wSaleUtils.updateCartNavBar(data);$input.val(data.quantity);$('.js_quantity[data-line-id='+line_id+']').val(data.quantity).html(data.quantity);if(data.warning){var cart_alert=$('.oe_cart').parent().find('#data_warning');if(cart_alert.length===0){$('.oe_cart').prepend('<div class="alert alert-danger alert-dismissable" role="alert" id="data_warning">'+'<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button> '+data.warning+'</div>');}
else{cart_alert.html('<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button> '+data.warning);}
$input.val(data.quantity);}});},_changeCountry:function(){if(!$("#country_id").val()){return;}
this._rpc({route:"/shop/country_infos/"+$("#country_id").val(),params:{mode:$("#country_id").attr('mode'),},}).then(function(data){$("input[name='phone']").attr('placeholder',data.phone_code!==0?'+'+data.phone_code:'');var selectStates=$("select[name='state_id']");if(selectStates.data('init')===0||selectStates.find('option').length===1){if(data.states.length||data.state_required){selectStates.html('');_.each(data.states,function(x){var opt=$('<option>').text(x[1]).attr('value',x[0]).attr('data-code',x[2]);selectStates.append(opt);});selectStates.parent('div').show();}else{selectStates.val('').parent('div').hide();}
selectStates.data('init',0);}else{selectStates.data('init',0);}
if(data.fields){if($.inArray('zip',data.fields)>$.inArray('city',data.fields)){$(".div_zip").before($(".div_city"));}else{$(".div_zip").after($(".div_city"));}
var all_fields=["street","zip","city","country_name"];_.each(all_fields,function(field){$(".checkout_autoformat .div_"+field.split('_')[0]).toggle($.inArray(field,data.fields)>=0);});}
if($("label[for='zip']").length){$("label[for='zip']").toggleClass('label-optional',!data.zip_required);$("label[for='zip']").get(0).toggleAttribute('required',!!data.zip_required);}
if($("label[for='zip']").length){$("label[for='state_id']").toggleClass('label-optional',!data.state_required);$("label[for='state_id']").get(0).toggleAttribute('required',!!data.state_required);}});},_getProductId:function($parent){if($parent.find('input.js_product_change').length!==0){return parseInt($parent.find('input.js_product_change:checked').val());}
else{return VariantMixin._getProductId.apply(this,arguments);}},_startZoom:function(){if(!config.device.isMobile){var autoZoom=$('.ecom-zoomable').data('ecom-zoom-auto')||false,attach='#o-carousel-product';_.each($('.ecom-zoomable img[data-zoom]'),function(el){onImageLoaded(el,function(){var $img=$(el);$img.zoomOdoo({event:autoZoom?'mouseenter':'click',attach:attach});$img.attr('data-zoom',1);});});}
function onImageLoaded(img,callback){$(img).on('load',function(){callback();});if(img.complete){callback();}}},_updateProductImage:function($productContainer,displayImage,productId,productTemplateId,newCarousel,isCombinationPossible){var $carousel=$productContainer.find('#o-carousel-product');if(window.location.search.indexOf('enable_editor')===-1){var $newCarousel=$(newCarousel);$carousel.after($newCarousel);$carousel.remove();$carousel=$newCarousel;$carousel.carousel(0);this._startZoom();this.trigger_up('widgets_start_request',{$target:$carousel});}
$carousel.toggleClass('css_not_available',!isCombinationPossible);},_onClickAdd:function(ev){ev.preventDefault();this.isBuyNow=$(ev.currentTarget).attr('id')==='buy_now';return this._handleAdd($(ev.currentTarget).closest('form'));},_handleAdd:function($form){var self=this;this.$form=$form;var productSelector=['input[type="hidden"][name="product_id"]','input[type="radio"][name="product_id"]:checked'];var productReady=this.selectOrCreateProduct($form,parseInt($form.find(productSelector.join(', ')).first().val(),10),$form.find('.product_template_id').val(),false);return productReady.then(function(productId){$form.find(productSelector.join(', ')).val(productId);self.rootProduct={product_id:productId,quantity:parseFloat($form.find('input[name="add_qty"]').val()||1),product_custom_attribute_values:self.getCustomVariantValues($form.find('.js_product')),variant_values:self.getSelectedVariantValues($form.find('.js_product')),no_variant_attribute_values:self.getNoVariantAttributeValues($form.find('.js_product'))};return self._onProductReady();});},_onProductReady:function(){return this._submitForm();},_submitForm:function(){let params=this.rootProduct;params.add_qty=params.quantity;params.product_custom_attribute_values=JSON.stringify(params.product_custom_attribute_values);params.no_variant_attribute_values=JSON.stringify(params.no_variant_attribute_values);if(this.isBuyNow){params.express=true;}
return wUtils.sendRequest('/shop/cart/update',params);},_onClickAddCartJSON:function(ev){this.onClickAddCartJSON(ev);},_onChangeAddQuantity:function(ev){this.onChangeAddQuantity(ev);},_onMouseupPublish:function(ev){$(ev.currentTarget).parents('.thumbnail').toggleClass('disabled');},_onChangeCartQuantity:function(ev){var $input=$(ev.currentTarget);if($input.data('update_change')){return;}
var value=parseInt($input.val()||0,10);if(isNaN(value)){value=1;}
var $dom=$input.closest('tr');var $dom_optional=$dom.nextUntil(':not(.optional_product.info)');var line_id=parseInt($input.data('line-id'),10);var productIDs=[parseInt($input.data('product-id'),10)];this._changeCartQuantity($input,value,$dom_optional,line_id,productIDs);},_onClickSuggestedProduct:function(ev){$(ev.currentTarget).prev('input').val(1).trigger('change');},_onClickSubmit:function(ev,forceSubmit){if($(ev.currentTarget).is('#add_to_cart, #products_grid .a-submit')&&!forceSubmit){return;}
var $aSubmit=$(ev.currentTarget);if(!ev.isDefaultPrevented()&&!$aSubmit.is(".disabled")){ev.preventDefault();$aSubmit.closest('form').submit();}
if($aSubmit.hasClass('a-submit-disable')){$aSubmit.addClass("disabled");}
if($aSubmit.hasClass('a-submit-loading')){var loading='<span class="fa fa-cog fa-spin"/>';var fa_span=$aSubmit.find('span[class*="fa"]');if(fa_span.length){fa_span.replaceWith(loading);}else{$aSubmit.append(loading);}}},_onChangeAttribute:function(ev){if(!ev.isDefaultPrevented()){ev.preventDefault();$(ev.currentTarget).closest("form").submit();}},_onMouseupAddCartLabel:function(ev){var $label=$(ev.currentTarget);var $price=$label.parents("form:first").find(".oe_price .oe_currency_value");if(!$price.data("price")){$price.data("price",parseFloat($price.text()));}
var value=$price.data("price")+parseFloat($label.find(".badge span").text()||0);var dec=value%1;$price.html(value+(dec<0.01?".00":(dec<1?"0":"")));},_onClickShowCoupon:function(ev){$(ev.currentTarget).hide();$('.coupon_form').removeClass('d-none');},_onSubmitSaleSearch:function(ev){if(!this.$('.dropdown_sorty_by').length){return;}
var $this=$(ev.currentTarget);if(!ev.isDefaultPrevented()&&!$this.is(".disabled")){ev.preventDefault();var oldurl=$this.attr('action');oldurl+=(oldurl.indexOf("?")===-1)?"?":"";var search=$this.find('input.search-query');window.location=oldurl+'&'+search.attr('name')+'='+encodeURIComponent(search.val());}},_onChangeCountry:function(ev){if(!this.$('.checkout_autoformat').length){return;}
this._changeCountry();},_onChangeShippingUseSame:function(ev){$('.ship_to_other').toggle(!$(ev.currentTarget).prop('checked'));},_toggleDisable:function($parent,isCombinationPossible){VariantMixin._toggleDisable.apply(this,arguments);$parent.find("#add_to_cart").toggleClass('disabled',!isCombinationPossible);$parent.find("#buy_now").toggleClass('disabled',!isCombinationPossible);},onChangeVariant:function(ev){var $component=$(ev.currentTarget).closest('.js_product');$component.find('input').each(function(){var $el=$(this);$el.attr('checked',$el.is(':checked'));});$component.find('select option').each(function(){var $el=$(this);$el.attr('selected',$el.is(':selected'));});this._setUrlHash($component);return VariantMixin.onChangeVariant.apply(this,arguments);},_onToggleSummary:function(){$('.toggle_summary_div').toggleClass('d-none');$('.toggle_summary_div').removeClass('d-xl-block');},_applyHashFromSearch(){const params=$.deparam(window.location.search.slice(1));if(params.attrib){const dataValueIds=[];for(const attrib of[].concat(params.attrib)){const attribSplit=attrib.split('-');const attribValueSelector=`.js_variant_change[name="ptal-${attribSplit[0]}"][value="${attribSplit[1]}"]`;const attribValue=this.el.querySelector(attribValueSelector);if(attribValue!==null){dataValueIds.push(attribValue.dataset.value_id);}}
if(dataValueIds.length){history.replaceState(undefined,undefined,`#attr=${dataValueIds.join(',')}`);}}
this._applyHash();},});publicWidget.registry.WebsiteSaleLayout=publicWidget.Widget.extend({selector:'.oe_website_sale',disabledInEditableMode:false,events:{'change .o_wsale_apply_layout':'_onApplyShopLayoutChange',},_onApplyShopLayoutChange:function(ev){var switchToList=$(ev.currentTarget).find('.o_wsale_apply_list input').is(':checked');if(!this.editableMode){this._rpc({route:'/shop/save_shop_layout_mode',params:{'layout_mode':switchToList?'list':'grid',},});}
var $grid=this.$('#products_grid');$grid.find('*').css('transition','none');$grid.toggleClass('o_wsale_layout_list',switchToList);void $grid[0].offsetWidth;$grid.find('*').css('transition','');},});publicWidget.registry.websiteSaleCart=publicWidget.Widget.extend({selector:'.oe_website_sale .oe_cart',events:{'click .js_change_shipping':'_onClickChangeShipping','click .js_edit_address':'_onClickEditAddress','click .js_delete_product':'_onClickDeleteProduct',},_onClickChangeShipping:function(ev){var $old=$('.all_shipping').find('.card.border.border-primary');$old.find('.btn-ship').toggle();$old.addClass('js_change_shipping');$old.removeClass('border border-primary');var $new=$(ev.currentTarget).parent('div.one_kanban').find('.card');$new.find('.btn-ship').toggle();$new.removeClass('js_change_shipping');$new.addClass('border border-primary');var $form=$(ev.currentTarget).parent('div.one_kanban').find('form.d-none');$.post($form.attr('action'),$form.serialize()+'&xhr=1');},_onClickEditAddress:function(ev){ev.preventDefault();$(ev.currentTarget).closest('div.one_kanban').find('form.d-none').attr('action','/shop/address').submit();},_onClickDeleteProduct:function(ev){ev.preventDefault();$(ev.currentTarget).closest('tr').find('.js_quantity').val(0).trigger('change');},});});;

/* /website_sale/static/src/js/website_sale_utils.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.utils',function(require){'use strict';function animateClone($cart,$elem,offsetTop,offsetLeft){$cart.find('.o_animate_blink').addClass('o_red_highlight o_shadow_animation').delay(500).queue(function(){$(this).removeClass("o_shadow_animation").dequeue();}).delay(2000).queue(function(){$(this).removeClass("o_red_highlight").dequeue();});return new Promise(function(resolve,reject){var $imgtodrag=$elem.find('img').eq(0);if($imgtodrag.length){var $imgclone=$imgtodrag.clone().offset({top:$imgtodrag.offset().top,left:$imgtodrag.offset().left}).addClass('o_website_sale_animate').appendTo(document.body).animate({top:$cart.offset().top+offsetTop,left:$cart.offset().left+offsetLeft,width:75,height:75,},1000,'easeInOutExpo');$imgclone.animate({width:0,height:0,},function(){resolve();$(this).detach();});}else{resolve();}});}
function updateCartNavBar(data){var $qtyNavBar=$(".my_cart_quantity");_.each($qtyNavBar,function(qty){var $qty=$(qty);$qty.parents('li:first').removeClass('d-none');$qty.html(data.cart_quantity).hide().fadeIn(600);});$(".js_cart_lines").first().before(data['website_sale.cart_lines']).end().remove();$(".js_cart_summary").first().before(data['website_sale.short_cart_summary']).end().remove();}
return{animateClone:animateClone,updateCartNavBar:updateCartNavBar,};});;

/* /website_sale/static/src/js/website_sale_payment.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.payment',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.WebsiteSalePayment=publicWidget.Widget.extend({selector:'#wrapwrap:has(#checkbox_cgv)',events:{'change #checkbox_cgv':'_onCGVCheckboxClick',},start:function(){this.$checkbox=this.$('#checkbox_cgv');this.$payButton=$('button#o_payment_form_pay');this.$checkbox.trigger('change');return this._super.apply(this,arguments);},_adaptPayButton:function(){var disabledReasons=this.$payButton.data('disabled_reasons')||{};disabledReasons.cgv=!this.$checkbox.prop('checked');this.$payButton.data('disabled_reasons',disabledReasons);this.$payButton.prop('disabled',_.contains(disabledReasons,true));},_onCGVCheckboxClick:function(){this._adaptPayButton();},});});;

/* /website_sale/static/src/js/website_sale_validate.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.validate',function(require){'use strict';var publicWidget=require('web.public.widget');var core=require('web.core');var _t=core._t;publicWidget.registry.websiteSaleValidate=publicWidget.Widget.extend({selector:'div.oe_website_sale_tx_status[data-order-id]',start:function(){var def=this._super.apply(this,arguments);this._poll_nbr=0;this._paymentTransationPollStatus();return def;},_paymentTransationPollStatus:function(){var self=this;this._rpc({route:'/shop/payment/get_status/'+parseInt(this.$el.data('order-id')),}).then(function(result){self._poll_nbr+=1;if(result.recall){if(self._poll_nbr<20){setTimeout(function(){self._paymentTransationPollStatus();},Math.ceil(self._poll_nbr/3)*1000);}else{var $message=$(result.message);var $warning=$("<i class='fa fa-warning' style='margin-right:10px;'>");$warning.attr("title",_t("We are waiting for confirmation from the bank or the payment provider"));$message.find('span:first').prepend($warning);result.message=$message.html();}}
self.$el.html(result.message);});},});});;

/* /website_sale/static/src/js/website_sale_recently_viewed.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.recently_viewed',function(require){var concurrency=require('web.concurrency');var config=require('web.config');var core=require('web.core');var publicWidget=require('web.public.widget');var utils=require('web.utils');var wSaleUtils=require('website_sale.utils');var qweb=core.qweb;publicWidget.registry.productsRecentlyViewedSnippet=publicWidget.Widget.extend({selector:'.s_wsale_products_recently_viewed',xmlDependencies:['/website_sale/static/src/xml/website_sale_recently_viewed.xml'],disabledInEditableMode:false,read_events:{'click .js_add_cart':'_onAddToCart','click .js_remove':'_onRemove',},init:function(){this._super.apply(this,arguments);this._dp=new concurrency.DropPrevious();this.uniqueId=_.uniqueId('o_carousel_recently_viewed_products_');this._onResizeChange=_.debounce(this._addCarousel,100);},start:function(){this._dp.add(this._fetch()).then(this._render.bind(this));$(window).resize(()=>{this._onResizeChange();});return this._super.apply(this,arguments);},destroy:function(){this._super(...arguments);this.$el.addClass('d-none');this.$el.find('.slider').html('');},_fetch:function(){return this._rpc({route:'/shop/products/recently_viewed',}).then(res=>{var products=res['products'];if(this.editableMode&&(!products||!products.length)){return{'products':[{id:0,website_url:'#',display_name:'Product 1',price:'$ <span class="oe_currency_value">750.00</span>',},{id:0,website_url:'#',display_name:'Product 2',price:'$ <span class="oe_currency_value">750.00</span>',},{id:0,website_url:'#',display_name:'Product 3',price:'$ <span class="oe_currency_value">750.00</span>',},{id:0,website_url:'#',display_name:'Product 4',price:'$ <span class="oe_currency_value">750.00</span>',}],};}
return res;});},_render:function(res){var products=res['products'];var mobileProducts=[],webProducts=[],productsTemp=[];_.each(products,function(product){if(productsTemp.length===4){webProducts.push(productsTemp);productsTemp=[];}
productsTemp.push(product);mobileProducts.push([product]);});if(productsTemp.length){webProducts.push(productsTemp);}
this.mobileCarousel=$(qweb.render('website_sale.productsRecentlyViewed',{uniqueId:this.uniqueId,productFrame:1,productsGroups:mobileProducts,}));this.webCarousel=$(qweb.render('website_sale.productsRecentlyViewed',{uniqueId:this.uniqueId,productFrame:4,productsGroups:webProducts,}));this._addCarousel();this.$el.toggleClass('d-none',!(products&&products.length));},_addCarousel:function(){var carousel=config.device.size_class<=config.device.SIZES.SM?this.mobileCarousel:this.webCarousel;this.$('.slider').html(carousel).css('display','');},_onAddToCart:function(ev){var self=this;var $card=$(ev.currentTarget).closest('.card');this._rpc({route:"/shop/cart/update_json",params:{product_id:$card.find('input[data-product-id]').data('product-id'),add_qty:1},}).then(function(data){wSaleUtils.updateCartNavBar(data);var $navButton=$('header .o_wsale_my_cart').first();var fetch=self._fetch();var animation=wSaleUtils.animateClone($navButton,$(ev.currentTarget).parents('.o_carousel_product_card'),25,40);Promise.all([fetch,animation]).then(function(values){self._render(values[0]);});});},_onRemove:function(ev){var self=this;var $card=$(ev.currentTarget).closest('.card');this._rpc({route:"/shop/products/recently_viewed_delete",params:{product_id:$card.find('input[data-product-id]').data('product-id'),},}).then(function(data){self._render(data);});},});publicWidget.registry.productsRecentlyViewedUpdate=publicWidget.Widget.extend({selector:'#product_detail',events:{'change input.product_id[name="product_id"]':'_onProductChange',},debounceValue:8000,init:function(){this._super.apply(this,arguments);this._onProductChange=_.debounce(this._onProductChange,this.debounceValue);},_updateProductView:function($input){var productId=parseInt($input.val());var cookieName='seen_product_id_'+productId;if(!parseInt(this.el.dataset.viewTrack,10)){return;}
if(utils.get_cookie(cookieName)){return;}
if($(this.el).find('.js_product.css_not_available').length){return;}
this._rpc({route:'/shop/products/recently_viewed_update',params:{product_id:productId,}}).then(function(res){if(res&&res.visitor_uuid){utils.set_cookie('visitor_uuid',res.visitor_uuid);}
utils.set_cookie(cookieName,productId,30*60);});},_onProductChange:function(ev){this._updateProductView($(ev.currentTarget));},});});;

/* /website_sale/static/src/js/website_sale_tracking.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.tracking',function(require){var publicWidget=require('web.public.widget');publicWidget.registry.websiteSaleTracking=publicWidget.Widget.extend({selector:'.oe_website_sale',events:{'click form[action="/shop/cart/update"] a.a-submit':'_onAddProductIntoCart','click a[href="/shop/checkout"]':'_onCheckoutStart','click div.oe_cart a[href^="/web?redirect"][href$="/shop/checkout"]':'_onCustomerSignin','click form[action="/shop/confirm_order"] a.a-submit':'_onOrder','click form[target="_self"] button[type=submit]':'_onOrderPayment',},start:function(){var self=this;if(this.$el.is('#product_detail')){var productID=this.$('input[name="product_id"]').attr('value');this._vpv('/stats/ecom/product_view/'+productID);}
if(this.$('div.oe_website_sale_tx_status').length){this._trackGA('require','ecommerce');var orderID=this.$('div.oe_website_sale_tx_status').data('order-id');this._vpv('/stats/ecom/order_confirmed/'+orderID);this._rpc({route:'/shop/tracking_last_order/',}).then(function(o){self._trackGA('ecommerce:clear');if(o.transaction&&o.lines){self._trackGA('ecommerce:addTransaction',o.transaction);_.forEach(o.lines,function(line){self._trackGA('ecommerce:addItem',line);});}
self._trackGA('ecommerce:send');});}
return this._super.apply(this,arguments);},_trackGA:function(){var websiteGA=window.ga||function(){};websiteGA.apply(this,arguments);},_vpv:function(page){this._trackGA('send','pageview',{'page':page,'title':document.title,});},_onAddProductIntoCart:function(){var productID=this.$('input[name="product_id"]').attr('value');this._vpv('/stats/ecom/product_add_to_cart/'+productID);},_onCheckoutStart:function(){this._vpv('/stats/ecom/customer_checkout');},_onCustomerSignin:function(){this._vpv('/stats/ecom/customer_signin');},_onOrder:function(){if($('#top_menu [href="/web/login"]').length){this._vpv('/stats/ecom/customer_signup');}
this._vpv('/stats/ecom/order_checkout');},_onOrderPayment:function(){var method=$('#payment_method input[name=acquirer]:checked').nextAll('span:first').text();this._vpv('/stats/ecom/order_payment/'+method);},});});;

/* /website_sale/static/src/snippets/s_products_searchbar/000.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale.s_products_searchbar',function(require){'use strict';const concurrency=require('web.concurrency');const publicWidget=require('web.public.widget');const{qweb}=require('web.core');publicWidget.registry.productsSearchBar=publicWidget.Widget.extend({selector:'.o_wsale_products_searchbar_form',xmlDependencies:['/website_sale/static/src/xml/website_sale_utils.xml'],events:{'input .search-query':'_onInput','focusout':'_onFocusOut','keydown .search-query':'_onKeydown',},autocompleteMinWidth:300,init:function(){this._super.apply(this,arguments);this._dp=new concurrency.DropPrevious();this._onInput=_.debounce(this._onInput,400);this._onFocusOut=_.debounce(this._onFocusOut,100);},start:function(){this.$input=this.$('.search-query');this.order=this.$('.o_wsale_search_order_by').val();this.limit=parseInt(this.$input.data('limit'));this.displayDescription=!!this.$input.data('displayDescription');this.displayPrice=!!this.$input.data('displayPrice');this.displayImage=!!this.$input.data('displayImage');if(this.limit){this.$input.attr('autocomplete','off');}
return this._super.apply(this,arguments);},_fetch:function(){return this._rpc({route:'/shop/products/autocomplete',params:{'term':this.$input.val(),'options':{'order':this.order,'limit':this.limit,'display_description':this.displayDescription,'display_price':this.displayPrice,'max_nb_chars':Math.round(Math.max(this.autocompleteMinWidth,parseInt(this.$el.width()))*0.22),},},});},_render:function(res){var $prevMenu=this.$menu;this.$el.toggleClass('dropdown show',!!res);if(res){var products=res['products'];this.$menu=$(qweb.render('website_sale.productsSearchBar.autocomplete',{products:products,hasMoreProducts:products.length<res['products_count'],currency:res['currency'],widget:this,}));this.$menu.css('min-width',this.autocompleteMinWidth);this.$el.append(this.$menu);}
if($prevMenu){$prevMenu.remove();}},_onInput:function(){if(!this.limit){return;}
this._dp.add(this._fetch()).then(this._render.bind(this));},_onFocusOut:function(){if(!this.$el.has(document.activeElement).length){this._render();}},_onKeydown:function(ev){switch(ev.which){case $.ui.keyCode.ESCAPE:this._render();break;case $.ui.keyCode.UP:case $.ui.keyCode.DOWN:ev.preventDefault();if(this.$menu){let $element=ev.which===$.ui.keyCode.UP?this.$menu.children().last():this.$menu.children().first();$element.focus();}
break;}},});});;

/* /website_sale_comparison/static/src/js/website_sale_comparison.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale_comparison.comparison',function(require){'use strict';var concurrency=require('web.concurrency');var core=require('web.core');var publicWidget=require('web.public.widget');var utils=require('web.utils');var VariantMixin=require('sale.VariantMixin');var website_sale_utils=require('website_sale.utils');var qweb=core.qweb;var _t=core._t;var ProductComparison=publicWidget.Widget.extend(VariantMixin,{xmlDependencies:['/website_sale_comparison/static/src/xml/comparison.xml'],template:'product_comparison_template',events:{'click .o_product_panel_header':'_onClickPanelHeader',},init:function(){this._super.apply(this,arguments);this.product_data={};this.comparelist_product_ids=JSON.parse(utils.get_cookie('comparelist_product_ids')||'[]');this.product_compare_limit=4;this.guard=new concurrency.Mutex();},start:function(){var self=this;self._loadProducts(this.comparelist_product_ids).then(function(){self._updateContent('hide');});self._updateComparelistView();$('#comparelist .o_product_panel_header').popover({trigger:'manual',animation:true,html:true,title:function(){return _t("Compare Products");},container:'.o_product_feature_panel',placement:'top',template:qweb.render('popover'),content:function(){return $('#comparelist .o_product_panel_content').html();}});$(document.body).on('click.product_comparaison_widget','.comparator-popover .o_comparelist_products .o_remove',function(ev){ev.preventDefault();self._removeFromComparelist(ev);});$(document.body).on('click.product_comparaison_widget','.o_comparelist_remove',function(ev){self._removeFromComparelist(ev);self.guard.exec(function(){var new_link='/shop/compare/?products='+self.comparelist_product_ids.toString();window.location.href=_.isEmpty(self.comparelist_product_ids)?'/shop':new_link;});});return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);$(document.body).off('.product_comparaison_widget');},handleCompareAddition:function($elem){var self=this;if(this.comparelist_product_ids.length<this.product_compare_limit){var productId=$elem.data('product-product-id');if($elem.hasClass('o_add_compare_dyn')){productId=$elem.parent().find('.product_id').val();if(!productId){productId=$elem.parent().find('input:checked').first().val();}}
this.selectOrCreateProduct($elem.closest('form'),productId,$elem.closest('form').find('.product_template_id').val(),false).then(function(productId){productId=parseInt(productId,10)||parseInt($elem.data('product-product-id'),10);if(!productId){return;}
self._addNewProducts(productId).then(function(){website_sale_utils.animateClone($('#comparelist .o_product_panel_header'),$elem.closest('form'),-50,10);});});}else{this.$('.o_comparelist_limit_warning').show();$('#comparelist .o_product_panel_header').popover('show');}},_loadProducts:function(product_ids){var self=this;return this._rpc({route:'/shop/get_product_data',params:{product_ids:product_ids,cookies:JSON.parse(utils.get_cookie('comparelist_product_ids')||'[]'),},}).then(function(data){self.comparelist_product_ids=JSON.parse(data.cookies);delete data.cookies;_.each(data,function(product){self.product_data[product.product.id]=product;});if(product_ids.length>Object.keys(data).length){self._updateCookie();}});},_togglePanel:function(){$('#comparelist .o_product_panel_header').popover('toggle');},_addNewProducts:function(product_id){return this.guard.exec(this._addNewProductsImpl.bind(this,product_id));},_addNewProductsImpl:function(product_id){var self=this;$('.o_product_feature_panel').addClass('d-md-block');if(!_.contains(self.comparelist_product_ids,product_id)){self.comparelist_product_ids.push(product_id);if(_.has(self.product_data,product_id)){self._updateContent();}else{return self._loadProducts([product_id]).then(function(){self._updateContent();self._updateCookie();});}}
self._updateCookie();},_updateContent:function(force){var self=this;this.$('.o_comparelist_products .o_product_row').remove();_.each(this.comparelist_product_ids,function(res){var $template=self.product_data[res].render;self.$('.o_comparelist_products').append($template);});if(force!=='hide'&&(this.comparelist_product_ids.length>1||force==='show')){$('#comparelist .o_product_panel_header').popover('show');}
else{$('#comparelist .o_product_panel_header').popover('hide');}},_removeFromComparelist:function(e){this.guard.exec(this._removeFromComparelistImpl.bind(this,e));},_removeFromComparelistImpl:function(e){var target=$(e.target.closest('.o_comparelist_remove, .o_remove'));this.comparelist_product_ids=_.without(this.comparelist_product_ids,target.data('product_product_id'));target.parents('.o_product_row').remove();this._updateCookie();$('.o_comparelist_limit_warning').hide();this._updateContent('show');},_updateCookie:function(){document.cookie='comparelist_product_ids='+JSON.stringify(this.comparelist_product_ids)+'; path=/';this._updateComparelistView();},_updateComparelistView:function(){this.$('.o_product_circle').text(this.comparelist_product_ids.length);this.$('.o_comparelist_button').removeClass('d-md-block');if(_.isEmpty(this.comparelist_product_ids)){$('.o_product_feature_panel').removeClass('d-md-block');}else{$('.o_product_feature_panel').addClass('d-md-block');this.$('.o_comparelist_products').addClass('d-md-block');if(this.comparelist_product_ids.length>=2){this.$('.o_comparelist_button').addClass('d-md-block');this.$('.o_comparelist_button a').attr('href','/shop/compare/?products='+this.comparelist_product_ids.toString());}}},_onClickPanelHeader:function(){this._togglePanel();},});publicWidget.registry.ProductComparison=publicWidget.Widget.extend({selector:'.oe_website_sale',events:{'click .o_add_compare, .o_add_compare_dyn':'_onClickAddCompare','click #o_comparelist_table tr':'_onClickComparelistTr',},start:function(){var def=this._super.apply(this,arguments);this.productComparison=new ProductComparison(this);return Promise.all([def,this.productComparison.appendTo(this.$el)]);},_onClickAddCompare:function(ev){this.productComparison.handleCompareAddition($(ev.currentTarget));},_onClickComparelistTr:function(ev){var $target=$(ev.currentTarget);$($target.data('target')).children().slideToggle(100);$target.find('.fa-chevron-circle-down, .fa-chevron-circle-right').toggleClass('fa-chevron-circle-down fa-chevron-circle-right');},});return ProductComparison;});;

/* /website_sale_wishlist/static/src/js/website_sale_wishlist.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_sale_wishlist.wishlist',function(require){"use strict";var publicWidget=require('web.public.widget');var wSaleUtils=require('website_sale.utils');var VariantMixin=require('sale.VariantMixin');publicWidget.registry.ProductWishlist=publicWidget.Widget.extend(VariantMixin,{selector:'.oe_website_sale',events:{'click .o_wsale_my_wish':'_onClickMyWish','click .o_add_wishlist, .o_add_wishlist_dyn':'_onClickAddWish','change input.product_id':'_onChangeVariant','change input.js_product_change':'_onChangeProduct','click .wishlist-section .o_wish_rm':'_onClickWishRemove','click .wishlist-section .o_wish_add':'_onClickWishAdd',},init:function(parent){this._super.apply(this,arguments);this.wishlistProductIDs=[];},willStart:function(){var self=this;var def=this._super.apply(this,arguments);var wishDef=$.get('/shop/wishlist',{count:1,}).then(function(res){self.wishlistProductIDs=JSON.parse(res);});return Promise.all([def,wishDef]);},start:function(){var def=this._super.apply(this,arguments);this._updateWishlistView();if(this.$('input.js_product_change').length){this.$('input.js_product_change:checked').first().trigger('change');}else{this.$('input.product_id').first().trigger('change');}
return def;},_addNewProducts:function($el){var self=this;var productID=$el.data('product-product-id');if($el.hasClass('o_add_wishlist_dyn')){productID=$el.parent().find('.product_id').val();if(!productID){productID=$el.parent().find('input:checked').first().val();}
productID=parseInt(productID,10);}
var $form=$el.closest('form');var templateId=$form.find('.product_template_id').val();if(!templateId){templateId=$el.data('product-template-id');}
$el.prop("disabled",true).addClass('disabled');var productReady=this.selectOrCreateProduct($el.closest('form'),productID,templateId,false);productReady.then(function(productId){productId=parseInt(productId,10);if(productId&&!_.contains(self.wishlistProductIDs,productId)){return self._rpc({route:'/shop/wishlist/add',params:{product_id:productId,},}).then(function(){var $navButton=$('header .o_wsale_my_wish').first();self.wishlistProductIDs.push(productId);self._updateWishlistView();wSaleUtils.animateClone($navButton,$el.closest('form'),25,40);}).guardedCatch(function(){$el.prop("disabled",false).removeClass('disabled');});}}).guardedCatch(function(){$el.prop("disabled",false).removeClass('disabled');});},_updateWishlistView:function(){const $wishButton=$('.o_wsale_my_wish');if($wishButton.hasClass('o_wsale_my_wish_hide_empty')){$wishButton.toggleClass('d-none',!this.wishlistProductIDs.length);}
$wishButton.find('.my_wish_quantity').text(this.wishlistProductIDs.length);},_removeWish:function(e,deferred_redirect){var tr=$(e.currentTarget).parents('tr');var wish=tr.data('wish-id');var product=tr.data('product-id');var self=this;this._rpc({route:'/shop/wishlist/remove/'+wish,}).then(function(){$(tr).hide();});this.wishlistProductIDs=_.without(this.wishlistProductIDs,product);if(this.wishlistProductIDs.length===0){if(deferred_redirect){deferred_redirect.then(function(){self._redirectNoWish();});}}
this._updateWishlistView();},_addOrMoveWish:function(e){var $navButton=$('header .o_wsale_my_cart').first();var tr=$(e.currentTarget).parents('tr');var product=tr.data('product-id');$('.o_wsale_my_cart').removeClass('d-none');wSaleUtils.animateClone($navButton,tr,25,40);if($('#b2b_wish').is(':checked')){return this._addToCart(product,tr.find('add_qty').val()||1);}else{var adding_deffered=this._addToCart(product,tr.find('add_qty').val()||1);this._removeWish(e,adding_deffered);return adding_deffered;}},_addToCart:function(productID,qty_id){return this._rpc({route:"/shop/cart/update_json",params:{product_id:parseInt(productID,10),add_qty:parseInt(qty_id,10),display:false,},}).then(function(resp){if(resp.warning){if(!$('#data_warning').length){$('.wishlist-section').prepend('<div class="mt16 alert alert-danger alert-dismissable" role="alert" id="data_warning"></div>');}
var cart_alert=$('.wishlist-section').parent().find('#data_warning');cart_alert.html('<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button> '+resp.warning);}
$('.my_cart_quantity').html(resp.cart_quantity||'<i class="fa fa-warning" /> ');});},_redirectNoWish:function(){window.location.href='/shop/cart';},_onClickMyWish:function(){if(this.wishlistProductIDs.length===0){this._updateWishlistView();this._redirectNoWish();return;}
window.location='/shop/wishlist';},_onClickAddWish:function(ev){this._addNewProducts($(ev.currentTarget));},_onChangeVariant:function(ev){var $input=$(ev.target);var $parent=$input.closest('.js_product');var $el=$parent.find("[data-action='o_wishlist']");if(!_.contains(this.wishlistProductIDs,parseInt($input.val(),10))){$el.prop("disabled",false).removeClass('disabled').removeAttr('disabled');}else{$el.prop("disabled",true).addClass('disabled').attr('disabled','disabled');}
$el.data('product-product-id',parseInt($input.val(),10));},_onChangeProduct:function(ev){var productID=ev.currentTarget.value;var $el=$(ev.target).closest('.js_add_cart_variants').find("[data-action='o_wishlist']");if(!_.contains(this.wishlistProductIDs,parseInt(productID,10))){$el.prop("disabled",false).removeClass('disabled').removeAttr('disabled');}else{$el.prop("disabled",true).addClass('disabled').attr('disabled','disabled');}
$el.data('product-product-id',productID);},_onClickWishRemove:function(ev){this._removeWish(ev,false);},_onClickWishAdd:function(ev){var self=this;this.$('.wishlist-section .o_wish_add').addClass('disabled');this._addOrMoveWish(ev).then(function(){self.$('.wishlist-section .o_wish_add').removeClass('disabled');});},});});;

/* /website_animate/static/src/js/o_animate.frontend.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_animate.o_animate_frontend',function(require){'use strict';var publicWidget=require('web.public.widget');var WebsiteAnimate={win:{},items:{},offsetRatio:0.3,offsetMin:10,start:function(){var self=this;self.items=$(".o_animate");self.items.each(function(){var $el=$(this);self.reset_animation($el);});setTimeout(function(){self.attach_handlers();});},attach_handlers:function(){var self=this;var lastScroll=0;$(window).on("resize.o_animate",function(){self.win.h=$(window).height();$(window).trigger("scroll");}).trigger("resize");$().getScrollingElement().on("scroll.o_animate, slid.bs.carousel",(_.throttle(function(){var windowTop=$(window).scrollTop();var windowBottom=windowTop+self.win.h;var direction=(windowTop<lastScroll)?-1:1;lastScroll=windowTop;self.items.each(function(){var $el=$(this);var elHeight=$el.height();var elOffset=direction*Math.max((elHeight*self.offsetRatio),self.offsetMin);var state=$el.css("animation-play-state");var transformMatrix=$el.css('transform').replace(/[^0-9\-.,]/g,'').split(',');var transformOffset=transformMatrix[13]||transformMatrix[5];var elTop=$el.offset().top-transformOffset;var visible=windowBottom>(elTop+elOffset)&&windowTop<(elTop+elHeight-elOffset);if(visible&&(state==="paused")){$el.addClass("o_visible");self.start_animation($el);}else if(!(visible)&&$el.hasClass("o_animate_both_scroll")&&(state==="running")){$el.removeClass("o_visible");self.reset_animation($el);}});},100))).trigger("scroll");},reset_animation:function($el){var anim_name=$el.css("animation-name");$el.css({"animation-name":"dummy-none","animation-play-state":""}).removeClass("o_animated o_animating");setTimeout(function(){$el.css({"animation-name":anim_name,"animation-play-state":"paused"});},0);},start_animation:function($el){setTimeout(function(){$el.css({"animation-play-state":"running"}).addClass("o_animating").one('webkitAnimationEnd oanimationend msAnimationEnd animationend',function(e){$el.addClass("o_animated").removeClass("o_animating");$(window).trigger("resize");});});},};publicWidget.registry.WebsiteAnimate=publicWidget.Widget.extend({selector:'#wrapwrap',disabledInEditableMode:false,start:function(){WebsiteAnimate.start();$(".o_animate").css("visibility","visible");return this._super.apply(this,arguments);},});publicWidget.registry.o_animate=publicWidget.Widget.extend({selector:'.o_animation',destroy:function(){this._super.apply(this,arguments);var old_animation_classes="o_animation o_displayed o_displayed_top o_displayed_middle o_displayed_bottom o_visible o_visible_top o_visible_middle o_visible_bottom";$(".o_fade_in").addClass("o_animate o_anim_fade_in").removeClass("o_fade_in");$(".o_fade_in_down").addClass("o_animate o_anim_fade_in_down").removeClass("o_fade_in_down");$(".o_fade_in_left").addClass("o_animate o_anim_fade_in_left").removeClass("o_fade_in_left");$(".o_fade_in_right").addClass("o_animate o_anim_fade_in_right").removeClass("o_fade_in_right");$(".o_fade_in_up").addClass("o_animate o_anim_fade_in_up").removeClass("o_fade_in_up");this.$target.removeClass(old_animation_classes);},});return WebsiteAnimate;});;

/* /website_links/static/src/js/website_links.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_links.website_links',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var _t=core._t;var SelectBox=publicWidget.Widget.extend({events:{'change':'_onChange',},init:function(parent,obj,placeholder){this._super.apply(this,arguments);this.obj=obj;this.placeholder=placeholder;},willStart:function(){var self=this;var defs=[this._super.apply(this,arguments)];defs.push(this._rpc({model:this.obj,method:'search_read',params:{fields:['id','name'],},}).then(function(result){self.objects=_.map(result,function(val){return{id:val.id,text:val.name};});}));return Promise.all(defs);},start:function(){var self=this;this.$el.select2({placeholder:self.placeholder,allowClear:true,createSearchChoice:function(term){if(self._objectExists(term)){return null;}
return{id:term,text:_.str.sprintf("Create '%s'",term)};},createSearchChoicePosition:'bottom',multiple:false,data:self.objects,minimumInputLength:self.objects.length>100?3:0,});},_objectExists:function(query){return _.find(this.objects,function(val){return val.text.toLowerCase()===query.toLowerCase();})!==undefined;},_createObject:function(name){var self=this;var args={name:name};if(this.obj==="utm.campaign"){args.is_website=true;}
return this._rpc({model:this.obj,method:'create',args:[args],}).then(function(record){self.$el.attr('value',record);self.objects.push({'id':record,'text':name});});},_onChange:function(ev){if(!ev.added||!_.isString(ev.added.id)){return;}
this._createObject(ev.added.id);},});var RecentLinkBox=publicWidget.Widget.extend({template:'website_links.RecentLink',xmlDependencies:['/website_links/static/src/xml/recent_link.xml'],events:{'click .btn_shorten_url_clipboard':'_toggleCopyButton','click .o_website_links_edit_code':'_editCode','click .o_website_links_ok_edit':'_onLinksOkClick','click .o_website_links_cancel_edit':'_onLinksCancelClick','submit #o_website_links_edit_code_form':'_onSubmitCode',},init:function(parent,obj){this._super.apply(this,arguments);this.link_obj=obj;this.animating_copy=false;},start:function(){new ClipboardJS(this.$('.btn_shorten_url_clipboard').get(0));return this._super.apply(this,arguments);},_toggleCopyButton:function(){if(this.animating_copy){return;}
var self=this;this.animating_copy=true;var top=this.$('.o_website_links_short_url').position().top;this.$('.o_website_links_short_url').clone().css('position','absolute').css('left',15).css('top',top-2).css('z-index',2).removeClass('o_website_links_short_url').addClass('animated-link').insertAfter(this.$('.o_website_links_short_url')).animate({opacity:0,top:'-=20',},500,function(){self.$('.animated-link').remove();self.animating_copy=false;});},_notification:function(message){this.$('.notification').append('<strong>'+message+'</strong>');},_editCode:function(){var initCode=this.$('#o_website_links_code').html();this.$('#o_website_links_code').html('<form style="display:inline;" id="o_website_links_edit_code_form"><input type="hidden" id="init_code" value="'+initCode+'"/><input type="text" id="new_code" value="'+initCode+'"/></form>');this.$('.o_website_links_edit_code').hide();this.$('.copy-to-clipboard').hide();this.$('.o_website_links_edit_tools').show();},_cancelEdit:function(){this.$('.o_website_links_edit_code').show();this.$('.copy-to-clipboard').show();this.$('.o_website_links_edit_tools').hide();this.$('.o_website_links_code_error').hide();var oldCode=this.$('#o_website_links_edit_code_form #init_code').val();this.$('#o_website_links_code').html(oldCode);this.$('#code-error').remove();this.$('#o_website_links_code form').remove();},_submitCode:function(){var self=this;var initCode=this.$('#o_website_links_edit_code_form #init_code').val();var newCode=this.$('#o_website_links_edit_code_form #new_code').val();if(newCode===''){self.$('.o_website_links_code_error').html(_t("The code cannot be left empty"));self.$('.o_website_links_code_error').show();return;}
function showNewCode(newCode){self.$('.o_website_links_code_error').html('');self.$('.o_website_links_code_error').hide();self.$('#o_website_links_code form').remove();var host=self.$('#o_website_links_host').html();self.$('#o_website_links_code').html(newCode);self.$('.btn_shorten_url_clipboard').attr('data-clipboard-text',host+newCode);self.$('.o_website_links_edit_code').show();self.$('.copy-to-clipboard').show();self.$('.o_website_links_edit_tools').hide();}
if(initCode===newCode){showNewCode(newCode);}else{this._rpc({route:'/website_links/add_code',params:{init_code:initCode,new_code:newCode,},}).then(function(result){showNewCode(result[0].code);},function(){self.$('.o_website_links_code_error').show();self.$('.o_website_links_code_error').html(_t("This code is already taken"));});}},_onLinksOkClick:function(ev){ev.preventDefault();this._submitCode();},_onLinksCancelClick:function(ev){ev.preventDefault();this._cancelEdit();},_onSubmitCode:function(ev){ev.preventDefault();this._submitCode();},});var RecentLinks=publicWidget.Widget.extend({getRecentLinks:function(filter){var self=this;return this._rpc({route:'/website_links/recent_links',params:{filter:filter,limit:20,},}).then(function(result){_.each(result.reverse(),function(link){self._addLink(link);});self._updateNotification();},function(){var message=_t("Unable to get recent links");self.$el.append('<div class="alert alert-danger">'+message+'</div>');});},_addLink:function(link){var nbLinks=this.getChildren().length;var recentLinkBox=new RecentLinkBox(this,link);recentLinkBox.prependTo(this.$el);$('.link-tooltip').tooltip();if(nbLinks===0){this._updateNotification();}},removeLinks:function(){_.invoke(this.getChildren(),'destroy');},_updateNotification:function(){if(this.getChildren().length===0){var message=_t("You don't have any recent links.");$('.o_website_links_recent_links_notification').html('<div class="alert alert-info">'+message+'</div>');}else{$('.o_website_links_recent_links_notification').empty();}},});publicWidget.registry.websiteLinks=publicWidget.Widget.extend({selector:'.o_website_links_create_tracked_url',events:{'click #filter-newest-links':'_onFilterNewestLinksClick','click #filter-most-clicked-links':'_onFilterMostClickedLinksClick','click #filter-recently-used-links':'_onFilterRecentlyUsedLinksClick','click #generated_tracked_link a':'_onGeneratedTrackedLinkClick','keyup #url':'_onUrlKeyUp','click #btn_shorten_url':'_onShortenUrlButtonClick','submit #o_website_links_link_tracker_form':'_onFormSubmit',},start:function(){var defs=[this._super.apply(this,arguments)];var campaignSelect=new SelectBox(this,'utm.campaign',_t("e.g. Promotion of June, Winter Newsletter, .."));defs.push(campaignSelect.attachTo($('#campaign-select')));var mediumSelect=new SelectBox(this,'utm.medium',_t("e.g. Newsletter, Social Network, .."));defs.push(mediumSelect.attachTo($('#channel-select')));var sourceSelect=new SelectBox(this,'utm.source',_t("e.g. Search Engine, Website page, .."));defs.push(sourceSelect.attachTo($('#source-select')));this.recentLinks=new RecentLinks(this);defs.push(this.recentLinks.appendTo($('#o_website_links_recent_links')));this.recentLinks.getRecentLinks('newest');new ClipboardJS($('#btn_shorten_url').get(0));this.url_copy_animating=false;$('[data-toggle="tooltip"]').tooltip();return Promise.all(defs);},_onFilterNewestLinksClick:function(){this.recentLinks.removeLinks();this.recentLinks.getRecentLinks('newest');},_onFilterMostClickedLinksClick:function(){this.recentLinks.removeLinks();this.recentLinks.getRecentLinks('most-clicked');},_onFilterRecentlyUsedLinksClick:function(){this.recentLinks.removeLinks();this.recentLinks.getRecentLinks('recently-used');},_onGeneratedTrackedLinkClick:function(){$('#generated_tracked_link a').text(_t("Copied")).removeClass('btn-primary').addClass('btn-success');setTimeout(function(){$('#generated_tracked_link a').text(_t("Copy")).removeClass('btn-success').addClass('btn-primary');},5000);},_onUrlKeyUp:function(ev){if(!$('#btn_shorten_url').hasClass('btn-copy')||ev.which===13){return;}
$('#btn_shorten_url').removeClass('btn-success btn-copy').addClass('btn-primary').html('Get tracked link');$('#generated_tracked_link').css('display','none');$('.o_website_links_utm_forms').show();},_onShortenUrlButtonClick:function(){if(!$('#btn_shorten_url').hasClass('btn-copy')||this.url_copy_animating){return;}
var self=this;this.url_copy_animating=true;$('#generated_tracked_link').clone().css('position','absolute').css('left','78px').css('bottom','8px').css('z-index',2).removeClass('#generated_tracked_link').addClass('url-animated-link').appendTo($('#generated_tracked_link')).animate({opacity:0,bottom:'+=20',},500,function(){$('.url-animated-link').remove();self.url_copy_animating=false;});},_onFormSubmit:function(ev){var self=this;ev.preventDefault();if($('#btn_shorten_url').hasClass('btn-copy')){return;}
ev.stopPropagation();var campaignID=$('#campaign-select').attr('value');var mediumID=$('#channel-select').attr('value');var sourceID=$('#source-select').attr('value');var params={};params.url=$('#url').val();if(campaignID!==''){params.campaign_id=parseInt(campaignID);}
if(mediumID!==''){params.medium_id=parseInt(mediumID);}
if(sourceID!==''){params.source_id=parseInt(sourceID);}
$('#btn_shorten_url').text(_t("Generating link..."));this._rpc({route:'/website_links/new',params:params,}).then(function(result){if('error'in result){if(result.error==='empty_url'){$('.notification').html('<div class="alert alert-danger">The URL is empty.</div>');}else if(result.error==='url_not_found'){$('.notification').html('<div class="alert alert-danger">URL not found (404)</div>');}else{$('.notification').html('<div class="alert alert-danger">An error occur while trying to generate your link. Try again later.</div>');}}else{var link=result[0];$('#btn_shorten_url').removeClass('btn-primary').addClass('btn-success btn-copy').html('Copy');$('#btn_shorten_url').attr('data-clipboard-text',link.short_url);$('.notification').html('');$('#generated_tracked_link').html(link.short_url);$('#generated_tracked_link').css('display','inline');self.recentLinks._addLink(link);$('#campaign-select').select2('val','');$('#channel-select').select2('val','');$('#source-select').select2('val','');$('.o_website_links_utm_forms').hide();}});},});return{SelectBox:SelectBox,RecentLinkBox:RecentLinkBox,RecentLinks:RecentLinks,};});;

/* /website_links/static/src/js/website_links_code_editor.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_links.code_editor',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var _t=core._t;publicWidget.registry.websiteLinksCodeEditor=publicWidget.Widget.extend({selector:'#wrapwrap:has(.o_website_links_edit_code)',events:{'click .o_website_links_edit_code':'_onEditCodeClick','click .o_website_links_cancel_edit':'_onCancelEditClick','submit #edit-code-form':'_onEditCodeFormSubmit','click .o_website_links_ok_edit':'_onEditCodeFormSubmit',},_showNewCode:function(newCode){$('.o_website_links_code_error').html('');$('.o_website_links_code_error').hide();$('#o_website_links_code form').remove();var host=$('#short-url-host').html();$('#o_website_links_code').html(newCode);$('.copy-to-clipboard').attr('data-clipboard-text',host+newCode);$('.o_website_links_edit_code').show();$('.copy-to-clipboard').show();$('.o_website_links_edit_tools').hide();},_submitCode:function(){var initCode=$('#edit-code-form #init_code').val();var newCode=$('#edit-code-form #new_code').val();var self=this;if(newCode===''){self.$('.o_website_links_code_error').html(_t("The code cannot be left empty"));self.$('.o_website_links_code_error').show();return;}
this._showNewCode(newCode);if(initCode===newCode){this._showNewCode(newCode);}else{return this._rpc({route:'/website_links/add_code',params:{init_code:initCode,new_code:newCode,},}).then(function(result){self._showNewCode(result[0].code);},function(){$('.o_website_links_code_error').show();$('.o_website_links_code_error').html(_t("This code is already taken"));});}
return Promise.resolve();},_onEditCodeClick:function(){var initCode=$('#o_website_links_code').html();$('#o_website_links_code').html('<form style="display:inline;" id="edit-code-form"><input type="hidden" id="init_code" value="'+initCode+'"/><input type="text" id="new_code" value="'+initCode+'"/></form>');$('.o_website_links_edit_code').hide();$('.copy-to-clipboard').hide();$('.o_website_links_edit_tools').show();},_onCancelEditClick:function(ev){ev.preventDefault();$('.o_website_links_edit_code').show();$('.copy-to-clipboard').show();$('.o_website_links_edit_tools').hide();$('.o_website_links_code_error').hide();var oldCode=$('#edit-code-form #init_code').val();$('#o_website_links_code').html(oldCode);$('#code-error').remove();$('#o_website_links_code form').remove();},_onEditCodeFormSubmit:function(ev){ev.preventDefault();this._submitCode();},});});;

/* /website_links/static/src/js/website_links_charts.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_links.charts',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var _t=core._t;var BarChart=publicWidget.Widget.extend({jsLibs:['/web/static/lib/Chart/Chart.js',],init:function(parent,beginDate,endDate,dates){this._super.apply(this,arguments);this.beginDate=beginDate;this.endDate=endDate;this.number_of_days=this.endDate.diff(this.beginDate,'days')+2;this.dates=dates;},start:function(){var clicksArray=[];var beginDateCopy=this.beginDate;for(var i=0;i<this.number_of_days;i++){var dateKey=beginDateCopy.format('YYYY-MM-DD');clicksArray.push([dateKey,(dateKey in this.dates)?this.dates[dateKey]:0]);beginDateCopy.add(1,'days');}
var nbClicks=0;var data=[];var labels=[];clicksArray.forEach(function(pt){labels.push(pt[0]);nbClicks+=pt[1];data.push(pt[1]);});this.$('.title').html(nbClicks+_t(' clicks'));var config={type:'line',data:{labels:labels,datasets:[{data:data,fill:'start',label:_t('# of clicks'),backgroundColor:'#ebf2f7',borderColor:'#6aa1ca',}],},};var canvas=this.$('canvas')[0];var context=canvas.getContext('2d');new Chart(context,config);},});var PieChart=publicWidget.Widget.extend({jsLibs:['/web/static/lib/Chart/Chart.js',],init:function(parent,data){this._super.apply(this,arguments);this.data=data;},start:function(){var labels=[];var data=[];for(var i=0;i<this.data.length;i++){var countryName=this.data[i]['country_id']?this.data[i]['country_id'][1]:_t('Undefined');labels.push(countryName+' ('+this.data[i]['country_id_count']+')');data.push(this.data[i]['country_id_count']);}
this.$('.title').html(this.data.length+_t(' countries'));var config={type:'pie',data:{labels:labels,datasets:[{data:data,label:this.data.length>0?this.data[0].key:_t('No data'),}]},};var canvas=this.$('canvas')[0];var context=canvas.getContext('2d');new Chart(context,config);},});publicWidget.registry.websiteLinksCharts=publicWidget.Widget.extend({selector:'.o_website_links_chart',events:{'click .graph-tabs li a':'_onGraphTabClick','click .copy-to-clipboard':'_onCopyToClipboardClick',},start:function(){var self=this;this.charts={};var linkID=parseInt($('#link_id').val());this.links_domain=['link_id','=',linkID];var defs=[];defs.push(this._totalClicks());defs.push(this._clicksByDay());defs.push(this._clicksByCountry());defs.push(this._lastWeekClicksByCountry());defs.push(this._lastMonthClicksByCountry());defs.push(this._super.apply(this,arguments));new ClipboardJS($('.copy-to-clipboard')[0]);this.animating_copy=false;return Promise.all(defs).then(function(results){var _totalClicks=results[0];var _clicksByDay=results[1];var _clicksByCountry=results[2];var _lastWeekClicksByCountry=results[3];var _lastMonthClicksByCountry=results[4];if(!_totalClicks){$('#all_time_charts').prepend(_t("There is no data to show"));$('#last_month_charts').prepend(_t("There is no data to show"));$('#last_week_charts').prepend(_t("There is no data to show"));return;}
var formattedClicksByDay={};var beginDate;for(var i=0;i<_clicksByDay.length;i++){var date=moment(_clicksByDay[i]['create_date:day'],'DD MMMM YYYY');if(i===0){beginDate=date;}
formattedClicksByDay[date.format('YYYY-MM-DD')]=_clicksByDay[i]['create_date_count'];}
var now=moment();self.charts.all_time_bar=new BarChart(self,beginDate,now,formattedClicksByDay);self.charts.all_time_bar.attachTo($('#all_time_clicks_chart'));beginDate=moment().subtract(30,'days');self.charts.last_month_bar=new BarChart(self,beginDate,now,formattedClicksByDay);self.charts.last_month_bar.attachTo($('#last_month_clicks_chart'));beginDate=moment().subtract(7,'days');self.charts.last_week_bar=new BarChart(self,beginDate,now,formattedClicksByDay);self.charts.last_week_bar.attachTo($('#last_week_clicks_chart'));self.charts.all_time_pie=new PieChart(self,_clicksByCountry);self.charts.all_time_pie.attachTo($('#all_time_countries_charts'));self.charts.last_month_pie=new PieChart(self,_lastMonthClicksByCountry);self.charts.last_month_pie.attachTo($('#last_month_countries_charts'));self.charts.last_week_pie=new PieChart(self,_lastWeekClicksByCountry);self.charts.last_week_pie.attachTo($('#last_week_countries_charts'));var rowWidth=$('#all_time_countries_charts').parent().width();var $chartCanvas=$('#all_time_countries_charts,last_month_countries_charts,last_week_countries_charts').find('canvas');$chartCanvas.height(Math.max(_clicksByCountry.length*(rowWidth>750?1:2),20)+'em');});},_totalClicks:function(){return this._rpc({model:'link.tracker.click',method:'search_count',args:[[this.links_domain]],});},_clicksByDay:function(){return this._rpc({model:'link.tracker.click',method:'read_group',args:[[this.links_domain],['create_date']],kwargs:{groupby:'create_date:day'},});},_clicksByCountry:function(){return this._rpc({model:'link.tracker.click',method:'read_group',args:[[this.links_domain],['country_id']],kwargs:{groupby:'country_id'},});},_lastWeekClicksByCountry:function(){var interval=moment().subtract(7,'days').format('YYYY-MM-DD');return this._rpc({model:'link.tracker.click',method:'read_group',args:[[this.links_domain,['create_date','>',interval]],['country_id']],kwargs:{groupby:'country_id'},});},_lastMonthClicksByCountry:function(){var interval=moment().subtract(30,'days').format('YYYY-MM-DD');return this._rpc({model:'link.tracker.click',method:'read_group',args:[[this.links_domain,['create_date','>',interval]],['country_id']],kwargs:{groupby:'country_id'},});},_onGraphTabClick:function(ev){ev.preventDefault();$('.graph-tabs li a').tab('show');},_onCopyToClipboardClick:function(ev){ev.preventDefault();if(this.animating_copy){return;}
this.animating_copy=true;$('.o_website_links_short_url').clone().css('position','absolute').css('left','15px').css('bottom','10px').css('z-index',2).removeClass('.o_website_links_short_url').addClass('animated-link').appendTo($('.o_website_links_short_url')).animate({opacity:0,bottom:'+=20',},500,function(){$('.animated-link').remove();this.animating_copy=false;});},});return{BarChart:BarChart,PieChart:PieChart,};});;

/* /website_mass_mailing/static/src/js/website_mass_mailing.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('mass_mailing.website_integration',function(require){"use strict";var config=require('web.config');var core=require('web.core');const dom=require('web.dom');var Dialog=require('web.Dialog');var utils=require('web.utils');var publicWidget=require('web.public.widget');const session=require('web.session');var _t=core._t;publicWidget.registry.subscribe=publicWidget.Widget.extend({selector:".js_subscribe",disabledInEditableMode:false,read_events:{'click .js_subscribe_btn':'_onSubscribeClick',},init:function(){this._super(...arguments);const ReCaptchaService=odoo.__DEBUG__.services['google_recaptcha.ReCaptchaV3'];this._recaptcha=ReCaptchaService&&new ReCaptchaService.ReCaptcha()||null;},willStart:function(){if(this._recaptcha){this._recaptcha.loadLibs();}
return this._super(...arguments);},start:function(){var self=this;var def=this._super.apply(this,arguments);if(!this._recaptcha&&this.editableMode&&session.is_admin){this.displayNotification({type:'info',message:_t("Do you want to install Google reCAPTCHA to secure your newsletter subscriptions?"),sticky:true,buttons:[{text:_t("Install now"),primary:true,click:async()=>{dom.addButtonLoadingEffect($('.o_notification .btn-primary')[0]);const record=await this._rpc({model:'ir.module.module',method:'search_read',domain:[['name','=','google_recaptcha']],fields:['id'],limit:1,});await this._rpc({model:'ir.module.module',method:'button_immediate_install',args:[[record[0]['id']]],});this.displayNotification({type:'info',message:_t("Google reCAPTCHA is now installed! You can configure it from your website settings."),sticky:true,buttons:[{text:_t("Website settings"),primary:true,click:async()=>{window.open('/web#action=website.action_website_configuration','_blank');}}],});}}],});}
this.$popup=this.$target.closest('.o_newsletter_modal');if(this.$popup.length){return def;}
var always=function(data){var isSubscriber=data.is_subscriber;self.$('.js_subscribe_btn').prop('disabled',isSubscriber);self.$('input.js_subscribe_email').val(data.email||"").prop('disabled',isSubscriber);self.$target.removeClass('d-none');self.$('.js_subscribe_btn').toggleClass('d-none',!!isSubscriber);self.$('.js_subscribed_btn').toggleClass('d-none',!isSubscriber);};return Promise.all([def,this._rpc({route:'/website_mass_mailing/is_subscriber',params:{'list_id':this.$target.data('list-id'),},}).then(always).guardedCatch(always)]);},_onSubscribeClick:async function(){var self=this;var $email=this.$(".js_subscribe_email:visible");if($email.length&&!$email.val().match(/.+@.+/)){this.$target.addClass('o_has_error').find('.form-control').addClass('is-invalid');return false;}
this.$target.removeClass('o_has_error').find('.form-control').removeClass('is-invalid');let tokenObj=null;if(this._recaptcha){tokenObj=await this._recaptcha.getToken('website_mass_mailing_subscribe');if(tokenObj.error){self.displayNotification({type:'danger',title:_t("Error"),message:tokenObj.error,sticky:true,});return false;}}
const params={'list_id':this.$target.data('list-id'),'email':$email.length?$email.val():false,};if(this._recaptcha){params['recaptcha_token_response']=tokenObj.token;}
this._rpc({route:'/website_mass_mailing/subscribe',params:params,}).then(function(result){let toastType=result.toast_type;if(toastType==='success'){self.$(".js_subscribe_btn").addClass('d-none');self.$(".js_subscribed_btn").removeClass('d-none');self.$('input.js_subscribe_email').prop('disabled',!!result);if(self.$popup.length){self.$popup.modal('hide');}}
self.displayNotification({type:toastType,title:toastType==='success'?_t('Success'):_t('Error'),message:result.toast_content,sticky:true,});});},});publicWidget.registry.newsletter_popup=publicWidget.Widget.extend({selector:".o_newsletter_popup",disabledInEditableMode:false,start:function(){var self=this;var defs=[this._super.apply(this,arguments)];this.websiteID=this._getContext().website_id;this.listID=parseInt(this.$target.attr('data-list-id'));if(!this.listID||(utils.get_cookie(_.str.sprintf("newsletter-popup-%s-%s",this.listID,this.websiteID))&&!self.editableMode)){return Promise.all(defs);}
if(this.$target.data('content')&&this.editableMode){this._dialogInit(this.$target.data('content'));this.$target.removeData('quick-open');this.massMailingPopup.open();}else{defs.push(this._rpc({route:'/website_mass_mailing/get_content',params:{newsletter_id:self.listID,},}).then(function(data){self._dialogInit(data.popup_content,data.email||'');if(!self.editableMode&&!data.is_subscriber){if(config.device.isMobile){setTimeout(function(){self._showBanner();},5000);}else{$(document).on('mouseleave.open_popup_event',self._showBanner.bind(self));}}else{$(document).off('mouseleave.open_popup_event');}
if(self.$target.data('quick-open')){self.massMailingPopup.open();self.$target.removeData('quick-open');}}));}
return Promise.all(defs);},destroy:function(){if(this.massMailingPopup){this.massMailingPopup.close();}
this._super.apply(this,arguments);},_dialogInit:function(content,email){var self=this;this.massMailingPopup=new Dialog(this,{technical:false,$content:$('<div/>').html(content),$parentNode:this.$target,backdrop:!this.editableMode,dialogClass:'p-0'+(this.editableMode?' oe_structure oe_empty':''),renderFooter:false,size:'medium',});this.massMailingPopup.opened().then(function(){var $modal=self.massMailingPopup.$modal;$modal.find('header button.close').on('mouseup',function(ev){ev.stopPropagation();});$modal.addClass('o_newsletter_modal');$modal.find('.oe_structure').attr('data-editor-message',_t('DRAG BUILDING BLOCKS HERE'));$modal.find('.modal-dialog').addClass('modal-dialog-centered');$modal.find('.js_subscribe').data('list-id',self.listID).find('input.js_subscribe_email').val(email);self.trigger_up('widgets_start_request',{editableMode:self.editableMode,$target:$modal,});});this.massMailingPopup.on('closed',this,function(){var $modal=self.massMailingPopup.$modal;if($modal){self.$el.data('content',$modal.find('.modal-body').html());}});},_showBanner:function(){this.massMailingPopup.open();utils.set_cookie(_.str.sprintf("newsletter-popup-%s-%s",this.listID,this.websiteID),true);$(document).off('mouseleave.open_popup_event');},});});;

/* /website_event/static/src/js/display_timer_widget.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_event.display_timer_widget',function(require){'use strict';var core=require('web.core');var _t=core._t;var publicWidget=require('web.public.widget');publicWidget.registry.displayTimerWidget=publicWidget.Widget.extend({selector:'.o_display_timer',start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self.options=self.$target.data();self.preCountdownDisplay=self.options["preCountdownDisplay"];self.preCountdownTime=self.options["preCountdownTime"];self.preCountdownText=self.options["preCountdownText"];self.mainCountdownTime=self.options["mainCountdownTime"];self.mainCountdownText=self.options["mainCountdownText"];self.mainCountdownDisplay=self.options["mainCountdownDisplay"];self.displayClass=self.options["displayClass"];if(self.preCountdownDisplay){$(self.$el).parent().removeClass('d-none');}
self._checkTimer();self.interval=setInterval(function(){self._checkTimer();},1000);});},_checkTimer:function(){var now=new Date();var remainingPreSeconds=this.preCountdownTime-(now.getTime()/1000);if(remainingPreSeconds<=1){this.$('.o_countdown_text').text(this.mainCountdownText);if(this.mainCountdownDisplay){$(this.$el).parent().removeClass('d-none');}
var remainingMainSeconds=this.mainCountdownTime-(now.getTime()/1000);if(remainingMainSeconds<=1){clearInterval(this.interval);$(this.displayClass).removeClass('d-none');$(this.$el).parent().addClass('d-none');}else{this._updateCountdown(remainingMainSeconds);}}else{this._updateCountdown(remainingPreSeconds);}},_updateCountdown:function(remainingTime){var remainingSeconds=remainingTime;var days=Math.floor(remainingSeconds/86400);remainingSeconds=remainingSeconds%86400;var hours=Math.floor(remainingSeconds/3600);remainingSeconds=remainingSeconds%3600;var minutes=Math.floor(remainingSeconds/60);remainingSeconds=Math.floor(remainingSeconds%60);this.$("span.o_timer_days").text(days);this.$("span.o_timer_hours").text(this._zeroPad(hours,2));this.$("span.o_timer_minutes").text(this._zeroPad(minutes,2));this.$("span.o_timer_seconds").text(this._zeroPad(remainingSeconds,2));},_zeroPad:function(num,places){var zero=places-num.toString().length+1;return new Array(+(zero>0&&zero)).join("0")+num;},});return publicWidget.registry.countdownWidget;});;

/* /website_event/static/src/js/register_toaster_widget.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_event.register_toaster_widget',function(require){'use strict';let core=require('web.core');let _t=core._t;let publicWidget=require('web.public.widget');publicWidget.registry.RegisterToasterWidget=publicWidget.Widget.extend({selector:'.o_wevent_register_toaster',start:function(){const message=this.$el.data('message');if(message&&message.length){this.displayNotification({title:_t("Register"),message:message,type:'info'});}
return this._super.apply(this,arguments);},});return publicWidget.registry.RegisterToasterWidget;});;

/* /website_event/static/src/js/website_geolocation.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_event.geolocation',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.visitor=publicWidget.Widget.extend({selector:".oe_country_events, .country_events",disabledInEditableMode:false,start:function(){var defs=[this._super.apply(this,arguments)];var self=this;var $eventList=this.$('.country_events_list');this._originalContent=$eventList[0].outerHTML;defs.push(this._rpc({route:'/event/get_country_event_list'}).then(function(data){if(data){self._$loadedContent=$(data);self._$loadedContent.attr('contentEditable',false);self._$loadedContent.addClass('o_temp_auto_element');self._$loadedContent.attr('data-temp-auto-element-original-content',self._originalContent);$eventList.replaceWith(self._$loadedContent);}}));return Promise.all(defs);},destroy:function(){this._super.apply(this,arguments);if(this._$loadedContent){this._$loadedContent.replaceWith(this._originalContent);}},});});;

/* /website_event/static/src/js/website_event.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_event.website_event',function(require){var ajax=require('web.ajax');var core=require('web.core');var Widget=require('web.Widget');var publicWidget=require('web.public.widget');var _t=core._t;var EventRegistrationForm=Widget.extend({start:function(){var self=this;var res=this._super.apply(this.arguments).then(function(){$('#registration_form .a-submit').off('click').click(function(ev){self.on_click(ev);});});return res;},on_click:function(ev){ev.preventDefault();ev.stopPropagation();var $form=$(ev.currentTarget).closest('form');var $button=$(ev.currentTarget).closest('[type="submit"]');var post={};$('#registration_form table').siblings('.alert').remove();$('#registration_form select').each(function(){post[$(this).attr('name')]=$(this).val();});var tickets_ordered=_.some(_.map(post,function(value,key){return parseInt(value);}));if(!tickets_ordered){$('<div class="alert alert-info"/>').text(_t('Please select at least one ticket.')).insertAfter('#registration_form table');return new Promise(function(){});}else{$button.attr('disabled',true);return ajax.jsonRpc($form.attr('action'),'call',post).then(function(modal){var $modal=$(modal);$modal.modal({backdrop:'static',keyboard:false});$modal.find('.modal-body > div').removeClass('container');$modal.appendTo('body').modal();$modal.on('click','.js_goto_event',function(){$modal.modal('hide');$button.prop('disabled',false);});$modal.on('click','.close',function(){$button.prop('disabled',false);});});}},});publicWidget.registry.EventRegistrationFormInstance=publicWidget.Widget.extend({selector:'#registration_form',start:function(){var def=this._super.apply(this,arguments);this.instance=new EventRegistrationForm(this);return Promise.all([def,this.instance.attachTo(this.$el)]);},destroy:function(){this.instance.setElement(null);this._super.apply(this,arguments);this.instance.setElement(this.$el);},});return EventRegistrationForm;});;

/* /website_event/static/src/js/website_event_ticket_details.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_event.ticket_details',function(require){var publicWidget=require('web.public.widget');publicWidget.registry.ticketDetailsWidget=publicWidget.Widget.extend({selector:'.o_wevent_js_ticket_details',events:{'click .o_wevent_registration_btn':'_onTicketDetailsClick','change .custom-select':'_onTicketQuantityChange'},start:function(){this.foldedByDefault=this.$el.data('foldedByDefault')===1;return this._super.apply(this,arguments);},_getTotalTicketCount:function(){var ticketCount=0;this.$('.custom-select').each(function(){ticketCount+=parseInt($(this).val());});return ticketCount;},_onTicketDetailsClick:function(ev){ev.preventDefault();if(this.foldedByDefault){$(ev.currentTarget).toggleClass('btn-primary text-left pl-0');$(ev.currentTarget).siblings().toggleClass('d-none');this.$('.close').toggleClass('d-none');}},_onTicketQuantityChange:function(){this.$('button.btn-primary').attr('disabled',this._getTotalTicketCount()===0);}});return publicWidget.registry.ticketDetailsWidget;});;

/* /website_event/static/src/js/website_event_set_customize_options.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_event.set_customize_options',function(require){"use strict";var CustomizeMenu=require('website.customizeMenu');var publicWidget=require('web.public.widget');var EventSpecificOptions=publicWidget.Widget.extend({template:'website_event.customize_options',xmlDependencies:['/website_event/static/src/xml/customize_options.xml'],events:{'change #display-website-menu':'_onDisplaySubmenuChange',},start:function(){this.$submenuInput=this.$('#display-website-menu');this.modelName=this._getEventObject().model;this.eventId=this._getEventObject().id;this._initCheckbox();},_onDisplaySubmenuChange:function(ev){var checkboxValue=this.$submenuInput.is(':checked');this._toggleSubmenuDisplay(checkboxValue);},_getCheckboxFields:function(){return['website_menu','website_url'];},_getCheckboxFieldMatch:function(checkboxField){if(checkboxField==='website_menu'){return this.$submenuInput;}},_getEventObject:function(){var repr=$('html').data('main-object');var m=repr.match(/(.+)\((\d+),(.*)\)/);return{model:m[1],id:m[2]|0,};},_initCheckbox:function(){var self=this;this._rpc({model:this.modelName,method:'read',args:[[this.eventId],this._getCheckboxFields()],}).then((data)=>{self._initCheckboxCallback(data);});},_initCheckboxCallback:function(rpcData){if(rpcData[0]['website_menu']){var submenuInput=this._getCheckboxFieldMatch('website_menu');submenuInput.attr('checked','checked');}
this.eventUrl=rpcData[0]['website_url'];},_reloadEventPage:function(){window.location=this.eventUrl;},_toggleSubmenuDisplay:function(val){var self=this;this._rpc({model:this.modelName,method:'toggle_website_menu',args:[[this.eventId],val],}).then(function(){self._reloadEventPage();});},});CustomizeMenu.include({_getEventObject:function(){var repr=$('html').data('main-object');var m=repr.match(/(.+)\((\d+),(.*)\)/);return{model:m[1],id:m[2]|0,};},_loadCustomizeOptions:function(){var self=this;var def=this._super.apply(this,arguments);return def.then(function(){if(!self.__eventOptionsLoaded&&self._getEventObject().model==='event.event'){self.__eventOptionsLoaded=true;self.eventOptions=new EventSpecificOptions(self);self.eventOptions.insertAfter(self.$el.find('.dropdown-divider:first()'));}});},});return{EventSpecificOptions:EventSpecificOptions,};});;

/* /website_profile/static/src/js/website_profile.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_profile.website_profile',function(require){'use strict';var publicWidget=require('web.public.widget');var wysiwygLoader=require('web_editor.loader');publicWidget.registry.websiteProfile=publicWidget.Widget.extend({selector:'.o_wprofile_email_validation_container',read_events:{'click .send_validation_email':'_onSendValidationEmailClick','click .validated_email_close':'_onCloseValidatedEmailClick',},_onSendValidationEmailClick:function(ev){ev.preventDefault();var self=this;var $element=$(ev.currentTarget);this._rpc({route:'/profile/send_validation_email',params:{'redirect_url':$element.data('redirect_url')},}).then(function(data){if(data){self.$('button.validation_email_close').click();}});},_onCloseValidatedEmailClick:function(){this._rpc({route:'/profile/validate_email/close',});},});publicWidget.registry.websiteProfileEditor=publicWidget.Widget.extend({selector:'.o_wprofile_editor_form',read_events:{'click .o_forum_profile_pic_edit':'_onEditProfilePicClick','change .o_forum_file_upload':'_onFileUploadChange','click .o_forum_profile_pic_clear':'_onProfilePicClearClick','click .o_wprofile_submit_btn':'_onSubmitClick',},start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
var toolbar=[['style',['style']],['font',['bold','italic','underline','clear']],['para',['ul','ol','paragraph']],['table',['table']],['insert',['link','picture']],['history',['undo','redo']],];var $textarea=this.$('textarea.o_wysiwyg_loader');var loadProm=wysiwygLoader.load(this,$textarea[0],{toolbar:toolbar,recordInfo:{context:this._getContext(),res_model:'res.users',res_id:parseInt(this.$('input[name=user_id]').val()),},disableResizeImage:true,}).then(wysiwyg=>{this._wysiwyg=wysiwyg;});return Promise.all([def,loadProm]);},_onEditProfilePicClick:function(ev){ev.preventDefault();$(ev.currentTarget).closest('form').find('.o_forum_file_upload').trigger('click');},_onFileUploadChange:function(ev){if(!ev.currentTarget.files.length){return;}
var $form=$(ev.currentTarget).closest('form');var reader=new window.FileReader();reader.readAsDataURL(ev.currentTarget.files[0]);reader.onload=function(ev){$form.find('.o_forum_avatar_img').attr('src',ev.target.result);};$form.find('#forum_clear_image').remove();},_onProfilePicClearClick:function(ev){var $form=$(ev.currentTarget).closest('form');$form.find('.o_forum_avatar_img').attr('src','/web/static/src/img/placeholder.png');$form.append($('<input/>',{name:'clear_image',id:'forum_clear_image',type:'hidden',}));},_onSubmitClick:function(){if(this._wysiwyg){this._wysiwyg.save();}},});return publicWidget.registry.websiteProfile;});;

/* /website_forum/static/src/js/website_forum.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_forum.website_forum',function(require){'use strict';const dom=require('web.dom');var core=require('web.core');var weDefaultOptions=require('web_editor.wysiwyg.default_options');var wysiwygLoader=require('web_editor.loader');var publicWidget=require('web.public.widget');var session=require('web.session');var qweb=core.qweb;var _t=core._t;publicWidget.registry.websiteForum=publicWidget.Widget.extend({selector:'.website_forum',xmlDependencies:['/website_forum/static/src/xml/website_forum_share_templates.xml'],events:{'click .karma_required':'_onKarmaRequiredClick','mouseenter .o_js_forum_tag_follow':'_onTagFollowBoxMouseEnter','mouseleave .o_js_forum_tag_follow':'_onTagFollowBoxMouseLeave','mouseenter .o_forum_user_info':'_onUserInfoMouseEnter','mouseleave .o_forum_user_info':'_onUserInfoMouseLeave','mouseleave .o_forum_user_bio_expand':'_onUserBioExpandMouseLeave','click .flag:not(.karma_required)':'_onFlagAlertClick','click .vote_up:not(.karma_required), .vote_down:not(.karma_required)':'_onVotePostClick','click .o_js_validation_queue a[href*="/validate"]':'_onValidationQueueClick','click .o_wforum_validate_toggler:not(.karma_required)':'_onAcceptAnswerClick','click .o_wforum_favourite_toggle':'_onFavoriteQuestionClick','click .comment_delete':'_onDeleteCommentClick','click .js_close_intro':'_onCloseIntroClick','submit .js_wforum_submit_form:has(:not(.karma_required).o_wforum_submit_post)':'_onSubmitForm',},start:function(){var self=this;this.lastsearch=[];$('span[data-oe-model="forum.post"][data-oe-field="content"]').find('img.float-left').removeClass('float-left');var forumLogin=_.string.sprintf('%s/web?redirect=%s',window.location.origin,escape(window.location.href));$('.forum_register_url').attr('href',forumLogin);this.$('[data-toggle="tooltip"]').tooltip({delay:0});this.$('[data-toggle="popover"]').popover({offset:8});$('input.js_select2').select2({tags:true,tokenSeparators:[',',' ','_'],maximumInputLength:35,minimumInputLength:2,maximumSelectionSize:5,lastsearch:[],createSearchChoice:function(term){if(_.filter(self.lastsearch,function(s){return s.text.localeCompare(term)===0;}).length===0){if(parseInt($('#karma').val())>=parseInt($('#karma_edit_retag').val())){return{id:'_'+$.trim(term),text:$.trim(term)+' *',isNew:true,};}}},formatResult:function(term){if(term.isNew){return'<span class="badge badge-primary">New</span> '+_.escape(term.text);}else{return _.escape(term.text);}},ajax:{url:'/forum/get_tags',dataType:'json',data:function(term){return{query:term,limit:50,};},results:function(data){var ret=[];_.each(data,function(x){ret.push({id:x.id,text:x.name,isNew:false,});});self.lastsearch=ret;return{results:ret};}},initSelection:function(element,callback){var data=[];_.each(element.data('init-value'),function(x){data.push({id:x.id,text:x.name,isNew:false});});element.val('');callback(data);},});_.each($('textarea.o_wysiwyg_loader'),function(textarea){var $textarea=$(textarea);var editorKarma=$textarea.data('karma')||0;var $form=$textarea.closest('form');var hasFullEdit=parseInt($("#karma").val())>=editorKarma;var toolbar=[['style',['style']],['font',['bold','italic','underline','clear']],['para',['ul','ol','paragraph']],['table',['table']],];if(hasFullEdit){toolbar.push(['insert',['link','picture']]);}
toolbar.push(['history',['undo','redo']]);var options={height:200,minHeight:80,toolbar:toolbar,styleWithSpan:false,styleTags:_.without(weDefaultOptions.styleTags,'h1','h2','h3'),recordInfo:{context:self._getContext(),res_model:'forum.post',res_id:+window.location.pathname.split('-').pop(),},disableFullMediaDialog:true,disableResizeImage:true,};if(!hasFullEdit){options.plugins={LinkPlugin:false,MediaPlugin:false,};}
wysiwygLoader.load(self,$textarea[0],options).then(wysiwyg=>{$form.find('.note-editable').find('img.float-left').removeClass('float-left');$form.find('.note-editable').find('img.o_we_selected_image').removeClass('o_we_selected_image');$form.on('click','button, .a-submit',()=>{$form.find('.note-editable').find('img.o_we_selected_image').removeClass('o_we_selected_image');wysiwyg.save();});});});_.each(this.$('.o_wforum_bio_popover'),authorBox=>{$(authorBox).popover({trigger:'hover',offset:10,animation:false,html:true,}).popover('hide').data('bs.popover').tip.classList.add('o_wforum_bio_popover_container');});this.$('#post_reply').on('shown.bs.collapse',function(e){const replyEl=document.querySelector('#post_reply');const scrollingElement=dom.closestScrollable(replyEl.parentNode);dom.scrollTo(replyEl,{forcedOffset:$(scrollingElement).innerHeight()-$(replyEl).innerHeight(),});});return this._super.apply(this,arguments);},_onSubmitForm:function(ev){let validForm=true;let $form=$(ev.currentTarget);let $title=$form.find('input[name=post_name]');let $textarea=$form.find('textarea[name=content]');let textareaContent=$form.find('.o_wysiwyg_wrapper .note-editable.panel-body').text().trim();if($title.length&&$title[0].required){if($title.val()){$title.removeClass('is-invalid');}else{$title.addClass('is-invalid');validForm=false;}}
if($textarea[0]&&$textarea[0].required){let $textareaContainer=$form.find('.o_wysiwyg_wrapper .note-editor.panel.panel-default');if(!textareaContent.length){$textareaContainer.addClass('border border-danger rounded-top');validForm=false;}else{$textareaContainer.removeClass('border border-danger rounded-top');}}
if(validForm){if($form.has('.oe_social_share_call').length){sessionStorage.setItem('social_share',JSON.stringify({targetType:$(ev.currentTarget).find('.o_wforum_submit_post').data('social-target-type'),}));}}else{ev.preventDefault();setTimeout(function(){var $buttons=$(ev.currentTarget).find('button[type="submit"], a.a-submit');_.each($buttons,function(btn){let $btn=$(btn);$btn.find('i').remove();$btn.prop('disabled',false);});},0);}},_onKarmaRequiredClick:function(ev){var $karma=$(ev.currentTarget);var karma=$karma.data('karma');var forum_id=$('#wrapwrap').data('forum_id');if(!karma){return;}
ev.preventDefault();var msg=karma+' '+_t("karma is required to perform this action. ");var title=_t("Karma Error");if(forum_id){msg+='<a class="alert-link" href="/forum/'+forum_id+'/faq">'+_t("Read the guidelines to know how to gain karma.")+'</a>';}
if(session.is_website_user){msg=_t("Sorry you must be logged in to perform this action");title=_t("Access Denied");}
this.call('crash_manager','show_warning',{message:msg,title:title,},{sticky:false,});},_onTagFollowBoxMouseEnter:function(ev){$(ev.currentTarget).find('.o_forum_tag_follow_box').stop().fadeIn().css('display','block');},_onTagFollowBoxMouseLeave:function(ev){$(ev.currentTarget).find('.o_forum_tag_follow_box').stop().fadeOut().css('display','none');},_onUserInfoMouseEnter:function(ev){$(ev.currentTarget).parent().find('.o_forum_user_bio_expand').delay(500).toggle('fast');},_onUserInfoMouseLeave:function(ev){$(ev.currentTarget).parent().find('.o_forum_user_bio_expand').clearQueue();},_onUserBioExpandMouseLeave:function(ev){$(ev.currentTarget).fadeOut('fast');},_onFlagAlertClick:function(ev){var self=this;ev.preventDefault();var $link=$(ev.currentTarget);this._rpc({route:$link.data('href')||($link.attr('href')!=='#'&&$link.attr('href'))||$link.closest('form').attr('action'),}).then(function(data){if(data.error){var message;if(data.error==='anonymous_user'){message=_t("Sorry you must be logged to flag a post");}else if(data.error==='post_already_flagged'){message=_t("This post is already flagged");}else if(data.error==='post_non_flaggable'){message=_t("This post can not be flagged");}
self.call('crash_manager','show_warning',{message:message,title:_t("Access Denied"),},{sticky:false,});}else if(data.success){var elem=$link;if(data.success==='post_flagged_moderator'){elem.data('href')&&elem.html(' Flagged');var c=parseInt($('#count_flagged_posts').html(),10);c++;$('#count_flagged_posts').html(c);}else if(data.success==='post_flagged_non_moderator'){elem.data('href')&&elem.html(' Flagged');var forumAnswer=elem.closest('.forum_answer');forumAnswer.fadeIn(1000);forumAnswer.slideUp(1000);}}});},_onVotePostClick:function(ev){var self=this;ev.preventDefault();var $btn=$(ev.currentTarget);this._rpc({route:$btn.data('href'),}).then(function(data){if(data.error){var message;if(data.error==='own_post'){message=_t('Sorry, you cannot vote for your own posts');}else if(data.error==='anonymous_user'){message=_t('Sorry you must be logged to vote');}
self.call('crash_manager','show_warning',{message:message,title:_t("Access Denied"),},{sticky:false,});}else{var $container=$btn.closest('.vote');var $items=$container.children();var $voteUp=$items.filter('.vote_up');var $voteDown=$items.filter('.vote_down');var $voteCount=$items.filter('.vote_count');var userVote=parseInt(data['user_vote']);$voteUp.prop('disabled',userVote===1);$voteDown.prop('disabled',userVote===-1);$items.removeClass('text-success text-danger text-muted o_forum_vote_animate');void $container[0].offsetWidth;if(userVote===1){$voteUp.addClass('text-success');$voteCount.addClass('text-success');$voteDown.removeClass('karma_required');}
if(userVote===-1){$voteDown.addClass('text-danger');$voteCount.addClass('text-danger');$voteUp.removeClass('karma_required');}
if(userVote===0){if(!$voteDown.data('can-downvote')){$voteDown.addClass('karma_required');}
if(!$voteUp.data('can-upvote')){$voteUp.addClass('karma_required');}}
$voteCount.html(data['vote_count']).addClass('o_forum_vote_animate');}});},_onValidationQueueClick:function(ev){ev.preventDefault();var $link=$(ev.currentTarget);$link.parents('.post_to_validate').hide();$.get($link.attr('href')).then(()=>{var left=$('.o_js_validation_queue:visible').length;var type=$('h2.o_page_header a.active').data('type');$('#count_post').text(left);$('#moderation_tools a[href*="/'+type+'_"]').find('strong').text(left);if(!left){this.$('.o_caught_up_alert').removeClass('d-none');}},function(){$link.parents('.o_js_validation_queue > div').addClass('bg-danger text-white').css('background-color','#FAA');$link.parents('.post_to_validate').show();});},_onAcceptAnswerClick:function(ev){ev.preventDefault();var $link=$(ev.currentTarget);var target=$link.data('target');this._rpc({route:$link.data('href'),}).then(data=>{if(data.error){if(data.error==='anonymous_user'){var message=_t("Sorry, anonymous users cannot choose correct answer.");}
this.call('crash_manager','show_warning',{message:message,title:_t("Access Denied"),},{sticky:false,});}else{_.each(this.$('.forum_answer'),answer=>{var $answer=$(answer);var isCorrect=$answer.is(target)?data:false;var $toggler=$answer.find('.o_wforum_validate_toggler');var newHelper=isCorrect?$toggler.data('helper-decline'):$toggler.data('helper-accept');$answer.toggleClass('o_wforum_answer_correct',isCorrect);$toggler.tooltip('dispose').attr('data-original-title',newHelper).tooltip({delay:0});});}});},_onFavoriteQuestionClick:function(ev){ev.preventDefault();var $link=$(ev.currentTarget);this._rpc({route:$link.data('href'),}).then(function(data){$link.toggleClass('o_wforum_gold fa-star',data).toggleClass('fa-star-o text-muted',!data);});},_onDeleteCommentClick:function(ev){ev.preventDefault();var $link=$(ev.currentTarget);var $container=$link.closest('.o_wforum_post_comments_container');this._rpc({route:$link.closest('form').attr('action'),}).then(function(){$link.closest('.o_wforum_post_comment').remove();var count=$container.find('.o_wforum_post_comment').length;if(count){$container.find('.o_wforum_comments_count').text(count);}else{$container.find('.o_wforum_comments_count_header').remove();}});},_onCloseIntroClick:function(ev){ev.preventDefault();document.cookie='forum_welcome_message = false';$('.forum_intro').slideUp();return true;},});publicWidget.registry.websiteForumSpam=publicWidget.Widget.extend({selector:'.o_wforum_moderation_queue',xmlDependencies:['/website_forum/static/src/xml/website_forum_share_templates.xml'],events:{'click .o_wforum_select_all_spam':'_onSelectallSpamClick','click .o_wforum_mark_spam':'async _onMarkSpamClick','input #spamSearch':'_onSpamSearchInput',},start:function(){this.spamIDs=this.$('.modal').data('spam-ids');return this._super.apply(this,arguments);},_onSelectallSpamClick:function(ev){var $spamInput=this.$('.modal .tab-pane.active input');$spamInput.prop('checked',true);},_onSpamSearchInput:function(ev){var self=this;var toSearch=$(ev.currentTarget).val();return this._rpc({model:'forum.post',method:'search_read',args:[[['id','in',self.spamIDs],'|',['name','ilike',toSearch],['content','ilike',toSearch]],['name','content']],kwargs:{}}).then(function(o){_.each(o,function(r){r.content=$('<p>'+$(r.content).html()+'</p>').text().substring(0,250);});self.$('div.post_spam').html(qweb.render('website_forum.spam_search_name',{posts:o,}));});},_onMarkSpamClick:function(ev){var key=this.$('.modal .tab-pane.active').data('key');var $inputs=this.$('.modal .tab-pane.active input.custom-control-input:checked');var values=_.map($inputs,function(o){return parseInt(o.value);});return this._rpc({model:'forum.post',method:'mark_as_offensive_batch',args:[this.spamIDs,key,values],}).then(function(){window.location.reload();});},});});;

/* /website_forum/static/src/js/website_forum.share.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_forum.share',function(require){'use strict';var core=require('web.core');var publicWidget=require('web.public.widget');var qweb=core.qweb;var ForumShare=publicWidget.registry.socialShare.extend({selector:'',xmlDependencies:publicWidget.registry.socialShare.prototype.xmlDependencies.concat(['/website_forum/static/src/xml/website_forum_share_templates.xml']),events:{},init:function(parent,options,targetType){this._super.apply(this,arguments);this.targetType=targetType;},start:function(){var def=this._super.apply(this,arguments);this._onMouseEnter();return def;},_bindSocialEvent:function(){this._super.apply(this,arguments);$('.oe_share_bump').click($.proxy(this._postBump,this));},_render:function(){var $question=this.$('article.question');if(!this.targetType){this._super.apply(this,arguments);}else if(this.targetType==='social-alert'){$question.before(qweb.render('website.social_alert',{medias:this.socialList}));}else{$('body').append(qweb.render('website.social_modal',{medias:this.socialList,target_type:this.targetType,state:$question.data('state'),}));$('#oe_social_share_modal').modal('show');}},_postBump:function(){this._rpc({route:'/forum/post/bump',params:{post_id:this.element.data('id'),},});},});publicWidget.registry.websiteForumShare=publicWidget.Widget.extend({selector:'.website_forum',start:function(){if(sessionStorage.getItem('social_share')){var socialData=JSON.parse(sessionStorage.getItem('social_share'));(new ForumShare(this,false,socialData.targetType)).attachTo($(document.body));sessionStorage.removeItem('social_share');}
var $questionContainer=$('.oe_js_bump');if($questionContainer.length){new ForumShare(this,false,'social-alert').attachTo($questionContainer);}
return this._super.apply(this,arguments);},});});;

/* /mail/static/src/js/utils.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('mail.utils',function(require){"use strict";var core=require('web.core');var _t=core._t;function parseAndTransform(htmlString,transformFunction){var openToken="OPEN"+Date.now();var string=htmlString.replace(/&lt;/g,openToken);var children;try{children=$('<div>').html(string).contents();}catch(e){children=$('<div>').html('<pre>'+string+'</pre>').contents();}
return _parseAndTransform(children,transformFunction).replace(new RegExp(openToken,"g"),"&lt;");}
function _parseAndTransform(nodes,transformFunction){return _.map(nodes,function(node){return transformFunction(node,function(){return _parseAndTransform(node.childNodes,transformFunction);});}).join("");}
var urlRegexp=/\b(?:https?:\/\/\d{1,3}(?:\.\d{1,3}){3}|(?:https?:\/\/|(?:www\.))[-a-z0-9@:%._+~#=\u00C0-\u024F\u1E00-\u1EFF]{2,256}\.[a-z]{2,13})\b(?:[-a-z0-9@:%_+.~#?&'$//=;\u00C0-\u024F\u1E00-\u1EFF]*)/gi;function linkify(text,attrs){attrs=attrs||{};if(attrs.target===undefined){attrs.target='_blank';}
if(attrs.target==='_blank'){attrs.rel='noreferrer noopener';}
attrs=_.map(attrs,function(value,key){return key+'="'+_.escape(value)+'"';}).join(' ');return text.replace(urlRegexp,function(url){var href=(!/^https?:\/\//i.test(url))?"http://"+url:url;return'<a '+attrs+' href="'+href+'">'+url+'</a>';});}
function addLink(node,transformChildren){if(node.nodeType===3){const linkified=linkify(node.data);if(linkified!==node.data){const div=document.createElement('div');div.innerHTML=linkified;for(const childNode of[...div.childNodes]){node.parentNode.insertBefore(childNode,node);}
node.parentNode.removeChild(node);return linkified;}
return node.textContent;}
if(node.tagName==="A")return node.outerHTML;transformChildren();return node.outerHTML;}
function htmlToTextContentInline(htmlString){const fragment=document.createDocumentFragment();const div=document.createElement('div');fragment.appendChild(div);htmlString=htmlString.replace(/<br\s*\/?>/gi,' ');try{div.innerHTML=htmlString;}catch(e){div.innerHTML=`<pre>${htmlString}</pre>`;}
return div.textContent.trim().replace(/[\n\r]/g,'').replace(/\s\s+/g,' ');}
function stripHTML(node,transformChildren){if(node.nodeType===3)return node.data;if(node.tagName==="BR")return"\n";return transformChildren();}
function inline(node,transform_children){if(node.nodeType===3)return node.data;if(node.nodeType===8)return"";if(node.tagName==="BR")return" ";if(node.tagName.match(/^(A|P|DIV|PRE|BLOCKQUOTE)$/))return transform_children();node.innerHTML=transform_children();return node.outerHTML;}
function parseEmail(text){if(text){var result=text.match(/(.*)<(.*@.*)>/);if(result){return[_.str.trim(result[1]),_.str.trim(result[2])];}
result=text.match(/(.*@.*)/);if(result){return[_.str.trim(result[1]),_.str.trim(result[1])];}
return[text,false];}}
function escapeAndCompactTextContent(content){let value=owl.utils.escape(content).trim();value=value.replace(/(\r|\n){2,}/g,'<br/><br/>');value=value.replace(/(\r|\n)/g,'<br/>');value=value.replace(/ /g,'&nbsp;').replace(/([^>])&nbsp;([^<])/g,'$1 $2');return value;}
function getTextToHTML(text){return text.replace(/((?:https?|ftp):\/\/[\S]+)/g,'<a href="$1">$1</a> ').replace(/[\n\r]/g,'<br/>');}
function timeFromNow(date){if(moment().diff(date,'seconds')<45){return _t("now");}
return date.fromNow();}
return{addLink:addLink,getTextToHTML:getTextToHTML,htmlToTextContentInline,inline:inline,linkify:linkify,parseAndTransform:parseAndTransform,parseEmail:parseEmail,stripHTML:stripHTML,timeFromNow:timeFromNow,escapeAndCompactTextContent,};});;

/* /website_livechat/static/src/bugfix/public_bugfix.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_livechat/static/src/bugfix/bugfix.js',function(require){'use strict';});;

/* /im_livechat/static/src/legacy/public_livechat.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('im_livechat.legacy.im_livechat.im_livechat',function(require){"use strict";require('bus.BusService');var concurrency=require('web.concurrency');var config=require('web.config');var core=require('web.core');var session=require('web.session');var time=require('web.time');var utils=require('web.utils');var Widget=require('web.Widget');var WebsiteLivechat=require('im_livechat.legacy.im_livechat.model.WebsiteLivechat');var WebsiteLivechatMessage=require('im_livechat.legacy.im_livechat.model.WebsiteLivechatMessage');var WebsiteLivechatWindow=require('im_livechat.legacy.im_livechat.WebsiteLivechatWindow');var _t=core._t;var QWeb=core.qweb;var LIVECHAT_COOKIE_HISTORY='im_livechat_history';var HISTORY_LIMIT=15;var RATING_TO_EMOJI={"5":"","3":"","1":""};var page=window.location.href.replace(/^.*\/\/[^/]+/,'');var pageHistory=utils.get_cookie(LIVECHAT_COOKIE_HISTORY);var urlHistory=[];if(pageHistory){urlHistory=JSON.parse(pageHistory)||[];}
if(!_.contains(urlHistory,page)){urlHistory.push(page);while(urlHistory.length>HISTORY_LIMIT){urlHistory.shift();}
utils.set_cookie(LIVECHAT_COOKIE_HISTORY,JSON.stringify(urlHistory),60*60*24);}
var LivechatButton=Widget.extend({className:'openerp o_livechat_button d-print-none',custom_events:{'close_chat_window':'_onCloseChatWindow','post_message_chat_window':'_onPostMessageChatWindow','save_chat_window':'_onSaveChatWindow','updated_typing_partners':'_onUpdatedTypingPartners','updated_unread_counter':'_onUpdatedUnreadCounter',},events:{'click':'_openChat'},init:function(parent,serverURL,options){this._super(parent);this.options=_.defaults(options||{},{input_placeholder:_t("Ask something ..."),default_username:_t("Visitor"),button_text:_t("Chat with one of our collaborators"),default_message:_t("How may I help you?"),});this._history=null;this._livechat=null;this._chatWindow=null;this._messages=[];this._serverURL=serverURL;},willStart:function(){var self=this;var cookie=utils.get_cookie('im_livechat_session');var ready;if(!cookie){ready=session.rpc('/im_livechat/init',{channel_id:this.options.channel_id}).then(function(result){if(!result.available_for_me){return Promise.reject();}
self._rule=result.rule;});}else{var channel=JSON.parse(cookie);ready=session.rpc('/mail/chat_history',{uuid:channel.uuid,limit:100}).then(function(history){self._history=history;});}
return ready.then(this._loadQWebTemplate.bind(this));},start:function(){this.$el.text(this.options.button_text);if(this._history){_.each(this._history.reverse(),this._addMessage.bind(this));this._openChat();}else if(!config.device.isMobile&&this._rule.action==='auto_popup'){var autoPopupCookie=utils.get_cookie('im_livechat_auto_popup');if(!autoPopupCookie||JSON.parse(autoPopupCookie)){this._autoPopupTimeout=setTimeout(this._openChat.bind(this),this._rule.auto_popup_timer*1000);}}
this.call('bus_service','onNotification',this,this._onNotification);if(this.options.button_background_color){this.$el.css('background-color',this.options.button_background_color);}
if(this.options.button_text_color){this.$el.css('color',this.options.button_text_color);}
var pwaBannerHeight=$('.o_pwa_install_banner').outerHeight(true);if(pwaBannerHeight){this.$el.css('bottom',pwaBannerHeight+'px');}
return this._super();},_addMessage:function(data,options){options=_.extend({},this.options,options,{serverURL:this._serverURL,});var message=new WebsiteLivechatMessage(this,data,options);var hasAlreadyMessage=_.some(this._messages,function(msg){return message.getID()===msg.getID();});if(hasAlreadyMessage){return;}
if(this._livechat){this._livechat.addMessage(message);}
if(options&&options.prepend){this._messages.unshift(message);}else{this._messages.push(message);}},_askFeedback:function(){this._chatWindow.$('.o_thread_composer input').prop('disabled',true);var feedback=new Feedback(this,this._livechat);this._chatWindow.replaceContentWith(feedback);feedback.on('send_message',this,this._sendMessage);feedback.on('feedback_sent',this,this._closeChat);},_closeChat:function(){this._chatWindow.destroy();utils.set_cookie('im_livechat_session',"",-1);},_handleNotification:function(notification){const[livechatUUID,notificationData]=notification;if(this._livechat&&(livechatUUID===this._livechat.getUUID())){if(notificationData._type==='history_command'){const cookie=utils.get_cookie(LIVECHAT_COOKIE_HISTORY);const history=cookie?JSON.parse(cookie):[];session.rpc('/im_livechat/history',{pid:this._livechat.getOperatorPID()[0],channel_uuid:this._livechat.getUUID(),page_history:history,});}else if(notificationData.info==='typing_status'){const partnerID=notificationData.partner_id;if(partnerID===this.options.current_partner_id){return;}
if(notificationData.is_typing){this._livechat.registerTyping({partnerID});}else{this._livechat.unregisterTyping({partnerID});}}else if('body'in notificationData){if(this._messages.some(message=>message.getID()===notificationData.id)){return;}
this._addMessage(notificationData);if(this._chatWindow.isFolded()||!this._chatWindow.isAtBottom()){this._livechat.incrementUnreadCounter();}
this._renderMessages();}}},_loadQWebTemplate:function(){return session.rpc('/im_livechat/load_templates').then(function(templates){_.each(templates,function(template){QWeb.add_template(template);});});},_openChat:_.debounce(function(){if(this._openingChat){return;}
var self=this;var cookie=utils.get_cookie('im_livechat_session');var def;this._openingChat=true;clearTimeout(this._autoPopupTimeout);if(cookie){def=Promise.resolve(JSON.parse(cookie));}else{this._messages=[];def=session.rpc('/im_livechat/get_session',{channel_id:this.options.channel_id,anonymous_name:this.options.default_username,previous_operator_id:this._get_previous_operator_id(),},{shadow:true});}
def.then(function(livechatData){if(!livechatData||!livechatData.operator_pid){try{self.displayNotification({message:_t("No available collaborator, please try again later."),sticky:true,});}catch(err){console.warn(_t("No available collaborator, please try again later."));}}else{self._livechat=new WebsiteLivechat({parent:self,data:livechatData});return self._openChatWindow().then(function(){if(!self._history){self._sendWelcomeMessage();}
self._renderMessages();self.call('bus_service','addChannel',self._livechat.getUUID());self.call('bus_service','startPolling');utils.set_cookie('im_livechat_session',utils.unaccent(JSON.stringify(self._livechat.toData())),60*60);utils.set_cookie('im_livechat_auto_popup',JSON.stringify(false),60*60);if(livechatData.operator_pid[0]){var operatorPidId=livechatData.operator_pid[0];var oneWeek=7*24*60*60;utils.set_cookie('im_livechat_previous_operator_pid',operatorPidId,oneWeek);}});}}).then(function(){self._openingChat=false;}).guardedCatch(function(){self._openingChat=false;});},200,true),_get_previous_operator_id:function(){var cookie=utils.get_cookie('im_livechat_previous_operator_pid');if(cookie){return cookie;}
return null;},_openChatWindow:function(){var self=this;var options={displayStars:false,headerBackgroundColor:this.options.header_background_color,placeholder:this.options.input_placeholder||"",titleColor:this.options.title_color,};this._chatWindow=new WebsiteLivechatWindow(this,this._livechat,options);return this._chatWindow.appendTo($('body')).then(function(){var cssProps={bottom:0};cssProps[_t.database.parameters.direction==='rtl'?'left':'right']=0;self._chatWindow.$el.css(cssProps);self.$el.hide();});},_renderMessages:function(){var shouldScroll=!this._chatWindow.isFolded()&&this._chatWindow.isAtBottom();this._livechat.setMessages(this._messages);this._chatWindow.render();if(shouldScroll){this._chatWindow.scrollToBottom();}},_sendMessage:function(message){var self=this;this._livechat._notifyMyselfTyping({typing:false});return session.rpc('/mail/chat_post',{uuid:this._livechat.getUUID(),message_content:message.content}).then(function(messageId){if(!messageId){try{self.displayNotification({message:_t("Session expired... Please refresh and try again."),sticky:true,});}catch(err){console.warn(_t("Session expired... Please refresh and try again."));}
self._closeChat();}
self._chatWindow.scrollToBottom();});},_sendWelcomeMessage:function(){if(this.options.default_message){this._addMessage({id:'_welcome',attachment_ids:[],author_id:this._livechat.getOperatorPID(),body:this.options.default_message,channel_ids:[this._livechat.getID()],date:time.datetime_to_str(new Date()),},{prepend:true});}},_onCloseChatWindow:function(ev){ev.stopPropagation();var isComposerDisabled=this._chatWindow.$('.o_thread_composer input').prop('disabled');var shouldAskFeedback=!isComposerDisabled&&_.find(this._messages,function(message){return message.getID()!=='_welcome';});if(shouldAskFeedback){this._chatWindow.toggleFold(false);this._askFeedback();}else{this._closeChat();}},_onNotification:function(notifications){var self=this;_.each(notifications,function(notification){self._handleNotification(notification);});},_onPostMessageChatWindow:function(ev){ev.stopPropagation();var self=this;var messageData=ev.data.messageData;this._sendMessage(messageData).guardedCatch(function(reason){reason.event.preventDefault();return self._sendMessage(messageData);});},_onSaveChatWindow:function(ev){ev.stopPropagation();utils.set_cookie('im_livechat_session',utils.unaccent(JSON.stringify(this._livechat.toData())),60*60);},_onUpdatedTypingPartners(ev){ev.stopPropagation();this._chatWindow.renderHeader();},_onUpdatedUnreadCounter:function(ev){ev.stopPropagation();this._chatWindow.renderHeader();},});var Feedback=Widget.extend({template:'im_livechat.legacy.im_livechat.FeedBack',events:{'click .o_livechat_rating_choices img':'_onClickSmiley','click .o_livechat_no_feedback span':'_onClickNoFeedback','click .o_rating_submit_button':'_onClickSend','click .o_email_chat_button':'_onEmailChat','click .o_livechat_email_error .alert-link':'_onTryAgain',},init:function(parent,livechat){this._super(parent);this._livechat=livechat;this.server_origin=session.origin;this.rating=undefined;this.dp=new concurrency.DropPrevious();},_sendFeedback:function(reason){var self=this;var args={uuid:this._livechat.getUUID(),rate:this.rating,reason:reason,};this.dp.add(session.rpc('/im_livechat/feedback',args)).then(function(){var emoji=RATING_TO_EMOJI[self.rating]||"??";var content=_.str.sprintf(_t("Rating: %s"),emoji);if(reason){content+=" \n"+reason;}
self.trigger('send_message',{content:content,isFeedback:true});});},_showThanksMessage:function(){this.$('.o_livechat_rating_box').empty().append($('<div />',{text:_t('Thank you for your feedback'),class:'text-muted'}));},_onClickNoFeedback:function(){this.trigger('feedback_sent');},_onClickSend:function(){this.$('.o_livechat_rating_reason').hide();this._showThanksMessage();if(_.isNumber(this.rating)){this._sendFeedback(this.$('textarea').val());}},_onClickSmiley:function(ev){this.rating=parseInt($(ev.currentTarget).data('value'));this.$('.o_livechat_rating_choices img').removeClass('selected');this.$('.o_livechat_rating_choices img[data-value="'+this.rating+'"]').addClass('selected');if(this.rating!==5){this.$('.o_livechat_rating_reason').show();}else{this.$('.o_livechat_rating_reason').hide();this._showThanksMessage();this._sendFeedback();}},_onEmailChat:function(){var self=this;var $email=this.$('#o_email');if(utils.is_email($email.val())){$email.removeAttr('title').removeClass('is-invalid').prop('disabled',true);this.$('.o_email_chat_button').prop('disabled',true);this._rpc({route:'/im_livechat/email_livechat_transcript',params:{uuid:this._livechat.getUUID(),email:$email.val(),}}).then(function(){self.$('.o_livechat_email').html($('<strong />',{text:_t('Conversation Sent')}));}).guardedCatch(function(){self.$('.o_livechat_email').hide();self.$('.o_livechat_email_error').show();});}else{$email.addClass('is-invalid').prop('title',_t('Invalid email address'));}},_onTryAgain:function(){this.$('#o_email').prop('disabled',false);this.$('.o_email_chat_button').prop('disabled',false);this.$('.o_livechat_email_error').hide();this.$('.o_livechat_email').show();},});return{LivechatButton:LivechatButton,Feedback:Feedback,};});odoo.define('im_livechat.legacy.im_livechat.model.WebsiteLivechat',function(require){"use strict";var AbstractThread=require('im_livechat.legacy.mail.model.AbstractThread');var ThreadTypingMixin=require('im_livechat.legacy.mail.model.ThreadTypingMixin');var session=require('web.session');var WebsiteLivechat=AbstractThread.extend(ThreadTypingMixin,{init:function(params){this._super.apply(this,arguments);ThreadTypingMixin.init.call(this,arguments);this._members=[];this._operatorPID=params.data.operator_pid;this._uuid=params.data.uuid;if(params.data.message_unread_counter!==undefined){this._unreadCounter=params.data.message_unread_counter;}
if(_.isBoolean(params.data.folded)){this._folded=params.data.folded;}else{this._folded=params.data.state==='folded';}
this._members.push({id:this._operatorPID[0],name:this._operatorPID[1]});},getMessages:function(){return this._messages;},getOperatorPID:function(){return this._operatorPID;},getUUID:function(){return this._uuid;},incrementUnreadCounter:function(){this._incrementUnreadCounter();},setMessages:function(messages){this._messages=messages;},toData:function(){return{folded:this.isFolded(),id:this.getID(),message_unread_counter:this.getUnreadCounter(),operator_pid:this.getOperatorPID(),name:this.getName(),uuid:this.getUUID(),};},_isTypingMyselfInfo:function(params){return params.isWebsiteUser;},_notifyMyselfTyping:function(params){return session.rpc('/im_livechat/notify_typing',{uuid:this.getUUID(),is_typing:params.typing,},{shadow:true});},_warnUpdatedTypingPartners:function(){this.trigger_up('updated_typing_partners');},_warnUpdatedUnreadCounter:function(){this.trigger_up('updated_unread_counter');},_onTypingMessageAdded:function(message){var operatorID=this.getOperatorPID()[0];if(message.hasAuthor()&&message.getAuthorID()===operatorID){this.unregisterTyping({partnerID:operatorID});}},});return WebsiteLivechat;});odoo.define('im_livechat.legacy.im_livechat.model.WebsiteLivechatMessage',function(require){"use strict";var AbstractMessage=require('im_livechat.legacy.mail.model.AbstractMessage');var WebsiteLivechatMessage=AbstractMessage.extend({init:function(parent,data,options){this._super.apply(this,arguments);this._defaultUsername=options.default_username;this._serverURL=options.serverURL;},getAvatarSource:function(){var source=this._serverURL;if(this.hasAuthor()){source+='/web/partner_image/'+this.getAuthorID();}else{source+='/mail/static/src/img/smiley/avatar.jpg';}
return source;},getDisplayedAuthor:function(){return this._super.apply(this,arguments)||this._defaultUsername;},});return WebsiteLivechatMessage;});odoo.define('im_livechat.legacy.im_livechat.WebsiteLivechatWindow',function(require){"use strict";var AbstractThreadWindow=require('im_livechat.legacy.mail.AbstractThreadWindow');var LivechatWindow=AbstractThreadWindow.extend({events:_.extend(AbstractThreadWindow.prototype.events,{'input .o_composer_text_field':'_onInput',}),init(parent,thread,options={}){this._super.apply(this,arguments);this._thread=thread;},async start(){await this._super(...arguments);if(this.options.headerBackgroundColor){this.$('.o_thread_window_header').css('background-color',this.options.headerBackgroundColor);}
if(this.options.titleColor){this.$('.o_thread_window_header').css('color',this.options.titleColor);}},close:function(){this.trigger_up('close_chat_window');},replaceContentWith:function($element){$element.replace(this._threadWidget.$el);},toggleFold:function(){this._super.apply(this,arguments);this.trigger_up('save_chat_window');this.updateVisualFoldState();},_postMessage:function(messageData){this.trigger_up('post_message_chat_window',{messageData:messageData});this._super.apply(this,arguments);},_onInput:function(){if(this.hasThread()&&this._thread.hasTypingNotification()){var isTyping=this.$input.val().length>0;this._thread.setMyselfTyping({typing:isTyping});}},});return LivechatWindow;});odoo.define('im_livechat.legacy.mail.model.AbstractThread',function(require){"use strict";var Class=require('web.Class');var Mixins=require('web.mixins');var AbstractThread=Class.extend(Mixins.EventDispatcherMixin,{init:function(params){Mixins.EventDispatcherMixin.init.call(this,arguments);this.setParent(params.parent);this._folded=false;this._id=params.data.id;this._name=params.data.name;this._status=params.data.status||'';this._unreadCounter=0;},addMessage:function(message){this._addMessage.apply(this,arguments);this.trigger('message_added',message);},fold:function(folded){this._folded=folded;},getID:function(){return this._id;},getMessages:function(){},getName:function(){return this._name;},getStatus:function(){return this._status;},getTitle:function(){return this.getName();},getType:function(){},getUnreadCounter:function(){return this._unreadCounter;},hasMessages:function(){return!_.isEmpty(this.getMessages());},hasSeenFeature:function(){return false;},isFolded:function(){return this._folded;},markAsRead:function(){if(this._unreadCounter>0){return this._markAsRead();}
return Promise.resolve();},postMessage:function(){return this._postMessage.apply(this,arguments).then(this.trigger.bind(this,'message_posted'));},resetUnreadCounter:function(){this._unreadCounter=0;this._warnUpdatedUnreadCounter();},_addMessage:function(message){},_incrementUnreadCounter:function(){this._unreadCounter++;},_markAsRead:function(){this.resetUnreadCounter();return Promise.resolve();},_postMessage:function(){return Promise.resolve();},_warnUpdatedUnreadCounter:function(){},});return AbstractThread;});odoo.define('im_livechat.legacy.mail.model.ThreadTypingMixin',function(require){"use strict";var CCThrottleFunction=require('im_livechat.legacy.mail.model.CCThrottleFunction');var Timer=require('im_livechat.legacy.mail.model.Timer');var Timers=require('im_livechat.legacy.mail.model.Timers');var core=require('web.core');var _t=core._t;var ThreadTypingMixin={_DEFAULT_TYPING_PARTNER_ID:'_default',_DEFAULT_TYPING_PARTNER_NAME:'Someone',init:function(){this._lastNotifiedMyselfTyping=false;this._myselfLongTypingTimer=new Timer({duration:50*1000,onTimeout:this._onMyselfLongTypingTimeout.bind(this),});this._myselfTypingInactivityTimer=new Timer({duration:5*1000,onTimeout:this._onMyselfTypingInactivityTimeout.bind(this),});this._othersTypingTimers=new Timers({duration:60*1000,onTimeout:this._onOthersTypingTimeout.bind(this),});this._throttleNotifyMyselfTyping=CCThrottleFunction({duration:2.5*1000,func:this._onNotifyMyselfTyping.bind(this),});this._typingPartnerIDs=[];this.on('message_added',this,this._onTypingMessageAdded);this.on('message_posted',this,this._onTypingMessagePosted);},getTypingMembersToText:function(){var typingPartnerIDs=this._typingPartnerIDs;var typingMembers=_.filter(this._members,function(member){return _.contains(typingPartnerIDs,member.id);});var sortedTypingMembers=_.sortBy(typingMembers,function(member){return _.indexOf(typingPartnerIDs,member.id);});var displayableTypingMembers=sortedTypingMembers.slice(0,3);if(displayableTypingMembers.length===0){return'';}else if(displayableTypingMembers.length===1){return _.str.sprintf(_t("%s is typing..."),displayableTypingMembers[0].name);}else if(displayableTypingMembers.length===2){return _.str.sprintf(_t("%s and %s are typing..."),displayableTypingMembers[0].name,displayableTypingMembers[1].name);}else{return _.str.sprintf(_t("%s, %s and more are typing..."),displayableTypingMembers[0].name,displayableTypingMembers[1].name);}},hasTypingNotification:function(){return true;},isSomeoneTyping:function(){return!(_.isEmpty(this._typingPartnerIDs));},registerTyping:function(params){if(this._isTypingMyselfInfo(params)){return;}
var partnerID=params.partnerID;this._othersTypingTimers.registerTimer({timeoutCallbackArguments:[partnerID],timerID:partnerID,});if(_.contains(this._typingPartnerIDs,partnerID)){return;}
this._typingPartnerIDs.push(partnerID);this._warnUpdatedTypingPartners();},setMyselfTyping:function(params){var typing=params.typing;if(this._lastNotifiedMyselfTyping===typing){this._throttleNotifyMyselfTyping.cancel();}else{this._throttleNotifyMyselfTyping(params);}
if(typing){this._myselfTypingInactivityTimer.reset();}else{this._myselfTypingInactivityTimer.clear();}},unregisterTyping:function(params){var partnerID=params.partnerID;this._othersTypingTimers.unregisterTimer({timerID:partnerID});if(!_.contains(this._typingPartnerIDs,partnerID)){return;}
this._typingPartnerIDs=_.reject(this._typingPartnerIDs,function(id){return id===partnerID;});this._warnUpdatedTypingPartners();},_isTypingMyselfInfo:function(params){return false;},_notifyMyselfTyping:function(params){return Promise.resolve();},_warnUpdatedTypingPartners:function(){},_onMyselfLongTypingTimeout:function(){this._throttleNotifyMyselfTyping.clear();this._throttleNotifyMyselfTyping({typing:true});},_onMyselfTypingInactivityTimeout:function(){this._throttleNotifyMyselfTyping.clear();this._throttleNotifyMyselfTyping({typing:false});},_onNotifyMyselfTyping:function(params){var typing=params.typing;this._lastNotifiedMyselfTyping=typing;this._notifyMyselfTyping(params);if(typing){this._myselfLongTypingTimer.reset();}else{this._myselfLongTypingTimer.clear();}},_onOthersTypingTimeout:function(partnerID){this.unregisterTyping({partnerID:partnerID});},_onTypingMessageAdded:function(message){var partnerID=message.hasAuthor()?message.getAuthorID():this._DEFAULT_TYPING_PARTNER_ID;this.unregisterTyping({partnerID:partnerID});},_onTypingMessagePosted:function(){this._lastNotifiedMyselfTyping=false;this._throttleNotifyMyselfTyping.clear();this._myselfLongTypingTimer.clear();this._myselfTypingInactivityTimer.clear();},};return ThreadTypingMixin;});odoo.define('im_livechat.legacy.mail.model.AbstractMessage',function(require){"use strict";var mailUtils=require('mail.utils');var Class=require('web.Class');var core=require('web.core');var session=require('web.session');var time=require('web.time');var _t=core._t;var AbstractMessage=Class.extend({init:function(parent,data){this._attachmentIDs=data.attachment_ids||[];this._body=data.body||"";this._date=data.date?moment(time.str_to_datetime(data.date)):moment();this._id=data.id;this._isDiscussion=data.is_discussion;this._isNotification=data.is_notification;this._serverAuthorID=data.author_id;this._type=data.message_type||undefined;this._processAttachmentURL();this._attachmentIDs.forEach(function(attachment){attachment.filename=attachment.filename||attachment.name||_t("unnamed");});},getAttachments:function(){return this._attachmentIDs;},getAuthorID:function(){if(!this.hasAuthor()){return-1;}
return this._serverAuthorID[0];},getAuthorImStatus:function(){return undefined;},getAvatarSource:function(){if(this.hasAuthor()){return'/web/image/res.partner/'+this.getAuthorID()+'/image_128';}},getBody:function(){return this._body;},getDate:function(){return this._date;},getDateDay:function(){var date=this.getDate().format('YYYY-MM-DD');if(date===moment().format('YYYY-MM-DD')){return _t("Today");}else if(date===moment().subtract(1,'days').format('YYYY-MM-DD')){return _t("Yesterday");}
return this.getDate().format('LL');},getDisplayedAuthor:function(){return this.hasAuthor()?this._getAuthorName():null;},getID:function(){return this._id;},getImageAttachments:function(){return _.filter(this.getAttachments(),function(attachment){return attachment.mimetype&&attachment.mimetype.split('/')[0]==='image';});},getNonImageAttachments:function(){return _.difference(this.getAttachments(),this.getImageAttachments());},getNotificationIcon(){if(!this.hasNotificationsError()){return'fa fa-envelope-o';}
return'fa fa-envelope';},getNotifications(){return[];},getNotificationText(){return'';},getTimeElapsed:function(){return mailUtils.timeFromNow(this.getDate());},getType:function(){return this._type;},hasAttachments:function(){return this.getAttachments().length>0;},hasAuthor:function(){return!!(this._serverAuthorID&&this._serverAuthorID[0]);},hasEmailFrom:function(){return false;},hasImageAttachments:function(){return _.some(this.getAttachments(),function(attachment){return attachment.mimetype&&attachment.mimetype.split('/')[0]==='image';});},hasNonImageAttachments:function(){return _.some(this.getAttachments(),function(attachment){return!(attachment.mimetype&&attachment.mimetype.split('/')[0]==='image');});},hasNotifications(){return this.getNotifications().length>0;},hasNotificationsError(){return this.getNotifications().some(notif=>notif.notification_status==='exception'||notif.notification_status==='bounce');},originatesFromChannel:function(){return false;},hasSubject:function(){return false;},isEmpty:function(){return!this.hasTrackingValues()&&!this.hasAttachments()&&!this.getBody();},hasSubtypeDescription:function(){return false;},hasTrackingValues:function(){return false;},isDiscussion:function(){return this._isDiscussion;},isLinkedToDocumentThread:function(){return false;},isNeedaction:function(){return false;},isNote:function(){return this._isNote;},isNotification:function(){return this._isNotification;},isStarred:function(){return false;},isSystemNotification:function(){return false;},needsModeration:function(){return false;},removeAttachments:function(attachmentIDs){this._attachmentIDs=_.reject(this._attachmentIDs,function(attachment){return _.contains(attachmentIDs,attachment.id);});},shouldRedirectToAuthor:function(){return!this._isMyselfAuthor();},_getAuthorName:function(){if(!this.hasAuthor()){return"";}
return this._serverAuthorID[1];},_isMyselfAuthor:function(){return this.hasAuthor()&&(this.getAuthorID()===session.partner_id);},_processAttachmentURL:function(){_.each(this.getAttachments(),function(attachment){attachment.url='/web/content/'+attachment.id+'?download=true';});},});return AbstractMessage;});odoo.define('im_livechat.legacy.mail.AbstractThreadWindow',function(require){"use strict";var ThreadWidget=require('im_livechat.legacy.mail.widget.Thread');var config=require('web.config');var core=require('web.core');var Widget=require('web.Widget');var QWeb=core.qweb;var _t=core._t;var AbstractThreadWindow=Widget.extend({template:'im_livechat.legacy.mail.AbstractThreadWindow',custom_events:{document_viewer_closed:'_onDocumentViewerClose',},events:{'click .o_thread_window_close':'_onClickClose','click .o_thread_window_title':'_onClickFold','click .o_composer_text_field':'_onComposerClick','click .o_mail_thread':'_onThreadWindowClicked','keydown .o_composer_text_field':'_onKeydown','keypress .o_composer_text_field':'_onKeypress',},FOLD_ANIMATION_DURATION:200,HEIGHT_OPEN:'400px',HEIGHT_FOLDED:'34px',init:function(parent,thread,options){this._super(parent);this.options=_.defaults(options||{},{autofocus:true,displayStars:true,displayReplyIcons:false,displayNotificationIcons:false,placeholder:_t("Say something"),});this._hidden=false;this._thread=thread||null;this._debouncedOnScroll=_.debounce(this._onScroll.bind(this),100);if(!this.hasThread()){this._folded=false;}},start:function(){var self=this;this.$input=this.$('.o_composer_text_field');this.$header=this.$('.o_thread_window_header');var options={displayMarkAsRead:false,displayStars:this.options.displayStars,};if(this._thread&&this._thread._type==='document_thread'){options.displayDocumentLinks=false;}
this._threadWidget=new ThreadWidget(this,options);this.$el.css({transition:'height '+this.FOLD_ANIMATION_DURATION+'ms linear'});if(this.isFolded()){this.$el.css('height',this.HEIGHT_FOLDED);}else if(this.options.autofocus){this._focusInput();}
if(!config.device.isMobile){var margin_dir=_t.database.parameters.direction==="rtl"?"margin-left":"margin-right";this.$el.css(margin_dir,$.position.scrollbarWidth());}
var def=this._threadWidget.replace(this.$('.o_thread_window_content')).then(function(){self._threadWidget.$el.on('scroll',self,self._debouncedOnScroll);});return Promise.all([this._super(),def]);},do_hide:function(){this._hidden=true;this._super.apply(this,arguments);},do_show:function(){this._hidden=false;this._super.apply(this,arguments);},do_toggle:function(display){this._hidden=_.isBoolean(display)?!display:!this._hidden;this._super.apply(this,arguments);},close:function(){},getID:function(){return this._getThreadID();},getThread:function(){if(!this.hasThread()){return undefined;}
return this._thread;},getThreadStatus:function(){if(!this.hasThread()){return undefined;}
return this._thread.getStatus();},getTitle:function(){if(!this.hasThread()){return _t("Undefined");}
return this._thread.getTitle();},getUnreadCounter:function(){if(!this.hasThread()){return 0;}
return this._thread.getUnreadCounter();},hasThread:function(){return!!this._thread;},isAtBottom:function(){return this._threadWidget.isAtBottom();},isFolded:function(){if(!this.hasThread()){return this._folded;}
return this._thread.isFolded();},isMobile:function(){return config.device.isMobile;},isHidden:function(){return this._hidden;},needsComposer:function(){return this.hasThread();},render:function(){this.renderHeader();if(this.hasThread()){this._threadWidget.render(this._thread,{displayLoadMore:false});}},renderHeader:function(){var options=this._getHeaderRenderingOptions();this.$header.html(QWeb.render('im_livechat.legacy.mail.AbstractThreadWindow.HeaderContent',options));},scrollToBottom:function(){this._threadWidget.scrollToBottom();},toggleFold:function(folded){if(!_.isBoolean(folded)){folded=!this.isFolded();}
this._updateThreadFoldState(folded);},updateVisualFoldState:function(){if(!this.isFolded()){this._threadWidget.scrollToBottom();if(this.options.autofocus){this._focusInput();}}
var height=this.isFolded()?this.HEIGHT_FOLDED:this.HEIGHT_OPEN;this.$el.css({height:height});},_focusInput:function(){if(config.device.touch&&config.device.size_class<=config.device.SIZES.SM){return;}
this.$input.focus();},_getHeaderRenderingOptions:function(){return{status:this.getThreadStatus(),thread:this.getThread(),title:this.getTitle(),unreadCounter:this.getUnreadCounter(),widget:this,};},_getThreadID:function(){if(!this.hasThread()){return'_blank';}
return this._thread.getID();},_hasFocus:function(){return this.$input.is(':focus');},_postMessage:function(messageData){var self=this;if(!this.hasThread()){return;}
this._thread.postMessage(messageData).then(function(){self._threadWidget.scrollToBottom();});},_updateThreadFoldState:function(folded){if(this.hasThread()){this._thread.fold(folded);}else{this._folded=folded;this.updateVisualFoldState();}},_onClickClose:function(ev){ev.stopPropagation();ev.preventDefault();if(this.hasThread()&&this._thread.getUnreadCounter()>0&&!this.isFolded()){this._thread.markAsRead();}
this.close();},_onClickFold:function(){if(!config.device.isMobile){this.toggleFold();}},_onComposerClick:function(ev){if($(ev.target).closest('a, button').length){return;}
this._focusInput();},_onDocumentViewerClose:function(){this._focusInput();},_onKeydown:function(ev){ev.stopPropagation();if(ev.which===13){var content=_.str.trim(this.$input.val());var messageData={content:content,attachment_ids:[],partner_ids:[],};this.$input.val('');if(content){this._postMessage(messageData);}}},_onKeypress:function(ev){ev.stopPropagation();},_onScroll:function(){if(this.hasThread()&&this.isAtBottom()){this._thread.markAsRead();}},_onThreadWindowClicked:function(){var selectObj=window.getSelection();if(selectObj.anchorOffset===selectObj.focusOffset){this.$input.focus();}},});return AbstractThreadWindow;});odoo.define('im_livechat.legacy.mail.model.CCThrottleFunctionObject',function(require){"use strict";var Class=require('web.Class');var CCThrottleFunctionObject=Class.extend({init:function(params){this._arguments=undefined;this._cooldownTimeout=undefined;this._duration=params.duration;this._func=params.func;this._shouldCallFunctionAfterCD=false;},cancel:function(){this._arguments=undefined;this._shouldCallFunctionAfterCD=false;},clear:function(){if(this._cooldownTimeout){clearTimeout(this._cooldownTimeout);this._onCooldownTimeout();}},do:function(){this._arguments=Array.prototype.slice.call(arguments);if(this._cooldownTimeout===undefined){this._callFunction();}else{this._shouldCallFunctionAfterCD=true;}},_callFunction:function(){this._func.apply(null,this._arguments);this._cooldown();},_cooldown:function(){this.cancel();this._cooldownTimeout=setTimeout(this._onCooldownTimeout.bind(this),this._duration);},_onCooldownTimeout:function(){if(this._shouldCallFunctionAfterCD){this._callFunction();}else{this._cooldownTimeout=undefined;}},});return CCThrottleFunctionObject;});odoo.define('im_livechat.legacy.mail.model.CCThrottleFunction',function(require){"use strict";var CCThrottleFunctionObject=require('im_livechat.legacy.mail.model.CCThrottleFunctionObject');var CCThrottleFunction=function(params){var duration=params.duration;var func=params.func;var throttleFunctionObject=new CCThrottleFunctionObject({duration:duration,func:func,});var callable=function(){return throttleFunctionObject.do.apply(throttleFunctionObject,arguments);};callable.cancel=function(){throttleFunctionObject.cancel();};callable.clear=function(){throttleFunctionObject.clear();};return callable;};return CCThrottleFunction;});odoo.define('im_livechat.legacy.mail.model.Timer',function(require){"use strict";var Class=require('web.Class');var Timer=Class.extend({init:function(params){this._duration=params.duration;this._timeout=undefined;this._timeoutCallback=params.onTimeout;},clear:function(){clearTimeout(this._timeout);},reset:function(){this.clear();this.start();},start:function(){this._timeout=setTimeout(this._onTimeout.bind(this),this._duration);},_onTimeout:function(){this._timeoutCallback();},});return Timer;});odoo.define('im_livechat.legacy.mail.model.Timers',function(require){"use strict";var Timer=require('im_livechat.legacy.mail.model.Timer');var Class=require('web.Class');var Timers=Class.extend({init:function(params){this._duration=params.duration;this._timeoutCallback=params.onTimeout;this._timers={};},registerTimer:function(params){var timerID=params.timerID;if(this._timers[timerID]){this._timers[timerID].clear();}
var timerParams={duration:this._duration,onTimeout:this._timeoutCallback,};if('timeoutCallbackArguments'in params){timerParams.onTimeout=this._timeoutCallback.bind.apply(this._timeoutCallback,[null].concat(params.timeoutCallbackArguments));}else{timerParams.onTimeout=this._timeoutCallback;}
this._timers[timerID]=new Timer(timerParams);this._timers[timerID].start();},unregisterTimer:function(params){var timerID=params.timerID;if(this._timers[timerID]){this._timers[timerID].clear();delete this._timers[timerID];}},});return Timers;});odoo.define('im_livechat.legacy.mail.widget.Thread',function(require){"use strict";var DocumentViewer=require('im_livechat.legacy.mail.DocumentViewer');var mailUtils=require('mail.utils');var core=require('web.core');var time=require('web.time');var Widget=require('web.Widget');var QWeb=core.qweb;var _lt=core._lt;var ORDER={ASC:1,DESC:-1,};var READ_MORE=_lt("read more");var READ_LESS=_lt("read less");var ThreadWidget=Widget.extend({className:'o_mail_thread',events:{'click a':'_onClickRedirect','click img':'_onClickRedirect','click strong':'_onClickRedirect','click .o_thread_show_more':'_onClickShowMore','click .o_attachment_download':'_onAttachmentDownload','click .o_attachment_view':'_onAttachmentView','click .o_attachment_delete_cross':'_onDeleteAttachment','click .o_thread_message_needaction':'_onClickMessageNeedaction','click .o_thread_message_star':'_onClickMessageStar','click .o_thread_message_reply':'_onClickMessageReply','click .oe_mail_expand':'_onClickMailExpand','click .o_thread_message':'_onClickMessage','click':'_onClick','click .o_thread_message_notification_error':'_onClickMessageNotificationError','click .o_thread_message_moderation':'_onClickMessageModeration','change .moderation_checkbox':'_onChangeModerationCheckbox',},init:function(parent,options){this._super.apply(this,arguments);this.attachments=[];this._enabledOptions=_.defaults(options||{},{displayOrder:ORDER.ASC,displayMarkAsRead:true,displayModerationCommands:false,displayStars:true,displayDocumentLinks:true,displayAvatars:true,squashCloseMessages:true,displayNotificationIcons:true,displayReplyIcons:false,loadMoreOnScroll:false,hasMessageAttachmentDeletable:false,});this._disabledOptions={displayOrder:this._enabledOptions.displayOrder,displayMarkAsRead:false,displayModerationCommands:false,displayStars:false,displayDocumentLinks:false,displayAvatars:this._enabledOptions.displayAvatars,squashCloseMessages:false,displayNotificationIcons:false,displayReplyIcons:false,loadMoreOnScroll:this._enabledOptions.loadMoreOnScroll,hasMessageAttachmentDeletable:false,};this._selectedMessageID=null;this._currentThreadID=null;this._messageMailPopover=null;this._messageSeenPopover=null;this._openedSeenPopoverIDs=[];},destroy:function(){clearInterval(this._updateTimestampsInterval);if(this._messageMailPopover){this._messageMailPopover.popover('hide');}
if(this._messageSeenPopover){this._messageSeenPopover.popover('hide');}
this._destroyOpenSeenPopoverIDs();this._super();},render:function(thread,options){var self=this;var shouldScrollToBottomAfterRendering=false;if(this._currentThreadID===thread.getID()&&this.isAtBottom()){shouldScrollToBottomAfterRendering=true;}
this._currentThreadID=thread.getID();var messages=_.clone(thread.getMessages({domain:options.domain||[]}));var modeOptions=options.isCreateMode?this._disabledOptions:this._enabledOptions;this.attachments=_.uniq(_.flatten(_.map(messages,function(message){return message.getAttachments();})));options=_.extend({},modeOptions,options,{selectedMessageID:this._selectedMessageID,});var displayAuthorMessages={};var prevMessage;_.each(messages,function(message){if(!prevMessage||(Math.abs(message.getDate().diff(prevMessage.getDate()))>60000)||prevMessage.getType()!=='comment'||message.getType()!=='comment'||(prevMessage.getAuthorID()!==message.getAuthorID())||((prevMessage.isLinkedToDocumentThread()&&message.isLinkedToDocumentThread())&&(prevMessage.getDocumentModel()!==message.getDocumentModel()||prevMessage.getDocumentID()!==message.getDocumentID()))){displayAuthorMessages[message.getID()]=true;}else{displayAuthorMessages[message.getID()]=!options.squashCloseMessages;}
prevMessage=message;});if(modeOptions.displayOrder===ORDER.DESC){messages.reverse();}
this.$el.html(QWeb.render('im_livechat.legacy.mail.widget.Thread',{thread:thread,displayAuthorMessages:displayAuthorMessages,options:options,ORDER:ORDER,dateFormat:time.getLangDatetimeFormat(),}));_.each(messages,function(message){var $message=self.$('.o_thread_message[data-message-id="'+message.getID()+'"]');$message.find('.o_mail_timestamp').data('date',message.getDate());self._insertReadMore($message);});if(shouldScrollToBottomAfterRendering){this.scrollToBottom();}
if(!this._updateTimestampsInterval){this.updateTimestampsInterval=setInterval(function(){self._updateTimestamps();},1000*60);}
this._renderMessageNotificationPopover(messages);if(thread.hasSeenFeature()){this._renderMessageSeenPopover(thread,messages);}},renderLoading:function(){this.$el.html(QWeb.render('im_livechat.legacy.mail.widget.ThreadLoading'));},getScrolltop:function(){return this.$el.scrollTop();},isAtBottom:function(){var fullHeight=this.el.scrollHeight;var topHiddenHeight=this.$el.scrollTop();var visibleHeight=this.$el.outerHeight();var bottomHiddenHeight=fullHeight-topHiddenHeight-visibleHeight;return bottomHiddenHeight<5;},removeMessageAndRender:function(messageID,thread,options){var self=this;this._currentThreadID=thread.getID();return new Promise(function(resolve,reject){self.$('.o_thread_message[data-message-id="'+messageID+'"]').fadeOut({done:function(){if(self._currentThreadID===thread.getID()){self.render(thread,options);}
resolve();},duration:200,});});},scrollToBottom:function(){this.$el.scrollTop(this.el.scrollHeight);},scrollToMessage:function(options){var $target=this.$('.o_thread_message[data-message-id="'+options.messageID+'"]');if(options.onlyIfNecessary){var delta=$target.parent().height()-$target.height();var offset=delta<0?0:delta-($target.offset().top-$target.offsetParent().offset().top);offset=-Math.min(offset,0);this.$el.scrollTo("+="+offset+"px",options.duration);}else if($target.length){this.$el.scrollTo($target);}},scrollToPosition:function(position){if(position){this.$el.scrollTop(position);}else{this.scrollToBottom();}},toggleModerationCheckboxes:function(checked){this.$('.moderation_checkbox').prop('checked',checked);},unselectMessage:function(){this.$('.o_thread_message').removeClass('o_thread_selected_message');this._selectedMessageID=null;},_destroyOpenSeenPopoverIDs:function(){_.each(this._openedSeenPopoverIDs,function(popoverID){$('#'+popoverID).remove();});this._openedSeenPopoverIDs=[];},_insertReadMore:function($element){var self=this;var groups=[];var readMoreNodes;var $children=$element.contents().filter(function(){return this.nodeType===1||this.nodeType===3&&this.nodeValue.trim();});_.each($children,function(child){var $child=$(child);if(child.nodeType===3&&$child.prevAll('[id*="stopSpelling"]').length>0){$child=$('<span>',{text:child.textContent,'data-o-mail-quote':'1',});child.parentNode.replaceChild($child[0],child);}
if($child.attr('data-o-mail-quote')||($child.get(0).nodeName==='BR'&&$child.prev('[data-o-mail-quote="1"]').length>0)){if(!readMoreNodes){readMoreNodes=[];groups.push(readMoreNodes);}
$child.hide();readMoreNodes.push($child);}else{readMoreNodes=undefined;self._insertReadMore($child);}});_.each(groups,function(group){var $readMore=$('<a>',{class:'o_mail_read_more',href:'#',text:READ_MORE,}).insertBefore(group[0]);var isReadMore=true;$readMore.click(function(e){e.preventDefault();isReadMore=!isReadMore;_.each(group,function($child){$child.hide();$child.toggle(!isReadMore);});$readMore.text(isReadMore?READ_MORE:READ_LESS);});});},_onDeleteAttachment:function(ev){ev.stopPropagation();var $target=$(ev.currentTarget);this.trigger_up('delete_attachment',{attachmentId:$target.data('id'),attachmentName:$target.data('name')});},_redirect:_.debounce(function(options){if('channelID'in options){this.trigger('redirect_to_channel',options.channelID);}else{this.trigger('redirect',options.model,options.id);}},500,true),_renderMessageNotificationPopover(messages){if(this._messageMailPopover){this._messageMailPopover.popover('hide');}
if(!this.$('.o_thread_tooltip').length){return;}
this._messageMailPopover=this.$('.o_thread_tooltip').popover({html:true,boundary:'viewport',placement:'auto',trigger:'hover',offset:'0, 1',content:function(){var messageID=$(this).data('message-id');var message=_.find(messages,function(message){return message.getID()===messageID;});return QWeb.render('im_livechat.legacy.mail.widget.Thread.Message.MailTooltip',{notifications:message.getNotifications(),});},});},_renderMessageSeenPopover:function(thread,messages){var self=this;this._destroyOpenSeenPopoverIDs();if(this._messageSeenPopover){this._messageSeenPopover.popover('hide');}
if(!this.$('.o_thread_message_core .o_mail_thread_message_seen_icon').length){return;}
this._messageSeenPopover=this.$('.o_thread_message_core .o_mail_thread_message_seen_icon').popover({html:true,boundary:'viewport',placement:'auto',trigger:'hover',offset:'0, 1',content:function(){var $this=$(this);self._openedSeenPopoverIDs.push($this.attr('aria-describedby'));var messageID=$this.data('message-id');var message=_.find(messages,function(message){return message.getID()===messageID;});return QWeb.render('im_livechat.legacy.mail.widget.Thread.Message.SeenIconPopoverContent',{thread:thread,message:message,});},});},_updateTimestamps:function(){var isAtBottom=this.isAtBottom();this.$('.o_mail_timestamp').each(function(){var date=$(this).data('date');$(this).html(mailUtils.timeFromNow(date));});if(isAtBottom&&!this.isAtBottom()){this.scrollToBottom();}},_onAttachmentDownload:function(event){event.stopPropagation();},_onAttachmentView:function(event){event.stopPropagation();var activeAttachmentID=$(event.currentTarget).data('id');if(activeAttachmentID){var attachmentViewer=new DocumentViewer(this,this.attachments,activeAttachmentID);attachmentViewer.appendTo($('body'));}},_onChangeModerationCheckbox:function(ev){this.trigger_up('update_moderation_buttons');},_onClick:function(){if(this._selectedMessageID){this.unselectMessage();this.trigger('unselect_message');}},_onClickMailExpand:function(ev){ev.preventDefault();},_onClickMessage:function(ev){$(ev.currentTarget).toggleClass('o_thread_selected_message');},_onClickMessageNeedaction:function(ev){var messageID=$(ev.currentTarget).data('message-id');this.trigger('mark_as_read',messageID);},_onClickMessageNotificationError(ev){const messageID=$(ev.currentTarget).data('message-id');this.do_action('mail.mail_resend_message_action',{additional_context:{mail_message_to_resend:messageID,}});},_onClickMessageReply:function(ev){this._selectedMessageID=$(ev.currentTarget).data('message-id');this.$('.o_thread_message').removeClass('o_thread_selected_message');this.$('.o_thread_message[data-message-id="'+this._selectedMessageID+'"]').addClass('o_thread_selected_message');this.trigger('select_message',this._selectedMessageID);ev.stopPropagation();},_onClickMessageStar:function(ev){var messageID=$(ev.currentTarget).data('message-id');this.trigger('toggle_star_status',messageID);},_onClickMessageModeration:function(ev){var $button=$(ev.currentTarget);var messageID=$button.data('message-id');var decision=$button.data('decision');this.trigger_up('message_moderation',{messageID:messageID,decision:decision,});},_onClickRedirect:function(ev){if($(ev.target).data('oe-field')!==undefined){return;}
var id=$(ev.target).data('oe-id');if(id){ev.preventDefault();var model=$(ev.target).data('oe-model');var options;if(model&&(model!=='mail.channel')){options={model:model,id:id};}else{options={channelID:id};}
this._redirect(options);}},_onClickShowMore:function(){this.trigger('load_more_messages');},});ThreadWidget.ORDER=ORDER;return ThreadWidget;});odoo.define('im_livechat.legacy.mail.DocumentViewer',function(require){"use strict";var core=require('web.core');var Widget=require('web.Widget');var QWeb=core.qweb;var SCROLL_ZOOM_STEP=0.1;var ZOOM_STEP=0.5;var DocumentViewer=Widget.extend({template:"im_livechat.legacy.mail.DocumentViewer",events:{'click .o_download_btn':'_onDownload','click .o_viewer_img':'_onImageClicked','click .o_viewer_video':'_onVideoClicked','click .move_next':'_onNext','click .move_previous':'_onPrevious','click .o_rotate':'_onRotate','click .o_zoom_in':'_onZoomIn','click .o_zoom_out':'_onZoomOut','click .o_zoom_reset':'_onZoomReset','click .o_close_btn, .o_viewer_img_wrapper':'_onClose','click .o_print_btn':'_onPrint','DOMMouseScroll .o_viewer_content':'_onScroll','mousewheel .o_viewer_content':'_onScroll','keydown':'_onKeydown','keyup':'_onKeyUp','mousedown .o_viewer_img':'_onStartDrag','mousemove .o_viewer_content':'_onDrag','mouseup .o_viewer_content':'_onEndDrag'},init:function(parent,attachments,activeAttachmentID){this._super.apply(this,arguments);this.attachment=_.filter(attachments,function(attachment){var match=attachment.type==='url'?attachment.url.match("(youtu|.png|.jpg|.gif)"):attachment.mimetype.match("(image|video|application/pdf|text)");if(match){attachment.fileType=match[1];if(match[1].match("(.png|.jpg|.gif)")){attachment.fileType='image';}
if(match[1]==='youtu'){var youtube_array=attachment.url.split('/');var youtube_token=youtube_array[youtube_array.length-1];if(youtube_token.indexOf('watch')!==-1){youtube_token=youtube_token.split('v=')[1];var amp=youtube_token.indexOf('&');if(amp!==-1){youtube_token=youtube_token.substring(0,amp);}}
attachment.youtube=youtube_token;}
return true;}});this.activeAttachment=_.findWhere(attachments,{id:activeAttachmentID});this.modelName='ir.attachment';this._reset();},start:function(){this.$el.modal('show');this.$el.on('hidden.bs.modal',_.bind(this._onDestroy,this));this.$('.o_viewer_img').on("load",_.bind(this._onImageLoaded,this));this.$('[data-toggle="tooltip"]').tooltip({delay:0});return this._super.apply(this,arguments);},destroy:function(){if(this.isDestroyed()){return;}
this.trigger_up('document_viewer_closed');this.$el.modal('hide');this.$el.remove();this._super.apply(this,arguments);},_next:function(){var index=_.findIndex(this.attachment,this.activeAttachment);index=(index+1)%this.attachment.length;this.activeAttachment=this.attachment[index];this._updateContent();},_previous:function(){var index=_.findIndex(this.attachment,this.activeAttachment);index=index===0?this.attachment.length-1:index-1;this.activeAttachment=this.attachment[index];this._updateContent();},_reset:function(){this.scale=1;this.dragStartX=this.dragstopX=0;this.dragStartY=this.dragstopY=0;},_updateContent:function(){this.$('.o_viewer_content').html(QWeb.render('im_livechat.legacy.mail.DocumentViewer.Content',{widget:this}));this.$('.o_viewer_img').on("load",_.bind(this._onImageLoaded,this));this.$('[data-toggle="tooltip"]').tooltip({delay:0});this._reset();},_getTransform:function(scale,angle){return'scale3d('+scale+', '+scale+', 1) rotate('+angle+'deg)';},_rotate:function(angle){this._reset();var new_angle=(this.angle||0)+angle;this.$('.o_viewer_img').css('transform',this._getTransform(this.scale,new_angle));this.$('.o_viewer_img').css('max-width',new_angle%180!==0?$(document).height():'100%');this.$('.o_viewer_img').css('max-height',new_angle%180!==0?$(document).width():'100%');this.angle=new_angle;},_zoom:function(scale){if(scale>0.5){this.$('.o_viewer_img').css('transform',this._getTransform(scale,this.angle||0));this.scale=scale;}
this.$('.o_zoom_reset').add('.o_zoom_out').toggleClass('disabled',scale===1);},_onClose:function(e){e.preventDefault();this.destroy();},_onDestroy:function(){this.destroy();},_onDownload:function(e){e.preventDefault();window.location='/web/content/'+this.modelName+'/'+this.activeAttachment.id+'/'+'datas'+'?download=true';},_onDrag:function(e){e.preventDefault();if(this.enableDrag){var $image=this.$('.o_viewer_img');var $zoomer=this.$('.o_viewer_zoomer');var top=$image.prop('offsetHeight')*this.scale>$zoomer.height()?e.clientY-this.dragStartY:0;var left=$image.prop('offsetWidth')*this.scale>$zoomer.width()?e.clientX-this.dragStartX:0;$zoomer.css("transform","translate3d("+left+"px, "+top+"px, 0)");$image.css('cursor','move');}},_onEndDrag:function(e){e.preventDefault();if(this.enableDrag){this.enableDrag=false;this.dragstopX=e.clientX-this.dragStartX;this.dragstopY=e.clientY-this.dragStartY;this.$('.o_viewer_img').css('cursor','');}},_onImageClicked:function(e){e.stopPropagation();},_onImageLoaded:function(){this.$('.o_loading_img').hide();},_onKeydown:function(e){switch(e.which){case $.ui.keyCode.RIGHT:e.preventDefault();this._next();break;case $.ui.keyCode.LEFT:e.preventDefault();this._previous();break;}},_onKeyUp:function(e){switch(e.which){case $.ui.keyCode.ESCAPE:e.preventDefault();this._onClose(e);break;}},_onNext:function(e){e.preventDefault();this._next();},_onPrevious:function(e){e.preventDefault();this._previous();},_onPrint:function(e){e.preventDefault();var src=this.$('.o_viewer_img').prop('src');var script=QWeb.render('im_livechat.legacy.mail.PrintImage',{src:src});var printWindow=window.open('about:blank',"_new");printWindow.document.open();printWindow.document.write(script);printWindow.document.close();},_onScroll:function(e){var scale;if(e.originalEvent.wheelDelta>0||e.originalEvent.detail<0){scale=this.scale+SCROLL_ZOOM_STEP;this._zoom(scale);}else{scale=this.scale-SCROLL_ZOOM_STEP;this._zoom(scale);}},_onStartDrag:function(e){e.preventDefault();this.enableDrag=true;this.dragStartX=e.clientX-(this.dragstopX||0);this.dragStartY=e.clientY-(this.dragstopY||0);},_onVideoClicked:function(e){e.stopPropagation();var videoElement=e.target;if(videoElement.paused){videoElement.play();}else{videoElement.pause();}},_onRotate:function(e){e.preventDefault();this._rotate(90);},_onZoomIn:function(e){e.preventDefault();var scale=this.scale+ZOOM_STEP;this._zoom(scale);},_onZoomOut:function(e){e.preventDefault();var scale=this.scale-ZOOM_STEP;this._zoom(scale);},_onZoomReset:function(e){e.preventDefault();this.$('.o_viewer_zoomer').css("transform","");this._zoom(1);},});return DocumentViewer;});;

/* /website_livechat/static/src/legacy/public_livechat.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_livechat.legacy.website_livechat.livechat_request',function(require){"use strict";var utils=require('web.utils');var session=require('web.session');var LivechatButton=require('im_livechat.legacy.im_livechat.im_livechat').LivechatButton;LivechatButton.include({willStart:function(){if(this.options.chat_request_session){utils.set_cookie('im_livechat_session',JSON.stringify(this.options.chat_request_session),60*60);}
return this._super();},_onCloseChatWindow:function(ev){this._super(ev);var cookie=utils.get_cookie('im_livechat_session');if(cookie){var channel=JSON.parse(cookie);session.rpc('/im_livechat/visitor_leave_session',{uuid:channel.uuid});utils.set_cookie('im_livechat_session',"",-1);}},});return{LivechatButton:LivechatButton,};});;

/* /portal_rating/static/src/js/portal_chatter.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('rating.portal.chatter',function(require){'use strict';var core=require('web.core');var portalChatter=require('portal.chatter');var utils=require('web.utils');var time=require('web.time');var _t=core._t;var PortalChatter=portalChatter.PortalChatter;var qweb=core.qweb;PortalChatter.include({events:_.extend({},PortalChatter.prototype.events,{'click .o_website_rating_select':'_onClickStarDomain','click .o_website_rating_select_text':'_onClickStarDomainReset','click .o_wrating_js_publisher_comment_btn':'_onClickPublisherComment','click .o_wrating_js_publisher_comment_edit':'_onClickPublisherComment','click .o_wrating_js_publisher_comment_delete':'_onClickPublisherCommentDelete','click .o_wrating_js_publisher_comment_submit':'_onClickPublisherCommentSubmit','click .o_wrating_js_publisher_comment_cancel':'_onClickPublisherCommentCancel',}),xmlDependencies:(PortalChatter.prototype.xmlDependencies||[]).concat(['/portal_rating/static/src/xml/portal_tools.xml','/portal_rating/static/src/xml/portal_chatter.xml']),init:function(parent,options){this._super.apply(this,arguments);if(!_.contains(this.options,'display_rating')){this.options=_.defaults(this.options,{'display_rating':false,'rating_default_value':0.0,});}
this.set('rating_card_values',{});this.set('rating_value',false);this.on("change:rating_value",this,this._onChangeRatingDomain);},preprocessMessages:function(messages){var self=this;messages=this._super.apply(this,arguments);if(this.options['display_rating']){_.each(messages,function(m,i){m.rating_value=self.roundToHalf(m['rating_value']);m.rating=self._preprocessCommentData(m.rating,i);});}
this.messages=messages;return messages;},roundToHalf:function(value){var converted=parseFloat(value);var decimal=(converted-parseInt(converted,10));decimal=Math.round(decimal*10);if(decimal===5){return(parseInt(converted,10)+0.5);}
if((decimal<3)||(decimal>7)){return Math.round(converted);}else{return(parseInt(converted,10)+0.5);}},_chatterInit:function(){var self=this;return this._super.apply(this,arguments).then(function(result){if(!result['rating_stats']){return;}
var ratingData={'avg':Math.round(result['rating_stats']['avg']*100)/100,'percent':[],};_.each(_.keys(result['rating_stats']['percent']).reverse(),function(rating){ratingData['percent'].push({'num':rating,'percent':utils.round_precision(result['rating_stats']['percent'][rating],0.01),});});self.set('rating_card_values',ratingData);});},_messageFetchPrepareParams:function(){var params=this._super.apply(this,arguments);if(this.options['display_rating']){params['rating_include']=true;}
return params;},_newPublisherCommentData:function(messageIndex){return{mes_index:messageIndex,publisher_id:this.options.partner_id,publisher_avatar:_.str.sprintf('/web/image/%s/%s/image_128/50x50','res.partner',this.options.partner_id),publisher_name:_t("Write your comment"),publisher_datetime:'',publisher_comment:'',};},_preprocessCommentData:function(rawRating,messageIndex){var ratingData={id:rawRating.id,mes_index:messageIndex,publisher_datetime:rawRating.publisher_datetime?moment(time.str_to_datetime(rawRating.publisher_datetime)).format('MMMM Do YYYY, h:mm:ss a'):"",publisher_comment:rawRating.publisher_comment?rawRating.publisher_comment:'',};if(rawRating.publisher_id&&rawRating.publisher_id.length>=2){ratingData.publisher_id=rawRating.publisher_id[0];ratingData.publisher_name=rawRating.publisher_id[1];ratingData.publisher_avatar=_.str.sprintf('/web/image/%s/%s/image_128/50x50','res.partner',ratingData.publisher_id);}
var commentData=_.extend(this._newPublisherCommentData(messageIndex),ratingData);return commentData;},_getCommentContainer:function($source){return $source.parents(".o_wrating_publisher_container").first().find(".o_wrating_publisher_comment").first();},_getCommentButton:function($source){return $source.parents(".o_wrating_publisher_container").first().find(".o_wrating_js_publisher_comment_btn").first();},_getCommentTextarea:function($source){return $source.parents(".o_wrating_publisher_container").first().find(".o_portal_rating_comment_input").first();},_focusTextComment:function($source){this._getCommentTextarea($source).focus();},_onClickStarDomain:function(ev){var $tr=this.$(ev.currentTarget);var num=$tr.data('star');if($tr.css('opacity')==='1'){this.set('rating_value',num);this.$('.o_website_rating_select').css({'opacity':0.5,});this.$('.o_website_rating_select_text[data-star="'+num+'"]').css({'visibility':'visible','opacity':1,});this.$('.o_website_rating_select[data-star="'+num+'"]').css({'opacity':1,});}},_onClickStarDomainReset:function(ev){ev.stopPropagation();ev.preventDefault();this.set('rating_value',false);this.$('.o_website_rating_select_text').css('visibility','hidden');this.$('.o_website_rating_select').css({'opacity':1,});},_onClickPublisherComment:function(ev){var $source=this.$(ev.currentTarget);if(this._getCommentTextarea($source).length===1){this._getCommentContainer($source).empty();return;}
var messageIndex=$source.data("mes_index");var data={is_publisher:this.options['is_user_publisher']};data.rating=this._newPublisherCommentData(messageIndex);var oldRating=this.messages[messageIndex].rating;data.rating.publisher_comment=oldRating.publisher_comment?oldRating.publisher_comment:'';this._getCommentContainer($source).html($(qweb.render("portal_rating.chatter_rating_publisher_form",data)));this._focusTextComment($source);},_onClickPublisherCommentDelete:function(ev){var self=this;var $source=this.$(ev.currentTarget);var messageIndex=$source.data("mes_index");var ratingId=this.messages[messageIndex].rating.id;this._rpc({route:'/website/rating/comment',params:{"rating_id":ratingId,"publisher_comment":''}}).then(function(res){self.messages[messageIndex].rating=self._preprocessCommentData(res,messageIndex);self._getCommentButton($source).removeClass("d-none");self._getCommentContainer($source).empty();});},_onClickPublisherCommentSubmit:function(ev){var self=this;var $source=this.$(ev.currentTarget);var messageIndex=$source.data("mes_index");var comment=this._getCommentTextarea($source).val();var ratingId=this.messages[messageIndex].rating.id;this._rpc({route:'/website/rating/comment',params:{"rating_id":ratingId,"publisher_comment":comment}}).then(function(res){self.messages[messageIndex].rating=self._preprocessCommentData(res,messageIndex);if(self.messages[messageIndex].rating.publisher_comment!==''){self._getCommentButton($source).addClass('d-none');self._getCommentContainer($source).html($(qweb.render("portal_rating.chatter_rating_publisher_comment",{rating:self.messages[messageIndex].rating,is_publisher:self.options.is_user_publisher})));}else{self._getCommentButton($source).removeClass("d-none");self._getCommentContainer($source).empty();}});},_onClickPublisherCommentCancel:function(ev){var $source=this.$(ev.currentTarget);var messageIndex=$source.data("mes_index");var comment=this.messages[messageIndex].rating.publisher_comment;if(comment){var data={rating:this.messages[messageIndex].rating,is_publisher:this.options.is_user_publisher};this._getCommentContainer($source).html($(qweb.render("portal_rating.chatter_rating_publisher_comment",data)));}else{this._getCommentContainer($source).empty();}},_onChangeRatingDomain:function(){var domain=[];if(this.get('rating_value')){domain=[['rating_value','=',this.get('rating_value')]];}
this._changeCurrentPage(1,domain);},});});;

/* /portal_rating/static/src/js/portal_composer.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('rating.portal.composer',function(require){'use strict';var core=require('web.core');var portalComposer=require('portal.composer');var _t=core._t;var PortalComposer=portalComposer.PortalComposer;PortalComposer.include({events:_.extend({},PortalComposer.prototype.events,{'click .stars i':'_onClickStar','mouseleave .stars':'_onMouseleaveStarBlock','mousemove .stars i':'_onMoveStar','mouseleave .stars i':'_onMoveLeaveStar',}),init:function(parent,options){this._super.apply(this,arguments);if(options.default_rating_value){options.default_rating_value=parseFloat(options.default_rating_value);}
this.options=_.defaults(this.options,{'default_message':false,'default_message_id':false,'default_rating_value':0.0,'force_submit_url':false,});this.labels={'0':"",'1':_t("I hate it"),'2':_t("I don't like it"),'3':_t("It's okay"),'4':_t("I like it"),'5':_t("I love it"),};this.user_click=false;this.set("star_value",this.options.default_rating_value);this.on("change:star_value",this,this._onChangeStarValue);},start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self.$input=self.$('input[name="rating_value"]');self.$star_list=self.$('.stars').find('i');self.set("star_value",self.options.default_rating_value);self.$input.val(self.options.default_rating_value);});},_onChangeStarValue:function(){var val=this.get("star_value");var index=Math.floor(val);var decimal=val-index;this.$star_list.removeClass('fa-star fa-star-half-o').addClass('fa-star-o');this.$('.stars').find("i:lt("+index+")").removeClass('fa-star-o fa-star-half-o').addClass('fa-star');if(decimal){this.$('.stars').find("i:eq("+index+")").removeClass('fa-star-o fa-star fa-star-half-o').addClass('fa-star-half-o');}
this.$('.rate_text .badge').text(this.labels[index]);},_onClickStar:function(ev){var index=this.$('.stars i').index(ev.currentTarget);this.set("star_value",index+1);this.user_click=true;this.$input.val(this.get("star_value"));},_onMouseleaveStarBlock:function(){this.$('.rate_text').hide();},_onMoveStar:function(ev){var index=this.$('.stars i').index(ev.currentTarget);this.$('.rate_text').show();this.set("star_value",index+1);},_onMoveLeaveStar:function(){if(!this.user_click){this.set("star_value",parseInt(this.$input.val()));}
this.user_click=false;},});});;

/* /portal_rating/static/src/js/portal_rating_composer.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('portal.rating.composer',function(require){'use strict';var publicWidget=require('web.public.widget');var session=require('web.session');var portalComposer=require('portal.composer');var PortalComposer=portalComposer.PortalComposer;var RatingPopupComposer=publicWidget.Widget.extend({template:'portal_rating.PopupComposer',xmlDependencies:['/portal/static/src/xml/portal_chatter.xml','/portal_rating/static/src/xml/portal_tools.xml','/portal_rating/static/src/xml/portal_rating_composer.xml',],init:function(parent,options){this._super.apply(this,arguments);this.rating_avg=Math.round(options['ratingAvg']*100)/100||0.0;this.rating_total=options['ratingTotal']||0.0;this.options=_.defaults({},options,{'token':false,'res_model':false,'res_id':false,'pid':0,'display_composer':options['disable_composer']?false:!session.is_website_user,'display_rating':true,'csrf_token':odoo.csrf_token,'user_id':session.user_id,});},start:function(){var defs=[];defs.push(this._super.apply(this,arguments));this._composer=new PortalComposer(this,this.options);defs.push(this._composer.replace(this.$('.o_portal_chatter_composer')));return Promise.all(defs);},});publicWidget.registry.RatingPopupComposer=publicWidget.Widget.extend({selector:'.o_rating_popup_composer',start:function(){var ratingPopupData=this.$el.data();var ratingPopup=new RatingPopupComposer(this,ratingPopupData);return Promise.all([this._super.apply(this,arguments),ratingPopup.appendTo(this.$el)]);},});return RatingPopupComposer;});;

/* /web_tour/static/src/js/public/tour_manager.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web_tour.public.TourManager',function(require){'use strict';var TourManager=require('web_tour.TourManager');var lazyloader=require('web.public.lazyloader');TourManager.include({_waitBeforeTourStart:function(){return this._super.apply(this,arguments).then(function(){return lazyloader.allScriptsLoaded;}).then(function(){return new Promise(function(resolve){setTimeout(resolve);});});},});});;

/* /bus/static/src/js/longpolling_bus.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('bus.Longpolling',function(require){"use strict";var Bus=require('web.Bus');var ServicesMixin=require('web.ServicesMixin');var LongpollingBus=Bus.extend(ServicesMixin,{PARTNERS_PRESENCE_CHECK_PERIOD:30000,ERROR_RETRY_DELAY:10000,POLL_ROUTE:'/longpolling/poll',_isActive:null,_lastNotificationID:0,_isOdooFocused:true,_pollRetryTimeout:null,init:function(parent,params){this._super.apply(this,arguments);this._id=_.uniqueId('bus');this._longPollingBusId=this._id;this._options={};this._channels=[];this._lastPresenceTime=new Date().getTime();$(window).on("focus."+this._longPollingBusId,this._onFocusChange.bind(this,{focus:true}));$(window).on("blur."+this._longPollingBusId,this._onFocusChange.bind(this,{focus:false}));$(window).on("unload."+this._longPollingBusId,this._onFocusChange.bind(this,{focus:false}));$(window).on("click."+this._longPollingBusId,this._onPresence.bind(this));$(window).on("keydown."+this._longPollingBusId,this._onPresence.bind(this));$(window).on("keyup."+this._longPollingBusId,this._onPresence.bind(this));},destroy:function(){this.stopPolling();$(window).off("focus."+this._longPollingBusId);$(window).off("blur."+this._longPollingBusId);$(window).off("unload."+this._longPollingBusId);$(window).off("click."+this._longPollingBusId);$(window).off("keydown."+this._longPollingBusId);$(window).off("keyup."+this._longPollingBusId);this._super();},addChannel:function(channel){if(this._channels.indexOf(channel)===-1){this._channels.push(channel);if(this._pollRpc){this._pollRpc.abort();}else{this.startPolling();}}},deleteChannel:function(channel){var index=this._channels.indexOf(channel);if(index!==-1){this._channels.splice(index,1);if(this._pollRpc){this._pollRpc.abort();}}},isOdooFocused:function(){return this._isOdooFocused;},startPolling:function(){if(this._isActive===null){this._poll=this._poll.bind(this);}
if(!this._isActive){this._isActive=true;this._poll();}},stopPolling:function(){this._isActive=false;this._channels=[];clearTimeout(this._pollRetryTimeout);if(this._pollRpc){this._pollRpc.abort();}},updateOption:function(key,value){this._options[key]=value;},_getLastPresence:function(){return this._lastPresenceTime;},_poll:function(){var self=this;if(!this._isActive){return;}
var now=new Date().getTime();var options=_.extend({},this._options,{bus_inactivity:now-this._getLastPresence(),});var data={channels:this._channels,last:this._lastNotificationID,options:options};this._pollRpc=this._makePoll(data);this._pollRpc.then(function(result){self._pollRpc=false;self._onPoll(result);self._poll();}).guardedCatch(function(result){self._pollRpc=false;result.event.preventDefault();if(result.message==="XmlHttpRequestError abort"){self._poll();}else{self._pollRetryTimeout=setTimeout(self._poll,self.ERROR_RETRY_DELAY+(Math.floor((Math.random()*20)+1)*1000));}});},_makePoll:function(data){return this._rpc({route:this.POLL_ROUTE,params:data},{shadow:true,timeout:60000});},_onFocusChange:function(params){this._isOdooFocused=params.focus;if(params.focus){this._lastPresenceTime=new Date().getTime();this.trigger('window_focus',this._isOdooFocused);}},_onPoll:function(notifications){var self=this;var notifs=_.map(notifications,function(notif){if(notif.id>self._lastNotificationID){self._lastNotificationID=notif.id;}
return[notif.channel,notif.message];});this.trigger("notification",notifs);return notifs;},_onPresence:function(){this._lastPresenceTime=new Date().getTime();},});return LongpollingBus;});;

/* /bus/static/src/js/crosstab_bus.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('bus.CrossTab',function(require){"use strict";var Longpolling=require('bus.Longpolling');var session=require('web.session');var CrossTabBus=Longpolling.extend({TAB_HEARTBEAT_PERIOD:10000,MASTER_TAB_HEARTBEAT_PERIOD:1500,HEARTBEAT_OUT_OF_DATE_PERIOD:5000,HEARTBEAT_KILL_OLD_PERIOD:15000,LOCAL_STORAGE_PREFIX:'bus',_isMasterTab:false,_isRegistered:false,init:function(){this._super.apply(this,arguments);var now=new Date().getTime();this._sanitizedOrigin=session.origin.replace(/:\/{0,2}/g,'_');this._id=_.uniqueId(this.LOCAL_STORAGE_PREFIX)+':'+now;if(this._callLocalStorage('getItem','last_ts',0)+50000<now){this._callLocalStorage('removeItem','last');}
this._lastNotificationID=this._callLocalStorage('getItem','last',0);this.call('local_storage','onStorage',this,this._onStorage);},destroy:function(){this._super();clearTimeout(this._heartbeatTimeout);},addChannel:function(){this._super.apply(this,arguments);this._callLocalStorage('setItem','channels',this._channels);},deleteChannel:function(){this._super.apply(this,arguments);this._callLocalStorage('setItem','channels',this._channels);},getTabId:function(){return this._id;},isMasterTab:function(){return this._isMasterTab;},startPolling:function(){if(this._isActive===null){this._heartbeat=this._heartbeat.bind(this);}
if(!this._isRegistered){this._isRegistered=true;var peers=this._callLocalStorage('getItem','peers',{});peers[this._id]=new Date().getTime();this._callLocalStorage('setItem','peers',peers);this._registerWindowUnload();if(!this._callLocalStorage('getItem','master')){this._startElection();}
this._heartbeat();if(this._isMasterTab){this._callLocalStorage('setItem','channels',this._channels);this._callLocalStorage('setItem','options',this._options);}else{this._channels=this._callLocalStorage('getItem','channels',this._channels);this._options=this._callLocalStorage('getItem','options',this._options);}
return;}
if(this._isMasterTab){this._super.apply(this,arguments);}},updateOption:function(){this._super.apply(this,arguments);this._callLocalStorage('setItem','options',this._options);},_callLocalStorage:function(method,key,param){return this.call('local_storage',method,this._generateKey(key),param);},_generateKey:function(key){return this.LOCAL_STORAGE_PREFIX+'.'+this._sanitizedOrigin+'.'+key;},_getLastPresence:function(){return this._callLocalStorage('getItem','lastPresence')||this._super();},_heartbeat:function(){var now=new Date().getTime();var heartbeatValue=parseInt(this._callLocalStorage('getItem','heartbeat',0));var peers=this._callLocalStorage('getItem','peers',{});if((heartbeatValue+this.HEARTBEAT_OUT_OF_DATE_PERIOD)<now){this._startElection();heartbeatValue=parseInt(this._callLocalStorage('getItem','heartbeat',0));}
if(this._isMasterTab){var cleanedPeers={};for(var peerName in peers){if(peers[peerName]+this.HEARTBEAT_KILL_OLD_PERIOD>now){cleanedPeers[peerName]=peers[peerName];}}
if(heartbeatValue!==this.lastHeartbeat){this._isMasterTab=false;this.lastHeartbeat=0;peers[this._id]=now;this._callLocalStorage('setItem','peers',peers);this.stopPolling();this.trigger('no_longer_master');}else{this.lastHeartbeat=now;this._callLocalStorage('setItem','heartbeat',now);this._callLocalStorage('setItem','peers',cleanedPeers);}}else{peers[this._id]=now;this._callLocalStorage('setItem','peers',peers);}
var hbPeriod=this._isMasterTab?this.MASTER_TAB_HEARTBEAT_PERIOD:this.TAB_HEARTBEAT_PERIOD;if(this._lastPresenceTime+hbPeriod>now){this._callLocalStorage('setItem','lastPresence',this._lastPresenceTime);}
this._heartbeatTimeout=setTimeout(this._heartbeat.bind(this),hbPeriod);},_registerWindowUnload:function(){$(window).on('unload.'+this._id,this._onUnload.bind(this));},_startElection:function(){if(this._isMasterTab){return;}
var now=new Date().getTime();var peers=this._callLocalStorage('getItem','peers',{});var heartbeatKillOld=now-this.HEARTBEAT_KILL_OLD_PERIOD;var newMaster;for(var peerName in peers){if(peers[peerName]<heartbeatKillOld){continue;}
newMaster=peerName;break;}
if(newMaster===this._id){this.lastHeartbeat=now;this._callLocalStorage('setItem','heartbeat',this.lastHeartbeat);this._callLocalStorage('setItem','master',true);this._isMasterTab=true;this.startPolling();this.trigger('become_master');delete peers[newMaster];this._callLocalStorage('setItem','peers',peers);}},_onFocusChange:function(params){this._super.apply(this,arguments);this._callLocalStorage('setItem','focus',params.focus);},_onPoll:function(notifications){var notifs=this._super(notifications);if(this._isMasterTab&&notifs.length){this._callLocalStorage('setItem','last',this._lastNotificationID);this._callLocalStorage('setItem','last_ts',new Date().getTime());this._callLocalStorage('setItem','notification',notifs);}},_onStorage:function(e){var value=JSON.parse(e.newValue);var key=e.key;if(this._isRegistered&&key===this._generateKey('master')&&!value){this._startElection();}
if(key===this._generateKey('last')){this._lastNotificationID=value||0;}
else if(key===this._generateKey('notification')){if(!this._isMasterTab){this.trigger("notification",value);}}
else if(key===this._generateKey('channels')){this._channels=value;}
else if(key===this._generateKey('options')){this._options=value;}
else if(key===this._generateKey('focus')){this._isOdooFocused=value;this.trigger('window_focus',this._isOdooFocused);}},_onUnload:function(){var peers=this._callLocalStorage('getItem','peers')||{};delete peers[this._id];this._callLocalStorage('setItem','peers',peers);if(this._isMasterTab){this._callLocalStorage('removeItem','master');}},});return CrossTabBus;});;

/* /bus/static/src/js/services/bus_service.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('bus.BusService',function(require){"use strict";var CrossTab=require('bus.CrossTab');var core=require('web.core');var ServicesMixin=require('web.ServicesMixin');const session=require('web.session');var BusService=CrossTab.extend(ServicesMixin,{dependencies:['local_storage'],_audio:null,init:function(env){this.env=env;this._super();},_trigger_up:function(ev){if(ev.name==='call_service'){const payload=ev.data;let args=payload.args||[];if(payload.service==='ajax'&&payload.method==='rpc'){args=args.concat(ev.target);}
const service=this.env.services[payload.service];const result=service[payload.method].apply(service,args);payload.callback(result);}},start:function(){},sendNotification:function(title,content,callback){if(window.Notification&&Notification.permission==="granted"){if(this.isMasterTab()){try{this._sendNativeNotification(title,content,callback);}catch(error){if(error.message.indexOf('ServiceWorkerRegistration')>-1){this.do_notify(title,content);this._beep();}else{throw error;}}}}else{this.do_notify(title,content);if(this.isMasterTab()){this._beep();}}},onNotification:function(){this.on.apply(this,["notification"].concat(Array.prototype.slice.call(arguments)));},_beep:function(){if(typeof(Audio)!=="undefined"){if(!this._audio){this._audio=new Audio();var ext=this._audio.canPlayType("audio/ogg; codecs=vorbis")?".ogg":".mp3";this._audio.src=session.url("/mail/static/src/audio/ting"+ext);}
Promise.resolve(this._audio.play()).catch(_.noop);}},_sendNativeNotification:function(title,content,callback){var notification=new Notification(_.unescape(title),{body:_.unescape(content),icon:"/mail/static/src/img/odoobot_transparent.png"});notification.onclick=function(){window.focus();if(this.cancel){this.cancel();}else if(this.close){this.close();}
if(callback){callback();}};},});core.serviceRegistry.add('bus_service',BusService);return BusService;});;

/* /web_unsplash/static/src/js/unsplash_beacon.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('web_unsplash.beacon',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.UnsplashBeacon=publicWidget.Widget.extend({selector:'#wrapwrap',start:function(){var unsplashImages=_.map(this.$('img[src*="/unsplash/"]'),function(img){return img.src.split('/unsplash/')[1].split('/')[0];});if(unsplashImages.length){this._rpc({route:'/web_unsplash/get_app_id',}).then(function(appID){if(!appID){return;}
$.get('https://views.unsplash.com/v',{'photo_id':unsplashImages.join(','),'app_id':appID,});});}
return this._super.apply(this,arguments);},});});;

/* /auth_signup/static/src/js/signup.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('auth_signup.signup',function(require){'use strict';var publicWidget=require('web.public.widget');publicWidget.registry.SignUpForm=publicWidget.Widget.extend({selector:'.oe_signup_form',events:{'submit':'_onSubmit',},_onSubmit:function(){var $btn=this.$('.oe_login_buttons > button[type="submit"]');$btn.attr('disabled','disabled');$btn.prepend('<i class="fa fa-refresh fa-spin"/> ');},});});;

/* /google_recaptcha/static/src/js/recaptcha.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('google_recaptcha.ReCaptchaV3',function(require){"use strict";const ajax=require('web.ajax');const Class=require('web.Class');const core=require('web.core');const _t=core._t;const ReCaptcha=Class.extend({init:function(){this._publicKey=odoo.reCaptchaPublicKey;},loadLibs:function(){if(this._publicKey){this._recaptchaReady=ajax.loadJS(`https://www.recaptcha.net/recaptcha/api.js?render=${this._publicKey}`).then(()=>new Promise(resolve=>window.grecaptcha.ready(()=>resolve())));return this._recaptchaReady.then(()=>!!document.querySelector('.grecaptcha-badge'));}
return false;},getToken:async function(action){if(!this._publicKey){return{message:_t("No recaptcha site key set."),};}
await this._recaptchaReady;try{return{token:await window.grecaptcha.execute(this._publicKey,{action:action})};}catch(e){return{error:_t("The recaptcha site key is invalid."),};}},});return{ReCaptcha:ReCaptcha,};});;

/* /account/static/src/js/account_portal_sidebar.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('account.AccountPortalSidebar',function(require){'use strict';const dom=require('web.dom');var publicWidget=require('web.public.widget');var PortalSidebar=require('portal.PortalSidebar');var utils=require('web.utils');publicWidget.registry.AccountPortalSidebar=PortalSidebar.extend({selector:'.o_portal_invoice_sidebar',events:{'click .o_portal_invoice_print':'_onPrintInvoice',},start:function(){var def=this._super.apply(this,arguments);var $invoiceHtml=this.$el.find('iframe#invoice_html');var updateIframeSize=this._updateIframeSize.bind(this,$invoiceHtml);$(window).on('resize',updateIframeSize);var iframeDoc=$invoiceHtml[0].contentDocument||$invoiceHtml[0].contentWindow.document;if(iframeDoc.readyState==='complete'){updateIframeSize();}else{$invoiceHtml.on('load',updateIframeSize);}
return def;},_updateIframeSize:function($el){var $wrapwrap=$el.contents().find('div#wrapwrap');$el.height(0);$el.height($wrapwrap[0].scrollHeight);if(!utils.isValidAnchor(window.location.hash)){return;}
var $target=$(window.location.hash);if(!$target.length){return;}
dom.scrollTo($target[0],{duration:0});},_onPrintInvoice:function(ev){ev.preventDefault();var href=$(ev.currentTarget).attr('href');this._printIframeContent(href);},});});;

/* /payment/static/lib/jquery.payment/jquery.payment.js defined in bundle 'web.assets_frontend_lazy' */
(function(){var $,cardFromNumber,cardFromType,cards,defaultFormat,formatBackCardNumber,formatBackExpiry,formatCardNumber,formatExpiry,formatForwardExpiry,formatForwardSlashAndSpace,hasTextSelected,luhnCheck,reFormatCVC,reFormatCardNumber,reFormatExpiry,reFormatNumeric,replaceFullWidthChars,restrictCVC,restrictCardNumber,restrictExpiry,restrictNumeric,safeVal,setCardType,__slice=[].slice,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i;}return-1;};$=window.jQuery||window.Zepto||window.$;$.payment={};$.payment.fn={};$.fn.payment=function(){var args,method;method=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];return $.payment.fn[method].apply(this,args);};defaultFormat=/(\d{1,4})/g;$.payment.cards=cards=[{type:'maestro',patterns:[5018,502,503,506,56,58,639,6220,67],format:defaultFormat,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:true},{type:'forbrugsforeningen',patterns:[600],format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'dankort',patterns:[5019],format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'visa',patterns:[4],format:defaultFormat,length:[13,16],cvcLength:[3],luhn:true},{type:'mastercard',patterns:[51,52,53,54,55,22,23,24,25,26,27],format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'amex',patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:true},{type:'dinersclub',patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:true},{type:'discover',patterns:[60,64,65,622],format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'unionpay',patterns:[62,88],format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:false},{type:'jcb',patterns:[35],format:defaultFormat,length:[16],cvcLength:[3],luhn:true}];cardFromNumber=function(num){var card,p,pattern,_i,_j,_len,_len1,_ref;num=(num+'').replace(/\D/g,'');for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];_ref=card.patterns;for(_j=0,_len1=_ref.length;_j<_len1;_j++){pattern=_ref[_j];p=pattern+'';if(num.substr(0,p.length)===p){return card;}}}};cardFromType=function(type){var card,_i,_len;for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];if(card.type===type){return card;}}};luhnCheck=function(num){var digit,digits,odd,sum,_i,_len;odd=true;sum=0;digits=(num+'').split('').reverse();for(_i=0,_len=digits.length;_i<_len;_i++){digit=digits[_i];digit=parseInt(digit,10);if((odd=!odd)){digit*=2;}
if(digit>9){digit-=9;}
sum+=digit;}
return sum%10===0;};hasTextSelected=function($target){var _ref;if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==$target.prop('selectionEnd')){return true;}
if((typeof document!=="undefined"&&document!==null?(_ref=document.selection)!=null?_ref.createRange:void 0:void 0)!=null){if(document.selection.createRange().text){return true;}}
return false;};safeVal=function(value,$target){var currPair,cursor,digit,error,last,prevPair;try{cursor=$target.prop('selectionStart');}catch(_error){error=_error;cursor=null;}
last=$target.val();$target.val(value);if(cursor!==null&&$target.is(":focus")){if(cursor===last.length){cursor=value.length;}
if(last!==value){prevPair=last.slice(cursor-1,+cursor+1||9e9);currPair=value.slice(cursor-1,+cursor+1||9e9);digit=value[cursor];if(/\d/.test(digit)&&prevPair===(""+digit+" ")&&currPair===(" "+digit)){cursor=cursor+1;}}
$target.prop('selectionStart',cursor);return $target.prop('selectionEnd',cursor);}};replaceFullWidthChars=function(str){var chars,chr,fullWidth,halfWidth,idx,value,_i,_len;if(str==null){str='';}
fullWidth='\uff10\uff11\uff12\uff13\uff14\uff15\uff16\uff17\uff18\uff19';halfWidth='0123456789';value='';chars=str.split('');for(_i=0,_len=chars.length;_i<_len;_i++){chr=chars[_i];idx=fullWidth.indexOf(chr);if(idx>-1){chr=halfWidth[idx];}
value+=chr;}
return value;};reFormatNumeric=function(e){var $target;$target=$(e.currentTarget);return setTimeout(function(){var value;value=$target.val();value=replaceFullWidthChars(value);value=value.replace(/\D/g,'');return safeVal(value,$target);});};reFormatCardNumber=function(e){var $target;$target=$(e.currentTarget);return setTimeout(function(){var value;value=$target.val();value=replaceFullWidthChars(value);value=$.payment.formatCardNumber(value);return safeVal(value,$target);});};formatCardNumber=function(e){var $target,card,digit,length,re,upperLength,value;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
$target=$(e.currentTarget);value=$target.val();card=cardFromNumber(value+digit);length=(value.replace(/\D/g,'')+digit).length;upperLength=16;if(card){upperLength=card.length[card.length.length-1];}
if(length>=upperLength){return;}
if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==value.length){return;}
if(card&&card.type==='amex'){re=/^(\d{4}|\d{4}\s\d{6})$/;}else{re=/(?:^|\s)(\d{4})$/;}
if(re.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value+' '+digit);});}else if(re.test(value+digit)){e.preventDefault();return setTimeout(function(){return $target.val(value+digit+' ');});}};formatBackCardNumber=function(e){var $target,value;$target=$(e.currentTarget);value=$target.val();if(e.which!==8){return;}
if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==value.length){return;}
if(/\d\s$/.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value.replace(/\d\s$/,''));});}else if(/\s\d?$/.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value.replace(/\d$/,''));});}};reFormatExpiry=function(e){var $target;$target=$(e.currentTarget);return setTimeout(function(){var value;value=$target.val();value=replaceFullWidthChars(value);value=$.payment.formatExpiry(value);return safeVal(value,$target);});};formatExpiry=function(e){var $target,digit,val;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
$target=$(e.currentTarget);val=$target.val()+digit;if(/^\d$/.test(val)&&(val!=='0'&&val!=='1')){e.preventDefault();return setTimeout(function(){return $target.val("0"+val+" / ");});}else if(/^\d\d$/.test(val)){e.preventDefault();return setTimeout(function(){var m1,m2;m1=parseInt(val[0],10);m2=parseInt(val[1],10);if(m2>2&&m1!==0){return $target.val("0"+m1+" / "+m2);}else{return $target.val(""+val+" / ");}});}};formatForwardExpiry=function(e){var $target,digit,val;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
$target=$(e.currentTarget);val=$target.val();if(/^\d\d$/.test(val)){return $target.val(""+val+" / ");}};formatForwardSlashAndSpace=function(e){var $target,val,which;which=String.fromCharCode(e.which);if(!(which==='/'||which===' ')){return;}
$target=$(e.currentTarget);val=$target.val();if(/^\d$/.test(val)&&val!=='0'){return $target.val("0"+val+" / ");}};formatBackExpiry=function(e){var $target,value;$target=$(e.currentTarget);value=$target.val();if(e.which!==8){return;}
if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==value.length){return;}
if(/\d\s\/\s$/.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value.replace(/\d\s\/\s$/,''));});}};reFormatCVC=function(e){var $target;$target=$(e.currentTarget);return setTimeout(function(){var value;value=$target.val();value=replaceFullWidthChars(value);value=value.replace(/\D/g,'').slice(0,4);return safeVal(value,$target);});};restrictNumeric=function(e){var input;if(e.metaKey||e.ctrlKey){return true;}
if(e.which===32){return false;}
if(e.which===0){return true;}
if(e.which<33){return true;}
input=String.fromCharCode(e.which);return!!/[\d\s]/.test(input);};restrictCardNumber=function(e){var $target,card,digit,value;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
if(hasTextSelected($target)){return;}
value=($target.val()+digit).replace(/\D/g,'');card=cardFromNumber(value);if(card){return value.length<=card.length[card.length.length-1];}else{return value.length<=16;}};restrictExpiry=function(e){var $target,digit,value;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
if(hasTextSelected($target)){return;}
value=$target.val()+digit;value=value.replace(/\D/g,'');if(value.length>6){return false;}};restrictCVC=function(e){var $target,digit,val;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
if(hasTextSelected($target)){return;}
val=$target.val()+digit;return val.length<=4;};setCardType=function(e){var $target,allTypes,card,cardType,val;$target=$(e.currentTarget);val=$target.val();cardType=$.payment.cardType(val)||'unknown';if(!$target.hasClass(cardType)){allTypes=(function(){var _i,_len,_results;_results=[];for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];_results.push(card.type);}
return _results;})();$target.removeClass('unknown');$target.removeClass(allTypes.join(' '));$target.addClass(cardType);$target.toggleClass('identified',cardType!=='unknown');return $target.trigger('payment.cardType',cardType);}};$.payment.fn.formatCardCVC=function(){this.on('keypress',restrictNumeric);this.on('keypress',restrictCVC);this.on('paste',reFormatCVC);this.on('change',reFormatCVC);this.on('input',reFormatCVC);return this;};$.payment.fn.formatCardExpiry=function(){this.on('keypress',restrictNumeric);this.on('keypress',restrictExpiry);this.on('keypress',formatExpiry);this.on('keypress',formatForwardSlashAndSpace);this.on('keypress',formatForwardExpiry);this.on('keydown',formatBackExpiry);this.on('change',reFormatExpiry);this.on('input',reFormatExpiry);return this;};$.payment.fn.formatCardNumber=function(){this.on('keypress',restrictNumeric);this.on('keypress',restrictCardNumber);this.on('keypress',formatCardNumber);this.on('keydown',formatBackCardNumber);this.on('keyup',setCardType);this.on('paste',reFormatCardNumber);this.on('change',reFormatCardNumber);this.on('input',reFormatCardNumber);this.on('input',setCardType);return this;};$.payment.fn.restrictNumeric=function(){this.on('keypress',restrictNumeric);this.on('paste',reFormatNumeric);this.on('change',reFormatNumeric);this.on('input',reFormatNumeric);return this;};$.payment.fn.cardExpiryVal=function(){return $.payment.cardExpiryVal($(this).val());};$.payment.cardExpiryVal=function(value){var month,prefix,year,_ref;_ref=value.split(/[\s\/]+/,2),month=_ref[0],year=_ref[1];if((year!=null?year.length:void 0)===2&&/^\d+$/.test(year)){prefix=(new Date).getFullYear();prefix=prefix.toString().slice(0,2);year=prefix+year;}
month=parseInt(month,10);year=parseInt(year,10);return{month:month,year:year};};$.payment.validateCardNumber=function(num){var card,_ref;num=(num+'').replace(/\s+|-/g,'');if(!/^\d+$/.test(num)){return false;}
card=cardFromNumber(num);if(!card){return false;}
return(_ref=num.length,__indexOf.call(card.length,_ref)>=0)&&(card.luhn===false||luhnCheck(num));};$.payment.validateCardExpiry=function(month,year){var currentTime,expiry,_ref;if(typeof month==='object'&&'month'in month){_ref=month,month=_ref.month,year=_ref.year;}
if(!(month&&year)){return false;}
month=$.trim(month);year=$.trim(year);if(!/^\d+$/.test(month)){return false;}
if(!/^\d+$/.test(year)){return false;}
if(!((1<=month&&month<=12))){return false;}
if(year.length===2){if(year<70){year="20"+year;}else{year="19"+year;}}
if(year.length!==4){return false;}
expiry=new Date(year,month);currentTime=new Date;expiry.setMonth(expiry.getMonth()-1);expiry.setMonth(expiry.getMonth()+1,1);return expiry>currentTime;};$.payment.validateCardCVC=function(cvc,type){var card,_ref;cvc=$.trim(cvc);if(!/^\d+$/.test(cvc)){return false;}
card=cardFromType(type);if(card!=null){return _ref=cvc.length,__indexOf.call(card.cvcLength,_ref)>=0;}else{return cvc.length>=3&&cvc.length<=4;}};$.payment.cardType=function(num){var _ref;if(!num){return null;}
return((_ref=cardFromNumber(num))!=null?_ref.type:void 0)||null;};$.payment.formatCardNumber=function(num){var card,groups,upperLength,_ref;num=num.replace(/\D/g,'');card=cardFromNumber(num);if(!card){return num;}
upperLength=card.length[card.length.length-1];num=num.slice(0,upperLength);if(card.format.global){return(_ref=num.match(card.format))!=null?_ref.join(' '):void 0;}else{groups=card.format.exec(num);if(groups==null){return;}
groups.shift();groups=$.grep(groups,function(n){return n;});return groups.join(' ');}};$.payment.formatExpiry=function(expiry){var mon,parts,sep,year;parts=expiry.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/);if(!parts){return'';}
mon=parts[1]||'';sep=parts[2]||'';year=parts[3]||'';if(year.length>0){sep=' / ';}else if(sep===' /'){mon=mon.substring(0,1);sep='';}else if(mon.length===2||sep.length>0){sep=' / ';}else if(mon.length===1&&(mon!=='0'&&mon!=='1')){mon="0"+mon;sep=' / ';}
return mon+sep+year;};}).call(this);;

/* /payment/static/src/js/payment_portal.js defined in bundle 'web.assets_frontend_lazy' */
$(function(){$('input#cc_number').payment('formatCardNumber');$('input#cc_cvc').payment('formatCardCVC');$('input#cc_expiry').payment('formatCardExpiry')
$('input#cc_number').on('focusout',function(e){var valid_value=$.payment.validateCardNumber(this.value);var card_type=$.payment.cardType(this.value);if(card_type){$(this).parent('.form-group').children('.card_placeholder').removeClass().addClass('card_placeholder '+card_type);$(this).parent('.form-group').children('input[name="cc_brand"]').val(card_type)}
else{$(this).parent('.form-group').children('.card_placeholder').removeClass().addClass('card_placeholder');}
if(valid_value){$(this).parent('.form-group').addClass('o_has_success').find('.form-control, .custom-select').addClass('is-valid');$(this).parent('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(this).siblings('.o_invalid_field').remove();}
else{$(this).parent('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(this).parent('.form-group').removeClass('o_has_success').find('.form-control, .custom-select').removeClass('is-valid');}});$('input#cc_cvc').on('focusout',function(e){var cc_nbr=$(this).parents('.oe_cc').find('#cc_number').val();var card_type=$.payment.cardType(cc_nbr);var valid_value=$.payment.validateCardCVC(this.value,card_type);if(valid_value){$(this).parent('.form-group').addClass('o_has_success').find('.form-control, .custom-select').addClass('is-valid');$(this).parent('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(this).siblings('.o_invalid_field').remove();}
else{$(this).parent('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(this).parent('.form-group').removeClass('o_has_success').find('.form-control, .custom-select').removeClass('is-valid');}});$('input#cc_expiry').on('focusout',function(e){var expiry_value=$.payment.cardExpiryVal(this.value);var month=expiry_value.month||'';var year=expiry_value.year||'';var valid_value=$.payment.validateCardExpiry(month,year);if(valid_value){$(this).parent('.form-group').addClass('o_has_success').find('.form-control, .custom-select').addClass('is-valid');$(this).parent('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(this).siblings('.o_invalid_field').remove();}
else{$(this).parent('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(this).parent('.form-group').removeClass('o_has_success').find('.form-control, .custom-select').removeClass('is-valid');}});$('select[name="pm_acquirer_id"]').on('change',function(){var acquirer_id=$(this).val();$('.acquirer').addClass('d-none');$('.acquirer[data-acquirer-id="'+acquirer_id+'"]').removeClass('d-none');});});;

/* /payment/static/src/js/payment_form.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('payment.payment_form',function(require){"use strict";var core=require('web.core');var Dialog=require('web.Dialog');var publicWidget=require('web.public.widget');var _t=core._t;publicWidget.registry.PaymentForm=publicWidget.Widget.extend({selector:'.o_payment_form',events:{'submit':'onSubmit','click #o_payment_form_pay':'payEvent','click #o_payment_form_add_pm':'addPmEvent','click button[name="delete_pm"]':'deletePmEvent','click .o_payment_form_pay_icon_more':'onClickMorePaymentIcon','click .o_payment_acquirer_select':'radioClickEvent',},start:function(){this._adaptPayButton();window.addEventListener('pageshow',function(event){if(event.persisted){window.location.reload();}});var self=this;return this._super.apply(this,arguments).then(function(){self.options=_.extend(self.$el.data(),self.options);self.updateNewPaymentDisplayStatus();$('[data-toggle="tooltip"]').tooltip();});},displayError:function(title,message){var $checkedRadio=this.$('input[type="radio"]:checked'),acquirerID=this.getAcquirerIdFromRadio($checkedRadio[0]);var $acquirerForm;if(this.isNewPaymentRadio($checkedRadio[0])){$acquirerForm=this.$('#o_payment_add_token_acq_'+acquirerID);}
else if(this.isFormPaymentRadio($checkedRadio[0])){$acquirerForm=this.$('#o_payment_form_acq_'+acquirerID);}
if($checkedRadio.length===0){return new Dialog(null,{title:_t('Error: ')+_.str.escapeHTML(title),size:'medium',$content:"<p>"+(_.str.escapeHTML(message)||"")+"</p>",buttons:[{text:_t('Ok'),close:true}]}).open();}else{this.$('#payment_error').remove();var messageResult='<div class="alert alert-danger mb4" id="payment_error">';if(title!=''){messageResult=messageResult+'<b>'+_.str.escapeHTML(title)+':</b><br/>';}
messageResult=messageResult+_.str.escapeHTML(message)+'</div>';$acquirerForm.append(messageResult);}},hideError:function(){this.$('#payment_error').remove();},getAcquirerIdFromRadio:function(element){return $(element).data('acquirer-id');},getFormData:function($form){var unindexed_array=$form.serializeArray();var indexed_array={};$.map(unindexed_array,function(n,i){indexed_array[n.name]=n.value;});return indexed_array;},isFormPaymentRadio:function(element){return $(element).data('form-payment')==='True';},isNewPaymentRadio:function(element){return $(element).data('s2s-payment')==='True';},updateNewPaymentDisplayStatus:function(){var checked_radio=this.$('input[type="radio"]:checked');this.$('[id*="o_payment_add_token_acq_"]').addClass('d-none');this.$('[id*="o_payment_form_acq_"]').addClass('d-none');if(checked_radio.length!==1){return;}
checked_radio=checked_radio[0];var acquirer_id=this.getAcquirerIdFromRadio(checked_radio);if(this.isNewPaymentRadio(checked_radio)){this.$('#o_payment_add_token_acq_'+acquirer_id).removeClass('d-none');}
else if(this.isFormPaymentRadio(checked_radio)){this.$('#o_payment_form_acq_'+acquirer_id).removeClass('d-none');}},disableButton:function(button){$("body").block({overlayCSS:{backgroundColor:"#000",opacity:0,zIndex:1050},message:false});$(button).attr('disabled',true);$(button).children('.fa-lock').removeClass('fa-lock');$(button).prepend('<span class="o_loader"><i class="fa fa-refresh fa-spin"></i>&nbsp;</span>');},enableButton:function(button){$('body').unblock();$(button).attr('disabled',false);$(button).children('.fa').addClass('fa-lock');$(button).find('span.o_loader').remove();},_parseError:function(e){if(e.message.data.arguments[1]){return e.message.data.arguments[0]+e.message.data.arguments[1];}
return e.message.data.arguments[0];},_adaptPayButton:function(){var $payButton=$("#o_payment_form_pay");var disabledReasons=$payButton.data('disabled_reasons')||{};$payButton.prop('disabled',_.contains(disabledReasons,true));},payEvent:function(ev){ev.preventDefault();var form=this.el;var checked_radio=this.$('input[type="radio"]:checked');var self=this;if(ev.type==='submit'){var button=$(ev.target).find('*[type="submit"]')[0]}else{var button=ev.target;}
if(checked_radio.length===1){checked_radio=checked_radio[0];var acquirer_id=this.getAcquirerIdFromRadio(checked_radio);var acquirer_form=false;if(this.isNewPaymentRadio(checked_radio)){acquirer_form=this.$('#o_payment_add_token_acq_'+acquirer_id);}else{acquirer_form=this.$('#o_payment_form_acq_'+acquirer_id);}
var inputs_form=$('input',acquirer_form);var ds=$('input[name="data_set"]',acquirer_form)[0];if(this.isNewPaymentRadio(checked_radio)){if(this.options.partnerId===undefined){console.warn('payment_form: unset partner_id when adding new token; things could go wrong');}
var form_data=this.getFormData(inputs_form);var wrong_input=false;inputs_form.toArray().forEach(function(element){if($(element).attr('type')=='hidden'){return true;}
$(element).closest('div.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(element).siblings(".o_invalid_field").remove();$(element).trigger("focusout");if(element.dataset.isRequired&&element.value.length===0){$(element).closest('div.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(element).closest('div.form-group').append('<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>');wrong_input=true;}
else if($(element).closest('div.form-group').hasClass('o_has_error')){wrong_input=true;$(element).closest('div.form-group').append('<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>');}});if(wrong_input){return;}
this.disableButton(button);return this._rpc({route:ds.dataset.createRoute,params:form_data,}).then(function(data){if(data.result){if(data['3d_secure']!==false){$("body").html(data['3d_secure']);}
else{checked_radio.value=data.id;form.submit();return new Promise(function(){});}}
else{if(data.error){self.displayError('',data.error);}else{self.displayError(_t('Server Error'),_t('e.g. Your credit card details are wrong. Please verify.'));}}
self.enableButton(button);}).guardedCatch(function(error){error.event.preventDefault();self.enableButton(button);self.displayError(_t('Server Error'),_t("We are not able to add your payment method at the moment.")+
self._parseError(error));});}
else if(this.isFormPaymentRadio(checked_radio)){this.disableButton(button);var $tx_url=this.$el.find('input[name="prepare_tx_url"]');if($tx_url.length===1){var form_save_token=acquirer_form.find('input[name="o_payment_form_save_token"]').prop('checked');return this._rpc({route:$tx_url[0].value,params:{'acquirer_id':parseInt(acquirer_id),'save_token':form_save_token,'access_token':self.options.accessToken,'success_url':self.options.successUrl,'error_url':self.options.errorUrl,'callback_method':self.options.callbackMethod,'order_id':self.options.orderId,'invoice_id':self.options.invoiceId,},}).then(function(result){if(result){var newForm=document.createElement('form');newForm.setAttribute("method",self._get_redirect_form_method());newForm.setAttribute("provider",checked_radio.dataset.provider);newForm.hidden=true;newForm.innerHTML=result;var action_url=$(newForm).find('input[name="data_set"]').data('actionUrl');newForm.setAttribute("action",action_url);$(document.getElementsByTagName('body')[0]).append(newForm);$(newForm).find('input[data-remove-me]').remove();if(action_url){newForm.submit();return new Promise(function(){});}}
else{self.displayError(_t('Server Error'),_t("We are not able to redirect you to the payment form."));self.enableButton(button);}}).guardedCatch(function(error){error.event.preventDefault();self.displayError(_t('Server Error'),_t("We are not able to redirect you to the payment form.")+" "+
self._parseError(error));self.enableButton(button);});}
else{this.displayError(_t("Cannot setup the payment"),_t("We're unable to process your payment."));self.enableButton(button);}}
else{this.disableButton(button);form.submit();return new Promise(function(){});}}
else{this.displayError(_t('No payment method selected'),_t('Please select a payment method.'));this.enableButton(button);}},_get_redirect_form_method:function(){return"post";},addPmEvent:function(ev){ev.stopPropagation();ev.preventDefault();var checked_radio=this.$('input[type="radio"]:checked');var self=this;if(ev.type==='submit'){var button=$(ev.target).find('*[type="submit"]')[0]}else{var button=ev.target;}
if(checked_radio.length===1&&this.isNewPaymentRadio(checked_radio[0])){checked_radio=checked_radio[0];var acquirer_id=this.getAcquirerIdFromRadio(checked_radio);var acquirer_form=this.$('#o_payment_add_token_acq_'+acquirer_id);var inputs_form=$('input',acquirer_form);var form_data=this.getFormData(inputs_form);var ds=$('input[name="data_set"]',acquirer_form)[0];var wrong_input=false;inputs_form.toArray().forEach(function(element){if($(element).attr('type')=='hidden'){return true;}
$(element).closest('div.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(element).siblings(".o_invalid_field").remove();$(element).trigger("focusout");if(element.dataset.isRequired&&element.value.length===0){$(element).closest('div.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');var message='<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>';$(element).closest('div.form-group').append(message);wrong_input=true;}
else if($(element).closest('div.form-group').hasClass('o_has_error')){wrong_input=true;var message='<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>';$(element).closest('div.form-group').append(message);}});if(wrong_input){return;}
$(button).attr('disabled',true);$(button).children('.fa-plus-circle').removeClass('fa-plus-circle');$(button).prepend('<span class="o_loader"><i class="fa fa-refresh fa-spin"></i>&nbsp;</span>');this._rpc({route:ds.dataset.createRoute,params:form_data,}).then(function(data){if(data.result){if(data['3d_secure']!==false){$("body").html(data['3d_secure']);}
else{if(form_data.return_url){window.location=form_data.return_url;}
else{window.location.reload();}}}
else{if(data.error){self.displayError('',data.error);}else{self.displayError(_t('Server Error'),_t('e.g. Your credit card details are wrong. Please verify.'));}}
$(button).attr('disabled',false);$(button).children('.fa').addClass('fa-plus-circle');$(button).find('span.o_loader').remove();}).guardedCatch(function(error){error.event.preventDefault();$(button).attr('disabled',false);$(button).children('.fa').addClass('fa-plus-circle');$(button).find('span.o_loader').remove();self.displayError(_t('Server error'),_t("We are not able to add your payment method at the moment.")+
self._parseError(error));});}
else{this.displayError(_t('No payment method selected'),_t('Please select the option to add a new payment method.'));}},onSubmit:function(ev){ev.stopPropagation();ev.preventDefault();var button=$(ev.target).find('*[type="submit"]')[0]
if(button.id==='o_payment_form_pay'){return this.payEvent(ev);}else if(button.id==='o_payment_form_add_pm'){return this.addPmEvent(ev);}
return;},deletePmEvent:function(ev){ev.stopPropagation();ev.preventDefault();var self=this;var pm_id=parseInt(ev.target.value);var tokenDelete=function(){self._rpc({model:'payment.token',method:'unlink',args:[pm_id],}).then(function(result){if(result===true){ev.target.closest('div').remove();}},function(){self.displayError(_t('Server Error'),_t("We are not able to delete your payment method at the moment."));});};this._rpc({model:'payment.token',method:'get_linked_records',args:[pm_id],}).then(function(result){if(result[pm_id].length>0){var content='';result[pm_id].forEach(function(sub){content+='<p><a href="'+sub.url+'" title="'+sub.description+'">'+sub.name+'</a></p>';});content=$('<div>').html('<p>'+_t('This card is currently linked to the following records:')+'</p>'+content);new Dialog(self,{title:_t('Warning!'),size:'medium',$content:content,buttons:[{text:_t('Confirm Deletion'),classes:'btn-primary',close:true,click:tokenDelete},{text:_t('Cancel'),close:true}]}).open();}
else{tokenDelete();}},function(err,event){self.displayError(_t('Server Error'),_t("We are not able to delete your payment method at the moment.")+err.data.message);});},onClickMorePaymentIcon:function(ev){ev.preventDefault();ev.stopPropagation();var $listItems=$(ev.currentTarget).parents('ul').children('li');var $moreItem=$(ev.currentTarget).parents('li');$listItems.removeClass('d-none');$moreItem.addClass('d-none');},radioClickEvent:function(ev){$(ev.currentTarget).find('input[type="radio"]').prop("checked",true);this.updateNewPaymentDisplayStatus();},});return publicWidget.registry.PaymentForm;});;

/* /payment/static/src/js/payment_processing.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('payment.processing',function(require){'use strict';var publicWidget=require('web.public.widget');var ajax=require('web.ajax');var core=require('web.core');var _t=core._t;$.blockUI.defaults.css.border='0';$.blockUI.defaults.css["background-color"]='';$.blockUI.defaults.overlayCSS["opacity"]='0.9';publicWidget.registry.PaymentProcessing=publicWidget.Widget.extend({selector:'.o_payment_processing',xmlDependencies:['/payment/static/src/xml/payment_processing.xml'],_pollCount:0,start:function(){this.displayLoading();this.poll();return this._super.apply(this,arguments);},startPolling:function(){var timeout=3000;if(this._pollCount>=10&&this._pollCount<20){timeout=10000;}
else if(this._pollCount>=20){timeout=30000;}
setTimeout(this.poll.bind(this),timeout);this._pollCount++;},poll:function(){var self=this;ajax.jsonRpc('/payment/process/poll','call',{}).then(function(data){if(data.success===true){self.processPolledData(data.transactions);}
else{switch(data.error){case"tx_process_retry":break;case"no_tx_found":self.displayContent("payment.no_tx_found",{});break;default:self.displayContent("payment.exception",{exception_msg:data.error});break;}}
self.startPolling();}).guardedCatch(function(){self.displayContent("payment.rpc_error",{});self.startPolling();});},processPolledData:function(transactions){var render_values={'tx_draft':[],'tx_pending':[],'tx_authorized':[],'tx_done':[],'tx_cancel':[],'tx_error':[],};if(transactions.length>0&&['transfer','sepa_direct_debit'].indexOf(transactions[0].acquirer_provider)>=0){window.location=transactions[0].return_url;return;}
transactions.forEach(function(tx){var key='tx_'+tx.state;if(key in render_values){render_values[key].push(tx);}});function countTxInState(states){var nbTx=0;for(var prop in render_values){if(states.indexOf(prop)>-1&&render_values.hasOwnProperty(prop)){nbTx+=render_values[prop].length;}}
return nbTx;}
if(countTxInState(['tx_done','tx_error','tx_pending','tx_authorized'])===1){var tx=render_values['tx_done'][0]||render_values['tx_authorized'][0]||render_values['tx_error'][0];if(tx){window.location=tx.return_url;return;}}
this.displayContent("payment.display_tx_list",render_values);},displayContent:function(xmlid,render_values){var html=core.qweb.render(xmlid,render_values);$.unblockUI();this.$el.find('.o_payment_processing_content').html(html);},displayLoading:function(){var msg=_t("We are processing your payment, please wait ...");$.blockUI({'message':'<h2 class="text-white"><img src="/web/static/src/img/spin.png" class="fa-pulse"/>'+'    <br />'+msg+'</h2>'});},});});;

/* /sale/static/src/js/sale_portal_sidebar.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('sale.SalePortalSidebar',function(require){'use strict';var publicWidget=require('web.public.widget');var PortalSidebar=require('portal.PortalSidebar');publicWidget.registry.SalePortalSidebar=PortalSidebar.extend({selector:'.o_portal_sale_sidebar',init:function(parent,options){this._super.apply(this,arguments);this.authorizedTextTag=['em','b','i','u'];this.spyWatched=$('body[data-target=".navspy"]');},start:function(){var def=this._super.apply(this,arguments);var $spyWatcheElement=this.$el.find('[data-id="portal_sidebar"]');this._setElementId($spyWatcheElement);this._generateMenu();if($.bbq.getState('allow_payment')==='yes'&&this.$('#o_sale_portal_paynow').length){this.$('#o_sale_portal_paynow').trigger('click');$.bbq.removeState('allow_payment');}
return def;},_setElementId:function(prefix,$el){var id=_.uniqueId(prefix);this.spyWatched.find($el).attr('id',id);return id;},_generateMenu:function(){var self=this,lastLI=false,lastUL=null,$bsSidenav=this.$el.find('.bs-sidenav');$("#quote_content [id^=quote_header_], #quote_content [id^=quote_]",this.spyWatched).attr("id","");_.each(this.spyWatched.find("#quote_content h2, #quote_content h3"),function(el){var id,text;switch(el.tagName.toLowerCase()){case"h2":id=self._setElementId('quote_header_',el);text=self._extractText($(el));if(!text){break;}
lastLI=$("<li class='nav-item'>").append($('<a class="nav-link" style="max-width: 200px;" href="#'+id+'"/>').text(text)).appendTo($bsSidenav);lastUL=false;break;case"h3":id=self._setElementId('quote_',el);text=self._extractText($(el));if(!text){break;}
if(lastLI){if(!lastUL){lastUL=$("<ul class='nav flex-column'>").appendTo(lastLI);}
$("<li class='nav-item'>").append($('<a class="nav-link" style="max-width: 200px;" href="#'+id+'"/>').text(text)).appendTo(lastUL);}
break;}
el.setAttribute('data-anchor',true);});this.trigger_up('widgets_start_request',{$target:$bsSidenav});},_extractText:function($node){var self=this;var rawText=[];_.each($node.contents(),function(el){var current=$(el);if($.trim(current.text())){var tagName=current.prop("tagName");if(_.isUndefined(tagName)||(!_.isUndefined(tagName)&&_.contains(self.authorizedTextTag,tagName.toLowerCase()))){rawText.push($.trim(current.text()));}}});return rawText.join(' ');},});});;

/* /nu_edu/static/src/js/fontawesome.min.js defined in bundle 'web.assets_frontend_lazy' */
!function(){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function $(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,a;e=r,a=i[n=t],n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a})}return r}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],a=!0,r=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(a=(o=c.next()).done)&&(n.push(o.value),!e||n.length!==e);a=!0);}catch(t){r=!0,i=t}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var t=function(){},e={},n={},a=null,o={mark:t,measure:t};try{"undefined"!=typeof window&&(e=window),"undefined"!=typeof document&&(n=document),"undefined"!=typeof MutationObserver&&(a=MutationObserver),"undefined"!=typeof performance&&(o=performance)}catch(t){}var c=(e.navigator||{}).userAgent,s=void 0===c?"":c,v=e,b=n,l=a,f=o,u=!!v.document,m=!!b.documentElement&&!!b.head&&"function"==typeof b.addEventListener&&"function"==typeof b.createElement,k=~s.indexOf("MSIE")||~s.indexOf("Trident/"),h="___FONT_AWESOME___",A=16,g="fa",y="svg-inline--fa",tt="data-fa-i2svg",w="data-fa-pseudo-element",x="data-fa-pseudo-element-pending",C="data-prefix",O="data-icon",P="fontawesome-i2svg",S="async",N=["HTML","HEAD","STYLE","SCRIPT"],M=function(){try{return!0}catch(t){return!1}}(),z={fas:"solid",far:"regular",fal:"light",fad:"duotone",fab:"brands",fak:"kit",fa:"solid"},E={solid:"fas",regular:"far",light:"fal",duotone:"fad",brands:"fab",kit:"fak"},j="fa-layers-text",L=/Font Awesome ([5 ]*)(Solid|Regular|Light|Duotone|Brands|Free|Pro|Kit).*/,R={900:"fas",400:"far",normal:"far",300:"fal"},I=[1,2,3,4,5,6,7,8,9,10],_=I.concat([11,12,13,14,15,16,17,18,19,20]),T=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Y={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},H=["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",Y.GROUP,Y.SWAP_OPACITY,Y.PRIMARY,Y.SECONDARY].concat(I.map(function(t){return"".concat(t,"x")})).concat(_.map(function(t){return"w-".concat(t)})),F=v.FontAwesomeConfig||{};if(b&&"function"==typeof b.querySelector){[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(t){var e,n=p(t,2),a=n[0],r=n[1],i=""===(e=function(t){var e=b.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}(a))||"false"!==e&&("true"===e||e);null!=i&&(F[r]=i)})}var D=$({},{familyPrefix:g,replacementClass:y,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},F);D.autoReplaceSvg||(D.observeMutations=!1);var et=$({},D);v.FontAwesomeConfig=et;var U=v||{};U[h]||(U[h]={}),U[h].styles||(U[h].styles={}),U[h].hooks||(U[h].hooks={}),U[h].shims||(U[h].shims=[]);var W=U[h],q=[],V=!1;function X(t){m&&(V?setTimeout(t,0):q.push(t))}m&&((V=(b.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(b.readyState))||b.addEventListener("DOMContentLoaded",function t(){b.removeEventListener("DOMContentLoaded",t),V=1,q.map(function(t){return t()})}));var B,G="pending",K="settled",J="fulfilled",Q="rejected",Z=function(){},nt="undefined"!=typeof global&&void 0!==global.process&&"function"==typeof global.process.emit,at="undefined"==typeof setImmediate?setTimeout:setImmediate,rt=[];function it(){for(var t=0;t<rt.length;t++)rt[t][0](rt[t][1]);B=!(rt=[])}function ot(t,e){rt.push([t,e]),B||(B=!0,at(it,0))}function ct(t){var e=t.owner,n=e._state,a=e._data,r=t[n],i=t.then;if("function"==typeof r){n=J;try{a=r(a)}catch(t){ut(i,t)}}st(i,a)||(n===J&&lt(i,a),n===Q&&ut(i,a))}function st(e,n){var a;try{if(e===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"===r(n))){var t=n.then;if("function"==typeof t)return t.call(n,function(t){a||(a=!0,n===t?ft(e,t):lt(e,t))},function(t){a||(a=!0,ut(e,t))}),!0}}catch(t){return a||ut(e,t),!0}return!1}function lt(t,e){t!==e&&st(t,e)||ft(t,e)}function ft(t,e){t._state===G&&(t._state=K,t._data=e,ot(mt,t))}function ut(t,e){t._state===G&&(t._state=K,t._data=e,ot(pt,t))}function dt(t){t._then=t._then.forEach(ct)}function mt(t){t._state=J,dt(t)}function pt(t){t._state=Q,dt(t),!t._handled&&nt&&global.process.emit("unhandledRejection",t._data,t)}function ht(t){global.process.emit("rejectionHandled",t)}function gt(t){if("function"!=typeof t)throw new TypeError("Promise resolver "+t+" is not a function");if(this instanceof gt==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(t,e){function n(t){ut(e,t)}try{t(function(t){lt(e,t)},n)}catch(t){n(t)}}(t,this)}gt.prototype={constructor:gt,_state:G,_then:null,_data:void 0,_handled:!1,then:function(t,e){var n={owner:this,then:new this.constructor(Z),fulfilled:t,rejected:e};return!e&&!t||this._handled||(this._handled=!0,this._state===Q&&nt&&ot(ht,this)),this._state===J||this._state===Q?ot(ct,n):this._then.push(n),n.then},catch:function(t){return this.then(null,t)}},gt.all=function(c){if(!Array.isArray(c))throw new TypeError("You must pass an array to Promise.all().");return new gt(function(n,t){var a=[],r=0;function e(e){return r++,function(t){a[e]=t,--r||n(a)}}for(var i,o=0;o<c.length;o++)(i=c[o])&&"function"==typeof i.then?i.then(e(o),t):a[o]=i;r||n(a)})},gt.race=function(r){if(!Array.isArray(r))throw new TypeError("You must pass an array to Promise.race().");return new gt(function(t,e){for(var n,a=0;a<r.length;a++)(n=r[a])&&"function"==typeof n.then?n.then(t,e):t(n)})},gt.resolve=function(e){return e&&"object"===r(e)&&e.constructor===gt?e:new gt(function(t){t(e)})},gt.reject=function(n){return new gt(function(t,e){e(n)})};var vt="function"==typeof Promise?Promise:gt,bt=A,yt={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function wt(t){if(t&&m){var e=b.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=b.head.childNodes,a=null,r=n.length-1;-1<r;r--){var i=n[r],o=(i.tagName||"").toUpperCase();-1<["STYLE","LINK"].indexOf(o)&&(a=i)}return b.head.insertBefore(e,a),t}}var xt="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function kt(){for(var t=12,e="";0<t--;)e+=xt[62*Math.random()|0];return e}function At(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function Ct(t){return t.classList?At(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(t){return t})}function Ot(t,e){var n,a=e.split("-"),r=a[0],i=a.slice(1).join("-");return r!==t||""===i||(n=i,~H.indexOf(n))?null:i}function Pt(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function St(n){return Object.keys(n||{}).reduce(function(t,e){return t+"".concat(e,": ").concat(n[e],";")},"")}function Nt(t){return t.size!==yt.size||t.x!==yt.x||t.y!==yt.y||t.rotate!==yt.rotate||t.flipX||t.flipY}function Mt(t){var e=t.transform,n=t.containerWidth,a=t.iconWidth,r={transform:"translate(".concat(n/2," 256)")},i="translate(".concat(32*e.x,", ").concat(32*e.y,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),c="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(i," ").concat(o," ").concat(c)},path:{transform:"translate(".concat(a/2*-1," -256)")}}}var zt={x:0,y:0,width:"100%",height:"100%"};function Et(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function jt(t){var e=t.icons,n=e.main,a=e.mask,r=t.prefix,i=t.iconName,o=t.transform,c=t.symbol,s=t.title,l=t.maskId,f=t.titleId,u=t.extra,d=t.watchable,m=void 0!==d&&d,p=a.found?a:n,h=p.width,g=p.height,v="fak"===r,b=v?"":"fa-w-".concat(Math.ceil(h/g*16)),y=[et.replacementClass,i?"".concat(et.familyPrefix,"-").concat(i):"",b].filter(function(t){return-1===u.classes.indexOf(t)}).filter(function(t){return""!==t||!!t}).concat(u.classes).join(" "),w={children:[],attributes:$({},u.attributes,{"data-prefix":r,"data-icon":i,class:y,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h," ").concat(g)})},x=v&&!~u.classes.indexOf("fa-fw")?{width:"".concat(h/g*16*.0625,"em")}:{};m&&(w.attributes[tt]=""),s&&w.children.push({tag:"title",attributes:{id:w.attributes["aria-labelledby"]||"title-".concat(f||kt())},children:[s]});var k,A,C,O,P,S,N,M,z,E,j,L,R,I,_,T,Y,H,F,D,U,W,q,V,X,B,G,K=$({},w,{prefix:r,iconName:i,main:n,mask:a,maskId:l,transform:o,symbol:c,styles:$({},x,u.styles)}),J=a.found&&n.found?(C=(k=K).children,O=k.attributes,P=k.main,S=k.mask,N=k.maskId,M=k.transform,z=P.width,E=P.icon,j=S.width,L=S.icon,R=Mt({transform:M,containerWidth:j,iconWidth:z}),I={tag:"rect",attributes:$({},zt,{fill:"white"})},_=E.children?{children:E.children.map(Et)}:{},T={tag:"g",attributes:$({},R.inner),children:[Et($({tag:E.tag,attributes:$({},E.attributes,R.path)},_))]},Y={tag:"g",attributes:$({},R.outer),children:[T]},H="mask-".concat(N||kt()),F="clip-".concat(N||kt()),D={tag:"mask",attributes:$({},zt,{id:H,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[I,Y]},U={tag:"defs",children:[{tag:"clipPath",attributes:{id:F},children:(A=L,"g"===A.tag?A.children:[A])},D]},C.push(U,{tag:"rect",attributes:$({fill:"currentColor","clip-path":"url(#".concat(F,")"),mask:"url(#".concat(H,")")},zt)}),{children:C,attributes:O}):function(t){var e=t.children,n=t.attributes,a=t.main,r=t.transform,i=St(t.styles);if(0<i.length&&(n.style=i),Nt(r)){var o=Mt({transform:r,containerWidth:a.width,iconWidth:a.width});e.push({tag:"g",attributes:$({},o.outer),children:[{tag:"g",attributes:$({},o.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:$({},a.icon.attributes,o.path)}]}]})}else e.push(a.icon);return{children:e,attributes:n}}(K),Q=J.children,Z=J.attributes;return K.children=Q,K.attributes=Z,c?(q=(W=K).prefix,V=W.iconName,X=W.children,B=W.attributes,G=W.symbol,[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:$({},B,{id:!0===G?"".concat(q,"-").concat(et.familyPrefix,"-").concat(V):G}),children:X}]}]):function(t){var e=t.children,n=t.main,a=t.mask,r=t.attributes,i=t.styles,o=t.transform;if(Nt(o)&&n.found&&!a.found){var c=n.width/n.height/2,s=.5;r.style=St($({},i,{"transform-origin":"".concat(c+o.x/16,"em ").concat(s+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}(K)}function Lt(t){var e=t.content,n=t.width,a=t.height,r=t.transform,i=t.title,o=t.extra,c=t.watchable,s=void 0!==c&&c,l=$({},o.attributes,i?{title:i}:{},{class:o.classes.join(" ")});s&&(l[tt]="");var f,u,d,m,p,h,g,v,b,y=$({},o.styles);Nt(r)&&(y.transform=(u=(f={transform:r,startCentered:!0,width:n,height:a}).transform,d=f.width,m=void 0===d?A:d,p=f.height,h=void 0===p?A:p,g=f.startCentered,b="",b+=(v=void 0!==g&&g)&&k?"translate(".concat(u.x/bt-m/2,"em, ").concat(u.y/bt-h/2,"em) "):v?"translate(calc(-50% + ".concat(u.x/bt,"em), calc(-50% + ").concat(u.y/bt,"em)) "):"translate(".concat(u.x/bt,"em, ").concat(u.y/bt,"em) "),b+="scale(".concat(u.size/bt*(u.flipX?-1:1),", ").concat(u.size/bt*(u.flipY?-1:1),") "),b+="rotate(".concat(u.rotate,"deg) ")),y["-webkit-transform"]=y.transform);var w=St(y);0<w.length&&(l.style=w);var x=[];return x.push({tag:"span",attributes:l,children:[e]}),i&&x.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),x}var Rt=function(){},It=et.measurePerformance&&f&&f.mark&&f.measure?f:{mark:Rt,measure:Rt},_t='FA "5.15.2"',Tt=function(t){It.mark("".concat(_t," ").concat(t," ends")),It.measure("".concat(_t," ").concat(t),"".concat(_t," ").concat(t," begins"),"".concat(_t," ").concat(t," ends"))},Yt={begin:function(t){return It.mark("".concat(_t," ").concat(t," begins")),function(){return Tt(t)}},end:Tt},Ht=function(t,e,n,a){var r,i,o,c,s,l=Object.keys(t),f=l.length,u=void 0!==a?(c=e,s=a,function(t,e,n,a){return c.call(s,t,e,n,a)}):e;for(o=void 0===n?(r=1,t[l[0]]):(r=0,n);r<f;r++)o=u(o,t[i=l[r]],i,t);return o};function Ft(t){for(var e="",n=0;n<t.length;n++){e+=("000"+t.charCodeAt(n).toString(16)).slice(-4)}return e}var Dt=W.styles,Ut=W.shims,Wt={},qt={},Vt={},Xt=function(){var t=function(a){return Ht(Dt,function(t,e,n){return t[n]=Ht(e,a,{}),t},{})};Wt=t(function(t,e,n){return e[3]&&(t[e[3]]=n),t}),qt=t(function(e,t,n){var a=t[2];return e[n]=n,a.forEach(function(t){e[t]=n}),e});var i="far"in Dt;Vt=Ht(Ut,function(t,e){var n=e[0],a=e[1],r=e[2];return"far"!==a||i||(a="fas"),t[n]={prefix:a,iconName:r},t},{})};function Bt(t,e){return(Wt[t]||{})[e]}Xt();var Gt=W.styles,Kt=function(){return{prefix:null,iconName:null,rest:[]}};function Jt(t){return t.reduce(function(t,e){var n=Ot(et.familyPrefix,e);if(Gt[e])t.prefix=e;else if(et.autoFetchSvg&&-1<Object.keys(z).indexOf(e))t.prefix=e;else if(n){var a="fa"===t.prefix?Vt[n]||{prefix:null,iconName:null}:{};t.iconName=a.iconName||n,t.prefix=a.prefix||t.prefix}else e!==et.replacementClass&&0!==e.indexOf("fa-w-")&&t.rest.push(e);return t},Kt())}function Qt(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}function Zt(t){var n,e=t.tag,a=t.attributes,r=void 0===a?{}:a,i=t.children,o=void 0===i?[]:i;return"string"==typeof t?Pt(t):"<".concat(e," ").concat((n=r,Object.keys(n||{}).reduce(function(t,e){return t+"".concat(e,'="').concat(Pt(n[e]),'" ')},"").trim()),">").concat(o.map(Zt).join(""),"</").concat(e,">")}var $t=function(){};function te(t){return"string"==typeof(t.getAttribute?t.getAttribute(tt):null)}var ee={replace:function(t){var e=t[0],n=t[1].map(function(t){return Zt(t)}).join("\n");if(e.parentNode&&e.outerHTML)e.outerHTML=n+(et.keepOriginalSource&&"svg"!==e.tagName.toLowerCase()?"\x3c!-- ".concat(e.outerHTML," Font Awesome fontawesome.com --\x3e"):"");else if(e.parentNode){var a=document.createElement("span");e.parentNode.replaceChild(a,e),a.outerHTML=n}},nest:function(t){var e=t[0],n=t[1];if(~Ct(e).indexOf(et.replacementClass))return ee.replace(t);var a=new RegExp("".concat(et.familyPrefix,"-.*"));delete n[0].attributes.style,delete n[0].attributes.id;var r=n[0].attributes.class.split(" ").reduce(function(t,e){return e===et.replacementClass||e.match(a)?t.toSvg.push(e):t.toNode.push(e),t},{toNode:[],toSvg:[]});n[0].attributes.class=r.toSvg.join(" ");var i=n.map(function(t){return Zt(t)}).join("\n");e.setAttribute("class",r.toNode.join(" ")),e.setAttribute(tt,""),e.innerHTML=i}};function ne(t){t()}function ae(n,t){var a="function"==typeof t?t:$t;if(0===n.length)a();else{var e=ne;et.mutateApproach===S&&(e=v.requestAnimationFrame||ne),e(function(){var t=!0===et.autoReplaceSvg?ee.replace:ee[et.autoReplaceSvg]||ee.replace,e=Yt.begin("mutate");n.map(t),e(),a()})}}var re=!1;function ie(){re=!1}var oe=null;function ce(t){if(l&&et.observeMutations){var r=t.treeCallback,i=t.nodeCallback,o=t.pseudoElementsCallback,e=t.observeMutationsRoot,n=void 0===e?b:e;oe=new l(function(t){re||At(t).forEach(function(t){if("childList"===t.type&&0<t.addedNodes.length&&!te(t.addedNodes[0])&&(et.searchPseudoElements&&o(t.target),r(t.target)),"attributes"===t.type&&t.target.parentNode&&et.searchPseudoElements&&o(t.target.parentNode),"attributes"===t.type&&te(t.target)&&~T.indexOf(t.attributeName))if("class"===t.attributeName){var e=Jt(Ct(t.target)),n=e.prefix,a=e.iconName;n&&t.target.setAttribute("data-prefix",n),a&&t.target.setAttribute("data-icon",a)}else i(t.target)})}),m&&oe.observe(n,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function se(t){var e,n,a=t.getAttribute("data-prefix"),r=t.getAttribute("data-icon"),i=void 0!==t.innerText?t.innerText.trim():"",o=Jt(Ct(t));return a&&r&&(o.prefix=a,o.iconName=r),o.prefix&&1<i.length?o.iconName=(e=o.prefix,n=t.innerText,(qt[e]||{})[n]):o.prefix&&1===i.length&&(o.iconName=Bt(o.prefix,Ft(t.innerText))),o}var le=function(t){var e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t?t.toLowerCase().split(" ").reduce(function(t,e){var n=e.toLowerCase().split("-"),a=n[0],r=n.slice(1).join("-");if(a&&"h"===r)return t.flipX=!0,t;if(a&&"v"===r)return t.flipY=!0,t;if(r=parseFloat(r),isNaN(r))return t;switch(a){case"grow":t.size=t.size+r;break;case"shrink":t.size=t.size-r;break;case"left":t.x=t.x-r;break;case"right":t.x=t.x+r;break;case"up":t.y=t.y-r;break;case"down":t.y=t.y+r;break;case"rotate":t.rotate=t.rotate+r}return t},e):e};function fe(t){var e,n,a,r,i,o,c,s,l=se(t),f=l.iconName,u=l.prefix,d=l.rest,m=(e=t.getAttribute("style"),n=[],e&&(n=e.split(";").reduce(function(t,e){var n=e.split(":"),a=n[0],r=n.slice(1);return a&&0<r.length&&(t[a]=r.join(":").trim()),t},{})),n),p=le(t.getAttribute("data-fa-transform")),h=null!==(a=t.getAttribute("data-fa-symbol"))&&(""===a||a),g=(i=At((r=t).attributes).reduce(function(t,e){return"class"!==t.name&&"style"!==t.name&&(t[e.name]=e.value),t},{}),o=r.getAttribute("title"),c=r.getAttribute("data-fa-title-id"),et.autoA11y&&(o?i["aria-labelledby"]="".concat(et.replacementClass,"-title-").concat(c||kt()):(i["aria-hidden"]="true",i.focusable="false")),i),v=(s=t.getAttribute("data-fa-mask"))?Jt(s.split(" ").map(function(t){return t.trim()})):Kt();return{iconName:f,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:u,transform:p,symbol:h,mask:v,maskId:t.getAttribute("data-fa-mask-id"),extra:{classes:d,styles:m,attributes:g}}}function ue(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=(new Error).stack}(ue.prototype=Object.create(Error.prototype)).constructor=ue;var de={fill:"currentColor"},me={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},pe={tag:"path",attributes:$({},de,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},he=$({},me,{attributeName:"opacity"}),ge={tag:"g",children:[pe,{tag:"circle",attributes:$({},de,{cx:"256",cy:"364",r:"28"}),children:[{tag:"animate",attributes:$({},me,{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:$({},he,{values:"1;0;1;1;0;1;"})}]},{tag:"path",attributes:$({},de,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:[{tag:"animate",attributes:$({},he,{values:"1;0;0;0;0;1;"})}]},{tag:"path",attributes:$({},de,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:$({},he,{values:"0;0;1;1;0;0;"})}]}]},ve=W.styles;function be(t){var e=t[0],n=t[1],a=p(t.slice(4),1)[0];return{found:!0,width:e,height:n,icon:Array.isArray(a)?{tag:"g",attributes:{class:"".concat(et.familyPrefix,"-").concat(Y.GROUP)},children:[{tag:"path",attributes:{class:"".concat(et.familyPrefix,"-").concat(Y.SECONDARY),fill:"currentColor",d:a[0]}},{tag:"path",attributes:{class:"".concat(et.familyPrefix,"-").concat(Y.PRIMARY),fill:"currentColor",d:a[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:a}}}}function ye(a,r){return new vt(function(t,e){var n={found:!1,width:512,height:512,icon:ge};if(a&&r&&ve[r]&&ve[r][a])return t(be(ve[r][a]));a&&r&&!et.showMissingIcons?e(new ue("Icon is missing for prefix ".concat(r," with icon name ").concat(a))):t(n)})}var we=W.styles;function xe(t){var i,e,o,c,s,l,f,u,n,d,m,a=fe(t);return~a.extra.classes.indexOf(j)?function(t,e){var n=e.title,a=e.transform,r=e.extra,i=null,o=null;if(k){var c=parseInt(getComputedStyle(t).fontSize,10),s=t.getBoundingClientRect();i=s.width/c,o=s.height/c}return et.autoA11y&&!n&&(r.attributes["aria-hidden"]="true"),vt.resolve([t,Lt({content:t.innerHTML,width:i,height:o,transform:a,title:n,extra:r,watchable:!0})])}(t,a):(i=t,o=(e=a).iconName,c=e.title,s=e.titleId,l=e.prefix,f=e.transform,u=e.symbol,n=e.mask,d=e.maskId,m=e.extra,new vt(function(r,t){vt.all([ye(o,l),ye(n.iconName,n.prefix)]).then(function(t){var e=p(t,2),n=e[0],a=e[1];r([i,jt({icons:{main:n,mask:a},prefix:l,iconName:o,transform:f,symbol:u,mask:a,maskId:d,title:c,titleId:s,extra:m,watchable:!0})])})}))}function ke(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(m){var e=b.documentElement.classList,a=function(t){return e.add("".concat(P,"-").concat(t))},r=function(t){return e.remove("".concat(P,"-").concat(t))},i=et.autoFetchSvg?Object.keys(z):Object.keys(we),o=[".".concat(j,":not([").concat(tt,"])")].concat(i.map(function(t){return".".concat(t,":not([").concat(tt,"])")})).join(", ");if(0!==o.length){var c=[];try{c=At(t.querySelectorAll(o))}catch(t){}if(0<c.length){a("pending"),r("complete");var s=Yt.begin("onTree"),l=c.reduce(function(t,e){try{var n=xe(e);n&&t.push(n)}catch(t){M||t instanceof ue&&console.error(t)}return t},[]);return new vt(function(e,t){vt.all(l).then(function(t){ae(t,function(){a("active"),a("complete"),r("pending"),"function"==typeof n&&n(),s(),e()})}).catch(function(){s(),t()})})}}}}function Ae(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;xe(t).then(function(t){t&&ae([t],e)})}function Ce(p,h){var g="".concat(x).concat(h.replace(":","-"));return new vt(function(a,t){if(null!==p.getAttribute(g))return a();var e=At(p.children).filter(function(t){return t.getAttribute(w)===h})[0],n=v.getComputedStyle(p,h),r=n.getPropertyValue("font-family").match(L),i=n.getPropertyValue("font-weight"),o=n.getPropertyValue("content");if(e&&!r)return p.removeChild(e),a();if(r&&"none"!==o&&""!==o){var c=n.getPropertyValue("content"),s=~["Solid","Regular","Light","Duotone","Brands","Kit"].indexOf(r[2])?E[r[2].toLowerCase()]:R[i],l=Ft(3===c.length?c.substr(1,1):c),f=Bt(s,l),u=f;if(!f||e&&e.getAttribute(C)===s&&e.getAttribute(O)===u)a();else{p.setAttribute(g,u),e&&p.removeChild(e);var d={iconName:null,title:null,titleId:null,prefix:null,transform:yt,symbol:!1,mask:null,maskId:null,extra:{classes:[],styles:{},attributes:{}}},m=d.extra;m.attributes[w]=h,ye(f,s).then(function(t){var e=jt($({},d,{icons:{main:t,mask:Kt()},prefix:s,iconName:u,extra:m,watchable:!0})),n=b.createElement("svg");":before"===h?p.insertBefore(n,p.firstChild):p.appendChild(n),n.outerHTML=e.map(function(t){return Zt(t)}).join("\n"),p.removeAttribute(g),a()}).catch(t)}}else a()})}function Oe(t){return vt.all([Ce(t,":before"),Ce(t,":after")])}function Pe(t){return!(t.parentNode===document.head||~N.indexOf(t.tagName.toUpperCase())||t.getAttribute(w)||t.parentNode&&"svg"===t.parentNode.tagName)}function Se(r){if(m)return new vt(function(t,e){var n=At(r.querySelectorAll("*")).filter(Pe).map(Oe),a=Yt.begin("searchPseudoElements");re=!0,vt.all(n).then(function(){a(),ie(),t()}).catch(function(){a(),ie(),e()})})}var Ne="svg:not(:root).svg-inline--fa{overflow:visible}.svg-inline--fa{display:inline-block;font-size:inherit;height:1em;overflow:visible;vertical-align:-.125em}.svg-inline--fa.fa-lg{vertical-align:-.225em}.svg-inline--fa.fa-w-1{width:.0625em}.svg-inline--fa.fa-w-2{width:.125em}.svg-inline--fa.fa-w-3{width:.1875em}.svg-inline--fa.fa-w-4{width:.25em}.svg-inline--fa.fa-w-5{width:.3125em}.svg-inline--fa.fa-w-6{width:.375em}.svg-inline--fa.fa-w-7{width:.4375em}.svg-inline--fa.fa-w-8{width:.5em}.svg-inline--fa.fa-w-9{width:.5625em}.svg-inline--fa.fa-w-10{width:.625em}.svg-inline--fa.fa-w-11{width:.6875em}.svg-inline--fa.fa-w-12{width:.75em}.svg-inline--fa.fa-w-13{width:.8125em}.svg-inline--fa.fa-w-14{width:.875em}.svg-inline--fa.fa-w-15{width:.9375em}.svg-inline--fa.fa-w-16{width:1em}.svg-inline--fa.fa-w-17{width:1.0625em}.svg-inline--fa.fa-w-18{width:1.125em}.svg-inline--fa.fa-w-19{width:1.1875em}.svg-inline--fa.fa-w-20{width:1.25em}.svg-inline--fa.fa-pull-left{margin-right:.3em;width:auto}.svg-inline--fa.fa-pull-right{margin-left:.3em;width:auto}.svg-inline--fa.fa-border{height:1.5em}.svg-inline--fa.fa-li{width:2em}.svg-inline--fa.fa-fw{width:1.25em}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers-text{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter{background-color:#ff253a;border-radius:1em;-webkit-box-sizing:border-box;box-sizing:border-box;color:#fff;height:1.5em;line-height:1;max-width:5em;min-width:1.5em;overflow:hidden;padding:.25em;right:0;text-overflow:ellipsis;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-bottom-right{bottom:0;right:0;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom right;transform-origin:bottom right}.fa-layers-bottom-left{bottom:0;left:0;right:auto;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom left;transform-origin:bottom left}.fa-layers-top-right{right:0;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-top-left{left:0;right:auto;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top left;transform-origin:top left}.fa-lg{font-size:1.3333333333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;position:absolute;text-align:center;width:2em;line-height:inherit}.fa-border{border:solid .08em #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.fa-rotate-90{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-webkit-transform:scale(-1,1);transform:scale(-1,1)}.fa-flip-vertical{-webkit-transform:scale(1,-1);transform:scale(1,-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{-webkit-transform:scale(-1,-1);transform:scale(-1,-1)}:root .fa-flip-both,:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-rotate-90{-webkit-filter:none;filter:none}.fa-stack{display:inline-block;height:2em;position:relative;width:2.5em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.svg-inline--fa.fa-stack-1x{height:1em;width:1.25em}.svg-inline--fa.fa-stack-2x{height:2em;width:2.5em}.fa-inverse{color:#fff}.sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}.svg-inline--fa .fa-primary{fill:var(--fa-primary-color,currentColor);opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa .fa-secondary{fill:var(--fa-secondary-color,currentColor);opacity:.4;opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-primary{opacity:.4;opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-secondary{opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa mask .fa-primary,.svg-inline--fa mask .fa-secondary{fill:#000}.fad.fa-inverse{color:#fff}";function Me(){var t=g,e=y,n=et.familyPrefix,a=et.replacementClass,r=Ne;if(n!==t||a!==e){var i=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),c=new RegExp("\\.".concat(e),"g");r=r.replace(i,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(c,".".concat(a))}return r}function ze(){et.autoAddCss&&!Ie&&(wt(Me()),Ie=!0)}function Ee(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(t){return Zt(t)})}}),Object.defineProperty(e,"node",{get:function(){if(m){var t=b.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function je(t){var e=t.prefix,n=void 0===e?"fa":e,a=t.iconName;if(a)return Qt(Re.definitions,n,a)||Qt(W.styles,n,a)}var Le,Re=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.definitions={}}var e,n,a;return e=t,(n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(function(t){e.definitions[t]=$({},e.definitions[t]||{},r[t]),function t(e,a){var n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,i=Object.keys(a).reduce(function(t,e){var n=a[e];return n.icon?t[n.iconName]=n.icon:t[e]=n,t},{});"function"!=typeof W.hooks.addPack||r?W.styles[e]=$({},W.styles[e]||{},i):W.hooks.addPack(e,i),"fas"===e&&t("fa",a)}(t,r[t]),Xt()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,t){var o=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(o).map(function(t){var e=o[t],n=e.prefix,a=e.iconName,r=e.icon;i[n]||(i[n]={}),i[n][a]=r}),i}}])&&i(e.prototype,n),a&&i(e,a),t}()),Ie=!1,_e={i2svg:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(m){ze();var e=t.node,n=void 0===e?b:e,a=t.callback,r=void 0===a?function(){}:a;return et.searchPseudoElements&&Se(n),ke(n,r)}return vt.reject("Operation requires a DOM of some kind.")},css:Me,insertCss:function(){Ie||(wt(Me()),Ie=!0)},watch:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.autoReplaceSvgRoot,n=t.observeMutationsRoot;!1===et.autoReplaceSvg&&(et.autoReplaceSvg=!0),et.observeMutations=!0,X(function(){He({autoReplaceSvgRoot:e}),ce({treeCallback:ke,nodeCallback:Ae,pseudoElementsCallback:Se,observeMutationsRoot:n})})}},Te=(Le=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.transform,a=void 0===n?yt:n,r=e.symbol,i=void 0!==r&&r,o=e.mask,c=void 0===o?null:o,s=e.maskId,l=void 0===s?null:s,f=e.title,u=void 0===f?null:f,d=e.titleId,m=void 0===d?null:d,p=e.classes,h=void 0===p?[]:p,g=e.attributes,v=void 0===g?{}:g,b=e.styles,y=void 0===b?{}:b;if(t){var w=t.prefix,x=t.iconName,k=t.icon;return Ee($({type:"icon"},t),function(){return ze(),et.autoA11y&&(u?v["aria-labelledby"]="".concat(et.replacementClass,"-title-").concat(m||kt()):(v["aria-hidden"]="true",v.focusable="false")),jt({icons:{main:be(k),mask:c?be(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:w,iconName:x,transform:$({},yt,a),symbol:i,title:u,maskId:l,titleId:m,extra:{attributes:v,styles:y,classes:h}})})}},function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=(t||{}).icon?t:je(t||{}),a=e.mask;return a&&(a=(a||{}).icon?a:je(a||{})),Le(n,$({},e,{mask:a}))}),Ye={noAuto:function(){et.autoReplaceSvg=!1,et.observeMutations=!1,oe&&oe.disconnect()},config:et,dom:_e,library:Re,parse:{transform:function(t){return le(t)}},findIconDefinition:je,icon:Te,text:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.transform,a=void 0===n?yt:n,r=e.title,i=void 0===r?null:r,o=e.classes,c=void 0===o?[]:o,s=e.attributes,l=void 0===s?{}:s,f=e.styles,u=void 0===f?{}:f;return Ee({type:"text",content:t},function(){return ze(),Lt({content:t,transform:$({},yt,a),title:i,extra:{attributes:l,styles:u,classes:["".concat(et.familyPrefix,"-layers-text")].concat(d(c))}})})},counter:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.title,a=void 0===n?null:n,r=e.classes,i=void 0===r?[]:r,o=e.attributes,c=void 0===o?{}:o,s=e.styles,l=void 0===s?{}:s;return Ee({type:"counter",content:t},function(){return ze(),function(t){var e=t.content,n=t.title,a=t.extra,r=$({},a.attributes,n?{title:n}:{},{class:a.classes.join(" ")}),i=St(a.styles);0<i.length&&(r.style=i);var o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}({content:t.toString(),title:a,extra:{attributes:c,styles:l,classes:["".concat(et.familyPrefix,"-layers-counter")].concat(d(i))}})})},layer:function(t){var e=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).classes,n=void 0===e?[]:e;return Ee({type:"layer"},function(){ze();var e=[];return t(function(t){Array.isArray(t)?t.map(function(t){e=e.concat(t.abstract)}):e=e.concat(t.abstract)}),[{tag:"span",attributes:{class:["".concat(et.familyPrefix,"-layers")].concat(d(n)).join(" ")},children:e}]})},toHtml:Zt},He=function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,e=void 0===t?b:t;(0<Object.keys(W.styles).length||et.autoFetchSvg)&&m&&et.autoReplaceSvg&&Ye.dom.i2svg({node:e})};!function(t){try{t()}catch(t){if(!M)throw t}}(function(){u&&(v.FontAwesome||(v.FontAwesome=Ye),X(function(){He(),ce({treeCallback:ke,nodeCallback:Ae,pseudoElementsCallback:Se})})),W.hooks=$({},W.hooks,{addPack:function(t,e){W.styles[t]=$({},W.styles[t]||{},e),Xt(),He()},addShims:function(t){var e;(e=W.shims).push.apply(e,d(t)),Xt(),He()}})})}();;

/* /nu_edu/static/src/js/dropify.js defined in bundle 'web.assets_frontend_lazy' */
;(function(root,factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){module.exports=factory(require('jquery'));}else{root.Dropify=factory(root.jQuery);}}(this,function($){var pluginName="dropify";function Dropify(element,options){if(!(window.File&&window.FileReader&&window.FileList&&window.Blob)){return;}
var defaults={defaultFile:'',maxFileSize:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,showRemove:true,showLoader:true,showErrors:true,errorTimeout:3000,errorsPosition:'overlay',imgFileExtensions:['png','jpg','jpeg','gif','bmp'],maxFileSizePreview:"5M",allowedFormats:['portrait','square','landscape'],allowedFileExtensions:['*'],messages:{'default':'Drag and drop a file here or click','replace':'Drag and drop or click to replace','remove':'Remove','error':'Ooops, something wrong happended.'},error:{'fileSize':'The file size is too big ({{ value }} max).','minWidth':'The image width is too small ({{ value }}}px min).','maxWidth':'The image width is too big ({{ value }}}px max).','minHeight':'The image height is too small ({{ value }}}px min).','maxHeight':'The image height is too big ({{ value }}px max).','imageFormat':'The image format is not allowed ({{ value }} only).','fileExtension':'The file is not allowed ({{ value }} only).'},tpl:{wrap:'<div class="dropify-wrapper"></div>',loader:'<div class="dropify-loader"></div>',message:'<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}</p></div>',preview:'<div class="dropify-preview"><span class="dropify-render"></span><div class="dropify-infos"><div class="dropify-infos-inner"><p class="dropify-infos-message">{{ replace }}</p></div></div></div>',filename:'<p class="dropify-filename"><span class="dropify-filename-inner"></span></p>',clearButton:'<button type="button" class="dropify-clear">{{ remove }}</button>',errorLine:'<p class="dropify-error">{{ error }}</p>',errorsContainer:'<div class="dropify-errors-container"><ul></ul></div>'}};this.element=element;this.input=$(this.element);this.wrapper=null;this.preview=null;this.filenameWrapper=null;this.settings=$.extend(true,defaults,options,this.input.data());this.errorsEvent=$.Event('dropify.errors');this.isDisabled=false;this.isInit=false;this.file={object:null,name:null,size:null,width:null,height:null,type:null};if(!Array.isArray(this.settings.allowedFormats)){this.settings.allowedFormats=this.settings.allowedFormats.split(' ');}
if(!Array.isArray(this.settings.allowedFileExtensions)){this.settings.allowedFileExtensions=this.settings.allowedFileExtensions.split(' ');}
this.onChange=this.onChange.bind(this);this.clearElement=this.clearElement.bind(this);this.onFileReady=this.onFileReady.bind(this);this.translateMessages();this.createElements();this.setContainerSize();this.errorsEvent.errors=[];this.input.on('change',this.onChange);}
Dropify.prototype.onChange=function()
{this.resetPreview();this.readFile(this.element);};Dropify.prototype.createElements=function()
{this.isInit=true;this.input.wrap($(this.settings.tpl.wrap));this.wrapper=this.input.parent();var messageWrapper=$(this.settings.tpl.message).insertBefore(this.input);$(this.settings.tpl.errorLine).appendTo(messageWrapper);if(this.isTouchDevice()===true){this.wrapper.addClass('touch-fallback');}
if(this.input.attr('disabled')){this.isDisabled=true;this.wrapper.addClass('disabled');}
if(this.settings.showLoader===true){this.loader=$(this.settings.tpl.loader);this.loader.insertBefore(this.input);}
this.preview=$(this.settings.tpl.preview);this.preview.insertAfter(this.input);if(this.isDisabled===false&&this.settings.showRemove===true){this.clearButton=$(this.settings.tpl.clearButton);this.clearButton.insertAfter(this.input);this.clearButton.on('click',this.clearElement);}
this.filenameWrapper=$(this.settings.tpl.filename);this.filenameWrapper.prependTo(this.preview.find('.dropify-infos-inner'));if(this.settings.showErrors===true){this.errorsContainer=$(this.settings.tpl.errorsContainer);if(this.settings.errorsPosition==='outside'){this.errorsContainer.insertAfter(this.wrapper);}else{this.errorsContainer.insertBefore(this.input);}}
var defaultFile=this.settings.defaultFile||'';if(defaultFile.trim()!==''){this.file.name=this.cleanFilename(defaultFile);this.setPreview(this.isImage(),defaultFile);}};Dropify.prototype.readFile=function(input)
{if(input.files&&input.files[0]){var reader=new FileReader();var image=new Image();var file=input.files[0];var srcBase64=null;var _this=this;var eventFileReady=$.Event("dropify.fileReady");this.clearErrors();this.showLoader();this.setFileInformations(file);this.errorsEvent.errors=[];this.checkFileSize();this.isFileExtensionAllowed();if(this.isImage()&&this.file.size<this.sizeToByte(this.settings.maxFileSizePreview)){this.input.on('dropify.fileReady',this.onFileReady);reader.readAsDataURL(file);reader.onload=function(_file){srcBase64=_file.target.result;image.src=_file.target.result;image.onload=function(){_this.setFileDimensions(this.width,this.height);_this.validateImage();_this.input.trigger(eventFileReady,[true,srcBase64]);};}.bind(this);}else{this.onFileReady(false);}}};Dropify.prototype.onFileReady=function(event,previewable,src)
{this.input.off('dropify.fileReady',this.onFileReady);if(this.errorsEvent.errors.length===0){this.setPreview(previewable,src);}else{this.input.trigger(this.errorsEvent,[this]);for(var i=this.errorsEvent.errors.length-1;i>=0;i--){var errorNamespace=this.errorsEvent.errors[i].namespace;var errorKey=errorNamespace.split('.').pop();this.showError(errorKey);}
if(typeof this.errorsContainer!=="undefined"){this.errorsContainer.addClass('visible');var errorsContainer=this.errorsContainer;setTimeout(function(){errorsContainer.removeClass('visible');},this.settings.errorTimeout);}
this.wrapper.addClass('has-error');this.resetPreview();this.clearElement();}};Dropify.prototype.setFileInformations=function(file)
{this.file.object=file;this.file.name=file.name;this.file.size=file.size;this.file.type=file.type;this.file.width=null;this.file.height=null;};Dropify.prototype.setFileDimensions=function(width,height)
{this.file.width=width;this.file.height=height;};Dropify.prototype.setPreview=function(previewable,src)
{this.wrapper.removeClass('has-error').addClass('has-preview');this.filenameWrapper.children('.dropify-filename-inner').html(this.file.name);var render=this.preview.children('.dropify-render');this.hideLoader();if(previewable===true){var imgTag=$('<img />').attr('src',src);if(this.settings.height){imgTag.css("max-height",this.settings.height);}
imgTag.appendTo(render);}else{$('<i />').attr('class','dropify-font-file').appendTo(render);$('<span class="dropify-extension" />').html(this.getFileType()).appendTo(render);}
this.preview.fadeIn();};Dropify.prototype.resetPreview=function()
{this.wrapper.removeClass('has-preview');var render=this.preview.children('.dropify-render');render.find('.dropify-extension').remove();render.find('i').remove();render.find('img').remove();this.preview.hide();this.hideLoader();};Dropify.prototype.cleanFilename=function(src)
{var filename=src.split('\\').pop();if(filename==src){filename=src.split('/').pop();}
return src!==""?filename:'';};Dropify.prototype.clearElement=function()
{if(this.errorsEvent.errors.length===0){var eventBefore=$.Event("dropify.beforeClear");this.input.trigger(eventBefore,[this]);if(eventBefore.result!==false){this.resetFile();this.input.val('');this.resetPreview();this.input.trigger($.Event("dropify.afterClear"),[this]);}}else{this.resetFile();this.input.val('');this.resetPreview();}};Dropify.prototype.resetFile=function()
{this.file.object=null;this.file.name=null;this.file.size=null;this.file.type=null;this.file.width=null;this.file.height=null;};Dropify.prototype.setContainerSize=function()
{if(this.settings.height){this.wrapper.height(this.settings.height);}};Dropify.prototype.isTouchDevice=function()
{return(('ontouchstart'in window)||(navigator.MaxTouchPoints>0)||(navigator.msMaxTouchPoints>0));};Dropify.prototype.getFileType=function()
{return this.file.name.split('.').pop().toLowerCase();};Dropify.prototype.isImage=function()
{if(this.settings.imgFileExtensions.indexOf(this.getFileType())!="-1"){return true;}
return false;};Dropify.prototype.isFileExtensionAllowed=function(){if(this.settings.allowedFileExtensions.indexOf('*')!="-1"||
this.settings.allowedFileExtensions.indexOf(this.getFileType())!="-1"){return true;}
this.pushError("fileExtension");return false;};Dropify.prototype.translateMessages=function()
{for(var name in this.settings.tpl){for(var key in this.settings.messages){this.settings.tpl[name]=this.settings.tpl[name].replace('{{ '+key+' }}',this.settings.messages[key]);}}};Dropify.prototype.checkFileSize=function()
{if(this.sizeToByte(this.settings.maxFileSize)!==0&&this.file.size>this.sizeToByte(this.settings.maxFileSize)){this.pushError("fileSize");}};Dropify.prototype.sizeToByte=function(size)
{var value=0;if(size!==0){var unit=size.slice(-1).toUpperCase(),kb=1024,mb=kb*1024,gb=mb*1024;if(unit==='K'){value=parseFloat(size)*kb;}else if(unit==='M'){value=parseFloat(size)*mb;}else if(unit==='G'){value=parseFloat(size)*gb;}}
return value;};Dropify.prototype.validateImage=function()
{if(this.settings.minWidth!==0&&this.settings.minWidth>=this.file.width){this.pushError("minWidth");}
if(this.settings.maxWidth!==0&&this.settings.maxWidth<=this.file.width){this.pushError("maxWidth");}
if(this.settings.minHeight!==0&&this.settings.minHeight>=this.file.height){this.pushError("minHeight");}
if(this.settings.maxHeight!==0&&this.settings.maxHeight<=this.file.height){this.pushError("maxHeight");}
if(this.settings.allowedFormats.indexOf(this.getImageFormat())=="-1"){this.pushError("imageFormat");}};Dropify.prototype.getImageFormat=function()
{if(this.file.width==this.file.height){return"square";}
if(this.file.width<this.file.height){return"portrait";}
if(this.file.width>this.file.height){return"landscape";}};Dropify.prototype.pushError=function(errorKey){var e=$.Event("dropify.error."+errorKey);this.errorsEvent.errors.push(e);this.input.trigger(e,[this]);};Dropify.prototype.clearErrors=function()
{if(typeof this.errorsContainer!=="undefined"){this.errorsContainer.children('ul').html('');}};Dropify.prototype.showError=function(errorKey)
{if(typeof this.errorsContainer!=="undefined"){this.errorsContainer.children('ul').append('<li>'+this.getError(errorKey)+'</li>');}};Dropify.prototype.getError=function(errorKey)
{var error=this.settings.error[errorKey],value='';if(errorKey==='fileSize'){value=this.settings.maxFileSize;}else if(errorKey==='minWidth'){value=this.settings.minWidth;}else if(errorKey==='maxWidth'){value=this.settings.maxWidth;}else if(errorKey==='minHeight'){value=this.settings.minHeight;}else if(errorKey==='maxHeight'){value=this.settings.maxHeight;}else if(errorKey==='imageFormat'){value=this.settings.allowedFormats.join(', ');}else if(errorKey==='fileExtension'){value=this.settings.allowedFileExtensions.join(', ');}
if(value!==''){return error.replace('{{ value }}',value);}
return error;};Dropify.prototype.showLoader=function()
{if(typeof this.loader!=="undefined"){this.loader.show();}};Dropify.prototype.hideLoader=function()
{if(typeof this.loader!=="undefined"){this.loader.hide();}};Dropify.prototype.destroy=function()
{this.input.siblings().remove();this.input.unwrap();this.isInit=false;};Dropify.prototype.init=function()
{this.createElements();};Dropify.prototype.isDropified=function()
{return this.isInit;};$.fn[pluginName]=function(options){this.each(function(){if(!$.data(this,pluginName)){$.data(this,pluginName,new Dropify(this,options));}});return this;};return Dropify;}));;

/* /nu_edu/static/src/js/toastr.min.js defined in bundle 'web.assets_frontend_lazy' */
!function(e){e(["jquery"],function(e){return function(){function t(e,t,n){return g({type:O.error,iconClass:m().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=m()),v=e("#"+t.containerId),v.length?v:(n&&(v=d(t)),v)}function o(e,t,n){return g({type:O.info,iconClass:m().iconClasses.info,message:e,optionsOverride:n,title:t})}function s(e){C=e}function i(e,t,n){return g({type:O.success,iconClass:m().iconClasses.success,message:e,optionsOverride:n,title:t})}function a(e,t,n){return g({type:O.warning,iconClass:m().iconClasses.warning,message:e,optionsOverride:n,title:t})}function r(e,t){var o=m();v||n(o),u(e,o,t)||l(o)}function c(t){var o=m();return v||n(o),t&&0===e(":focus",t).length?void h(t):void(v.children().length&&v.remove())}function l(t){for(var n=v.children(),o=n.length-1;o>=0;o--)u(e(n[o]),t)}function u(t,n,o){var s=!(!o||!o.force)&&o.force;return!(!t||!s&&0!==e(":focus",t).length)&&(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){h(t)}}),!0)}function d(t){return v=e("<div/>").attr("id",t.containerId).addClass(t.positionClass),v.appendTo(e(t.target)),v}function p(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function f(e){C&&C(e)}function g(t){function o(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function s(){c(),u(),d(),p(),g(),C(),l(),i()}function i(){var e="";switch(t.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}I.attr("aria-live",e)}function a(){E.closeOnHover&&I.hover(H,D),!E.onclick&&E.tapToDismiss&&I.click(b),E.closeButton&&j&&j.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),E.onCloseClick&&E.onCloseClick(e),b(!0)}),E.onclick&&I.click(function(e){E.onclick(e),b()})}function r(){I.hide(),I[E.showMethod]({duration:E.showDuration,easing:E.showEasing,complete:E.onShown}),E.timeOut>0&&(k=setTimeout(b,E.timeOut),F.maxHideTime=parseFloat(E.timeOut),F.hideEta=(new Date).getTime()+F.maxHideTime,E.progressBar&&(F.intervalId=setInterval(x,10)))}function c(){t.iconClass&&I.addClass(E.toastClass).addClass(y)}function l(){E.newestOnTop?v.prepend(I):v.append(I)}function u(){if(t.title){var e=t.title;E.escapeHtml&&(e=o(t.title)),M.append(e).addClass(E.titleClass),I.append(M)}}function d(){if(t.message){var e=t.message;E.escapeHtml&&(e=o(t.message)),B.append(e).addClass(E.messageClass),I.append(B)}}function p(){E.closeButton&&(j.addClass(E.closeClass).attr("role","button"),I.prepend(j))}function g(){E.progressBar&&(q.addClass(E.progressClass),I.prepend(q))}function C(){E.rtl&&I.addClass("rtl")}function O(e,t){if(e.preventDuplicates){if(t.message===w)return!0;w=t.message}return!1}function b(t){var n=t&&E.closeMethod!==!1?E.closeMethod:E.hideMethod,o=t&&E.closeDuration!==!1?E.closeDuration:E.hideDuration,s=t&&E.closeEasing!==!1?E.closeEasing:E.hideEasing;if(!e(":focus",I).length||t)return clearTimeout(F.intervalId),I[n]({duration:o,easing:s,complete:function(){h(I),clearTimeout(k),E.onHidden&&"hidden"!==P.state&&E.onHidden(),P.state="hidden",P.endTime=new Date,f(P)}})}function D(){(E.timeOut>0||E.extendedTimeOut>0)&&(k=setTimeout(b,E.extendedTimeOut),F.maxHideTime=parseFloat(E.extendedTimeOut),F.hideEta=(new Date).getTime()+F.maxHideTime)}function H(){clearTimeout(k),F.hideEta=0,I.stop(!0,!0)[E.showMethod]({duration:E.showDuration,easing:E.showEasing})}function x(){var e=(F.hideEta-(new Date).getTime())/F.maxHideTime*100;q.width(e+"%")}var E=m(),y=t.iconClass||E.iconClass;if("undefined"!=typeof t.optionsOverride&&(E=e.extend(E,t.optionsOverride),y=t.optionsOverride.iconClass||y),!O(E,t)){T++,v=n(E,!0);var k=null,I=e("<div/>"),M=e("<div/>"),B=e("<div/>"),q=e("<div/>"),j=e(E.closeHtml),F={intervalId:null,hideEta:null,maxHideTime:null},P={toastId:T,state:"visible",startTime:new Date,options:E,map:t};return s(),r(),a(),f(P),E.debug&&console&&console.log(P),I}}function m(){return e.extend({},p(),b.options)}function h(e){v||(v=n()),e.is(":visible")||(e.remove(),e=null,0===v.children().length&&(v.remove(),w=void 0))}var v,C,w,T=0,O={error:"error",info:"info",success:"success",warning:"warning"},b={clear:r,remove:c,error:t,getContainer:n,info:o,options:{},subscribe:s,success:i,version:"2.1.3",warning:a};return b}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)});;

/* /nu_edu/website/application.js defined in bundle 'web.assets_frontend_lazy' */
$(document).ready(function(){$('.dropify').dropify({messages:{'default':'Photograph','replace':'Replace Photograph','remove':'Remove','error':'Ooops, something wrong happened.'}});$("#personal_number").val("");$("#appointment").val("");$("#joining_date").val("");$("#commission_date").val("");$("#retirement_date").val("");$("#wing").val("");$("#service").val("");$("#rank_id").val("");$("#regiment_id").val("");$("#flotilla_id").val("");$("#squadron_id").val("");$("#institute_id").val("");$("#cadet_division").val("");$('#is_existing_cadet').attr('checked',false);$("#existing_cadet_number").val("");$('#is_forgot_cadet').attr('checked',false);$("#description_about_cadet").val("");let selected_item=$("#registered_as option:selected").val();if(selected_item==='cadet'){$("#div_cadet_division").show();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_service").hide();$("#div_wing").show();$("#div_personal_number").show();$("#div_rank").show();$("#div_appointment").hide();$("#div_joining_date").show();$("#div_commission_date").hide();$("#div_retirement_date").hide();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").show();$("#lbl_wing").html('Wing<span class="text-danger">*</span>');$('#lbl_personal_number').html('Cadet Number<span class="text-danger">*</span>');$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$("#cadet_division").attr("required","true");$("#wing").attr("required","true");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#appointment").removeAttr("required");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").removeAttr("required");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");$("#description_about_cadet").removeAttr("required");let cadet_division=$("#cadet_division option:selected").val();if(cadet_division==='senior'){$("#div_existing_cadet").show();}else{$("#div_existing_cadet").hide();$("#div_existing_cadet_number").hide();}
let is_existing_cadet=$("#is_existing_cadet").is(":checked");if(is_existing_cadet==true){$("#div_existing_cadet_number").show();}else{$("#div_existing_cadet_number").hide();}
let selected_wing=$("#wing option:selected").val();if(selected_wing==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron<span class="text-danger">*</span>');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");$("#institute_id").attr("required","true");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").hide();$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$('#lbl_institute').html('Institute');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#institute_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('wing',selected_wing);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='ex_cadet'){$("#div_cadet_division").show();$("#div_existing_cadet").hide();$("#div_existing_cadet_number").hide();$("#div_is_forgot_cadet").show();$("#div_description_about_cadet").hide();$("#div_service").hide();$("#div_wing").show();$("#div_personal_number").show();$("#div_rank").show();$("#div_appointment").hide();$("#div_joining_date").show();$("#div_commission_date").hide();$("#div_retirement_date").show();$("#div_current_profession").show();$("#div_profession_details").show();$("#div_reference_file").show();$("#lbl_wing").html('Wing<span class="text-danger">*</span>');$('#lbl_personal_number').html('Cadet Number<span class="text-danger">*</span>');$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$("#lbl_retirement_date").html('Expiry Date<span class="text-danger">*</span>');$("#cadet_division").attr("required","true");$("#existing_cadet_number").removeAttr("required");$("#wing").attr("required","true");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#appointment").removeAttr("required");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").attr("required","true");$("#current_profession").attr("required","true");$("#profession_details").attr("required","true");let selected_wing=$("#wing option:selected").val();if(selected_wing==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron<span class="text-danger">*</span>');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");$("#institute_id").attr("required","true");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").hide();$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$('#lbl_institute').html('Institute');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#institute_id").removeAttr("required");}
let is_forgot_cadet=$("#is_forgot_cadet").is(":checked");if(is_forgot_cadet==true){$("#div_description_about_cadet").show();$('#lbl_personal_number').html('Cadet Number');$("#lbl_rank").html('Rank');$("#lbl_joining_date").html('Joining Date');$("#lbl_retirement_date").html('Retirement Date');$("#lbl_regiment").html('Regiment');$("#lbl_flotilla").html('Flotilla');$("#lbl_squadron").html('Squadron');$("#description_about_cadet").attr("required","true");$("#personal_number").removeAttr("required");$("#rank_id").removeAttr("required");$("#joining_date").removeAttr("required");$("#retirement_date").removeAttr("required");$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('wing',selected_wing);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='bncco_or_puo_or_tuo'){$("#div_existing_cadet").hide();$("#div_existing_cadet_number").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").show();$("#div_service").hide();$("#div_personal_number").show();$("#div_rank").show();$("#div_appointment").show();$("#div_joining_date").show();$("#div_commission_date").show();$("#div_retirement_date").hide();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$('#lbl_wing').html('Wing<span class="text-danger">*</span>');$('#lbl_personal_number').html('Personal Number/CCO Number<span class="text-danger">*</span>');$('#lbl_rank').html('Rank<span class="text-danger">*</span>');$('#lbl_retirement_date').html('Retirement Date<span class="text-danger">*</span>');$("#lbl_rank span").remove();$("#lbl_commission_date span").remove();$("#cadet_division").removeAttr("required");$("#existing_cadet_number").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#wing").attr("required","true");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").removeAttr("required");$("#appointment").attr("required","true");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").removeAttr("required");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");let selected_wing=$("#wing option:selected").val();if(selected_wing==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron<span class="text-danger">*</span>');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");$("#institute_id").attr("required","true");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").hide();$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$('#lbl_institute').html('Institute');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#institute_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('wing',selected_wing);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='ex_bncco_or_puo_or_tuo'){$("#div_existing_cadet").hide();$("#div_existing_cadet_number").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").show();$("#div_service").hide();$("#div_personal_number").show();$("#div_rank").show();$("#div_appointment").show();$("#div_joining_date").show();$("#div_commission_date").show();$("#div_retirement_date").show();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$('#lbl_wing').html('Wing<span class="text-danger">*</span>');$('#lbl_personal_number').html('Personal Number/CCO Number<span class="text-danger">*</span>');$('#lbl_rank').html('Rank<span class="text-danger">*</span>');$('#lbl_appointment').html('Appointment<span class="text-danger">*</span>');$('#lbl_retirement_date').html('Retirement Date<span class="text-danger">*</span>');$("#lbl_rank span").remove();$("#lbl_commission_date span").remove();$("#cadet_division").removeAttr("required");$("#existing_cadet_number").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#wing").attr("required","true");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").removeAttr("required");$("#appointment").attr("required","true");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").attr("required");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");let selected_wing=$("#wing option:selected").val();if(selected_wing==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron<span class="text-danger">*</span>');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");$("#institute_id").attr("required","true");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").hide();$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$('#lbl_institute').html('Institute');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#institute_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('wing',selected_wing);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='serving_bncc_military_and_civil_officer'){$("#div_existing_cadet").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").hide();$("#div_service").show();$("#div_personal_number").show();$("#div_rank").show();$("#div_institute").hide();$("#div_appointment").show();$("#div_joining_date").hide();$("#div_commission_date").show();$("#div_retirement_date").hide();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$('#lbl_appointment').html('Appointment<span class="text-danger">*</span>');$("#lbl_commission_date").html('Commissioned Date<span class="text-danger">*</span>');$("#cadet_division").removeAttr("required");$("#wing").removeAttr("required");$("#service").attr("required","true");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#institute_id").removeAttr("required");$("#appointment").attr("required","true");$("#joining_date").removeAttr("required");$("#commission_date").attr("required","true");$("#retirement_date").removeAttr("required");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#existing_cadet_number").removeAttr("required");let selected_service=$("#service option:selected").val();if(selected_service==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('BA Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Headquarter/Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}else if(selected_service==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$('#lbl_personal_number').html('Personal Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Headquarter/Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");}else if(selected_service==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$('#lbl_personal_number').html('BD Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Headquarter/Squadron<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");}else if(selected_service==='civil'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('Personal Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('Personal Number<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('service',selected_service);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='ex_serving_bncc_military_and_civil_officer'){$("#div_existing_cadet").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").hide();$("#div_service").show();$("#div_personal_number").show();$("#div_rank").show();$("#div_institute").hide();$("#div_appointment").show();$("#div_joining_date").hide();$("#div_commission_date").show();$("#div_retirement_date").show();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$('#lbl_appointment').html('Appointment<span class="text-danger">*</span>');$("#lbl_commission_date").html('Commissioned Date<span class="text-danger">*</span>');$('#lbl_retirement_date').html('Leaving Date<span class="text-danger">*</span>');$("#cadet_division").removeAttr("required");$("#wing").removeAttr("required");$("#service").attr("required","true");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#institute_id").removeAttr("required");$("#appointment").attr("required","true");$("#joining_date").removeAttr("required");$("#commission_date").attr("required","true");$("#retirement_date").attr("required","true");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#existing_cadet_number").removeAttr("required");let selected_service=$("#service option:selected").val();if(selected_service==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('BA Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Headquarter/Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}else if(selected_service==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$('#lbl_personal_number').html('Personal Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Headquarter/Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");}else if(selected_service==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$('#lbl_personal_number').html('BD Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Headquarter/Squadron<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");}else if(selected_service==='civil'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('Personal Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('Personal Number<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('service',selected_service);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='military_instructor'){$("#div_existing_cadet").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").show();$("#div_service").hide();$("#div_personal_number").show();$("#div_rank").show();$("#div_institute").hide();$("#div_appointment").hide();$("#div_joining_date").show();$("#div_commission_date").hide();$("#div_retirement_date").hide();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$("#lbl_personal_number").html('Number<span class="text-danger">*</span>');$("#lbl_wing").html('Service<span class="text-danger">*</span>');$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$("#cadet_division").removeAttr("required");$("#wing").attr("required","true");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#institute_id").removeAttr("required");$("#appointment").removeAttr("required");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").removeAttr("required");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#existing_cadet_number").removeAttr("required");let selected_wing=$("#wing option:selected").val();if(selected_wing==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('Sena No<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}else if(selected_wing==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$('#lbl_personal_number').html('Official No<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");}else if(selected_wing==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$('#lbl_personal_number').html('Official No<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('wing',selected_wing);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='ex_military_instructor'){$("#div_existing_cadet").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").show();$("#div_service").hide();$("#div_personal_number").show();$("#div_rank").show();$("#div_institute").hide();$("#div_appointment").hide();$("#div_joining_date").show();$("#div_commission_date").hide();$("#div_retirement_date").show();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$("#lbl_personal_number").html('Number<span class="text-danger">*</span>');$("#lbl_wing").html('Service<span class="text-danger">*</span>');$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$("#lbl_retirement_date").html('Leaving Date<span class="text-danger">*</span>');$("#cadet_division").removeAttr("required");$("#wing").attr("required","true");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#institute_id").removeAttr("required");$("#appointment").removeAttr("required");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").attr("required","true");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#existing_cadet_number").removeAttr("required");let selected_wing=$("#wing option:selected").val();if(selected_wing==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('Sena No<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}else if(selected_wing==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$('#lbl_personal_number').html('Official No<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");}else if(selected_wing==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$('#lbl_personal_number').html('Official No<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('wing',selected_wing);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='civil_employee'){$("#div_existing_cadet").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").hide();$("#div_service").hide();$("#div_personal_number").show();$("#div_rank").show();$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").hide();$("#div_appointment").show();$("#div_joining_date").show();$("#div_commission_date").hide();$("#div_retirement_date").hide();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$("#lbl_personal_number").html('Service Number<span class="text-danger">*</span>');$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$('#lbl_appointment').html('Appointment<span class="text-danger">*</span>');$("#cadet_division").removeAttr("required");$("#wing").removeAttr("required");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#institute_id").removeAttr("required");$("#appointment").attr("required","true");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").removeAttr("required");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#existing_cadet_number").removeAttr("required");let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='ex_civil_employee'){$("#div_existing_cadet").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").hide();$("#div_service").hide();$("#div_personal_number").show();$("#div_rank").show();$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").hide();$("#div_appointment").show();$("#div_joining_date").show();$("#div_commission_date").hide();$("#div_retirement_date").show();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$("#lbl_personal_number").html('Service Number<span class="text-danger">*</span>');$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$('#lbl_appointment').html('Appointment<span class="text-danger">*</span>');$("#lbl_retirement_date").html('Retirement Date<span class="text-danger">*</span>');$("#wing").removeAttr("required");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#institute_id").removeAttr("required");$("#appointment").attr("required","true");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").attr("required","true");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#existing_cadet_number").removeAttr("required");let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}
$("#registered_as").on("change",function(){$("#personal_number").val("");$("#appointment").val("");$("#joining_date").val("");$("#commission_date").val("");$("#retirement_date").val("");$("#wing").val("");$("#service").val("");$("#rank_id").val("");$("#regiment_id").val("");$("#flotilla_id").val("");$("#squadron_id").val("");$("#institute_id").val("");$("#cadet_division").val("");$('#is_existing_cadet').attr('checked',false);$("#existing_cadet_number").val("");$('#is_forgot_cadet').attr('checked',false);$("#description_about_cadet").val("");let selected_item=$("#registered_as option:selected").val();if(selected_item==='cadet'){$("#div_cadet_division").show();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_service").hide();$("#div_wing").show();$("#div_personal_number").show();$("#div_rank").show();$("#div_appointment").hide();$("#div_joining_date").show();$("#div_commission_date").hide();$("#div_retirement_date").hide();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").show();$("#lbl_wing").html('Wing<span class="text-danger">*</span>');$('#lbl_personal_number').html('Cadet Number<span class="text-danger">*</span>');$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$("#cadet_division").attr("required","true");$("#wing").attr("required","true");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#appointment").removeAttr("required");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").removeAttr("required");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");$("#description_about_cadet").removeAttr("required");let cadet_division=$("#cadet_division option:selected").val();if(cadet_division==='senior'){$("#div_existing_cadet").show();}else{$("#div_existing_cadet").hide();$("#div_existing_cadet_number").hide();}
let is_existing_cadet=$("#is_existing_cadet").is(":checked");if(is_existing_cadet==true){$("#div_existing_cadet_number").show();}else{$("#div_existing_cadet_number").hide();}
let selected_wing=$("#wing option:selected").val();if(selected_wing==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron<span class="text-danger">*</span>');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");$("#institute_id").attr("required","true");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").hide();$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$('#lbl_institute').html('Institute');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#institute_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('wing',selected_wing);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='ex_cadet'){$("#div_cadet_division").show();$("#div_existing_cadet").hide();$("#div_existing_cadet_number").hide();$("#div_is_forgot_cadet").show();$("#div_description_about_cadet").hide();$("#div_service").hide();$("#div_wing").show();$("#div_personal_number").show();$("#div_rank").show();$("#div_appointment").hide();$("#div_joining_date").show();$("#div_commission_date").hide();$("#div_retirement_date").show();$("#div_current_profession").show();$("#div_profession_details").show();$("#div_reference_file").show();$("#lbl_wing").html('Wing<span class="text-danger">*</span>');$('#lbl_personal_number').html('Cadet Number<span class="text-danger">*</span>');$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$("#lbl_retirement_date").html('Expiry Date<span class="text-danger">*</span>');$("#cadet_division").attr("required","true");$("#existing_cadet_number").removeAttr("required");$("#wing").attr("required","true");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#appointment").removeAttr("required");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").attr("required","true");$("#current_profession").attr("required","true");$("#profession_details").attr("required","true");let selected_wing=$("#wing option:selected").val();if(selected_wing==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron<span class="text-danger">*</span>');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");$("#institute_id").attr("required","true");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").hide();$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$('#lbl_institute').html('Institute');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#institute_id").removeAttr("required");}
let is_forgot_cadet=$("#is_forgot_cadet").is(":checked");if(is_forgot_cadet==true){$("#div_description_about_cadet").show();$('#lbl_personal_number').html('Cadet Number');$("#lbl_rank").html('Rank');$("#lbl_joining_date").html('Joining Date');$("#lbl_retirement_date").html('Retirement Date');$("#lbl_regiment").html('Regiment');$("#lbl_flotilla").html('Flotilla');$("#lbl_squadron").html('Squadron');$("#description_about_cadet").attr("required","true");$("#personal_number").removeAttr("required");$("#rank_id").removeAttr("required");$("#joining_date").removeAttr("required");$("#retirement_date").removeAttr("required");$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('wing',selected_wing);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='bncco_or_puo_or_tuo'){$("#div_existing_cadet").hide();$("#div_existing_cadet_number").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").show();$("#div_service").hide();$("#div_personal_number").show();$("#div_rank").show();$("#div_appointment").show();$("#div_joining_date").show();$("#div_commission_date").show();$("#div_retirement_date").hide();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$('#lbl_wing').html('Wing<span class="text-danger">*</span>');$('#lbl_personal_number').html('Personal Number/CCO Number<span class="text-danger">*</span>');$('#lbl_rank').html('Rank<span class="text-danger">*</span>');$('#lbl_appointment').html('Appointment<span class="text-danger">*</span>');$('#lbl_retirement_date').html('Retirement Date<span class="text-danger">*</span>');$("#lbl_rank span").remove();$("#lbl_commission_date span").remove();$("#cadet_division").removeAttr("required");$("#existing_cadet_number").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#wing").attr("required","true");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").removeAttr("required");$("#appointment").attr("required","true");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").removeAttr("required");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");let selected_wing=$("#wing option:selected").val();if(selected_wing==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron<span class="text-danger">*</span>');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");$("#institute_id").attr("required","true");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").hide();$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$('#lbl_institute').html('Institute');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#institute_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('wing',selected_wing);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='ex_bncco_or_puo_or_tuo'){$("#div_existing_cadet").hide();$("#div_existing_cadet_number").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").show();$("#div_service").hide();$("#div_personal_number").show();$("#div_rank").show();$("#div_appointment").show();$("#div_joining_date").show();$("#div_commission_date").show();$("#div_retirement_date").show();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$('#lbl_wing').html('Wing<span class="text-danger">*</span>');$('#lbl_personal_number').html('Personal Number/CCO Number<span class="text-danger">*</span>');$('#lbl_rank').html('Rank<span class="text-danger">*</span>');$('#lbl_appointment').html('Appointment<span class="text-danger">*</span>');$('#lbl_retirement_date').html('Retirement Date<span class="text-danger">*</span>');$("#lbl_rank span").remove();$("#lbl_commission_date span").remove();$("#cadet_division").removeAttr("required");$("#existing_cadet_number").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#wing").attr("required","true");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").removeAttr("required");$("#appointment").attr("required","true");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").attr("required");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");let selected_wing=$("#wing option:selected").val();if(selected_wing==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron<span class="text-danger">*</span>');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");$("#institute_id").attr("required","true");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").hide();$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$('#lbl_institute').html('Institute');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#institute_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('wing',selected_wing);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='serving_bncc_military_and_civil_officer'){$("#div_existing_cadet").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").hide();$("#div_service").show();$("#div_personal_number").show();$("#div_rank").show();$("#div_institute").hide();$("#div_appointment").show();$("#div_joining_date").hide();$("#div_commission_date").show();$("#div_retirement_date").hide();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$('#lbl_appointment').html('Appointment<span class="text-danger">*</span>');$("#lbl_commission_date").html('Commissioned Date<span class="text-danger">*</span>');$("#cadet_division").removeAttr("required");$("#wing").removeAttr("required");$("#service").attr("required","true");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#institute_id").removeAttr("required");$("#appointment").attr("required","true");$("#joining_date").removeAttr("required");$("#commission_date").attr("required","true");$("#retirement_date").removeAttr("required");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#existing_cadet_number").removeAttr("required");let selected_service=$("#service option:selected").val();if(selected_service==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('BA Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Headquarter/Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}else if(selected_service==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$('#lbl_personal_number').html('Personal Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Headquarter/Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");}else if(selected_service==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$('#lbl_personal_number').html('BD Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Headquarter/Squadron<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");}else if(selected_service==='civil'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('Personal Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('Personal Number<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('service',selected_service);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='ex_serving_bncc_military_and_civil_officer'){$("#div_existing_cadet").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").hide();$("#div_service").show();$("#div_personal_number").show();$("#div_rank").show();$("#div_institute").hide();$("#div_appointment").show();$("#div_joining_date").hide();$("#div_commission_date").show();$("#div_retirement_date").show();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$('#lbl_appointment').html('Appointment<span class="text-danger">*</span>');$("#lbl_commission_date").html('Commissioned Date<span class="text-danger">*</span>');$('#lbl_retirement_date').html('Leaving Date<span class="text-danger">*</span>');$("#cadet_division").removeAttr("required");$("#wing").removeAttr("required");$("#service").attr("required","true");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#institute_id").removeAttr("required");$("#appointment").attr("required","true");$("#joining_date").removeAttr("required");$("#commission_date").attr("required","true");$("#retirement_date").attr("required","true");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#existing_cadet_number").removeAttr("required");let selected_service=$("#service option:selected").val();if(selected_service==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('BA Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Headquarter/Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}else if(selected_service==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$('#lbl_personal_number').html('Personal Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Headquarter/Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");}else if(selected_service==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$('#lbl_personal_number').html('BD Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Headquarter/Squadron<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");}else if(selected_service==='civil'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('Personal Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('Personal Number<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('service',selected_service);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='military_instructor'){$("#div_existing_cadet").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").show();$("#div_service").hide();$("#div_personal_number").show();$("#div_rank").show();$("#div_institute").hide();$("#div_appointment").hide();$("#div_joining_date").show();$("#div_commission_date").hide();$("#div_retirement_date").hide();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$("#lbl_personal_number").html('Number<span class="text-danger">*</span>');$("#lbl_wing").html('Service<span class="text-danger">*</span>');$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$("#cadet_division").removeAttr("required");$("#wing").attr("required","true");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#institute_id").removeAttr("required");$("#appointment").removeAttr("required");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").removeAttr("required");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#existing_cadet_number").removeAttr("required");let selected_wing=$("#wing option:selected").val();if(selected_wing==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('Sena No<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}else if(selected_wing==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$('#lbl_personal_number').html('Official No<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");}else if(selected_wing==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$('#lbl_personal_number').html('Official No<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('wing',selected_wing);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='ex_military_instructor'){$("#div_existing_cadet").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").show();$("#div_service").hide();$("#div_personal_number").show();$("#div_rank").show();$("#div_institute").hide();$("#div_appointment").hide();$("#div_joining_date").show();$("#div_commission_date").hide();$("#div_retirement_date").show();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$("#lbl_personal_number").html('Number<span class="text-danger">*</span>');$("#lbl_wing").html('Service<span class="text-danger">*</span>');$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$("#lbl_retirement_date").html('Leaving Date<span class="text-danger">*</span>');$("#cadet_division").removeAttr("required");$("#wing").attr("required","true");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#institute_id").removeAttr("required");$("#appointment").removeAttr("required");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").attr("required","true");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#existing_cadet_number").removeAttr("required");let selected_wing=$("#wing option:selected").val();if(selected_wing==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('Sena No<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}else if(selected_wing==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$('#lbl_personal_number').html('Official No<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");}else if(selected_wing==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$('#lbl_personal_number').html('Official No<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('wing',selected_wing);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='civil_employee'){$("#div_existing_cadet").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").hide();$("#div_service").hide();$("#div_personal_number").show();$("#div_rank").show();$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").hide();$("#div_appointment").show();$("#div_joining_date").show();$("#div_commission_date").hide();$("#div_retirement_date").hide();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$("#lbl_personal_number").html('Service Number<span class="text-danger">*</span>');$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$('#lbl_appointment').html('Appointment<span class="text-danger">*</span>');$("#cadet_division").removeAttr("required");$("#wing").removeAttr("required");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#institute_id").removeAttr("required");$("#appointment").attr("required","true");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").removeAttr("required");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#existing_cadet_number").removeAttr("required");let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}else if(selected_item==='ex_civil_employee'){$("#div_existing_cadet").hide();$("#div_is_forgot_cadet").hide();$("#div_description_about_cadet").hide();$("#div_cadet_division").hide();$("#div_wing").hide();$("#div_service").hide();$("#div_personal_number").show();$("#div_rank").show();$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").hide();$("#div_appointment").show();$("#div_joining_date").show();$("#div_commission_date").hide();$("#div_retirement_date").show();$("#div_current_profession").hide();$("#div_profession_details").hide();$("#div_reference_file").hide();$("#lbl_personal_number").html('Service Number<span class="text-danger">*</span>');$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$('#lbl_appointment').html('Appointment<span class="text-danger">*</span>');$("#lbl_retirement_date").html('Retirement Date<span class="text-danger">*</span>');$("#wing").removeAttr("required");$("#service").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#institute_id").removeAttr("required");$("#appointment").attr("required","true");$("#joining_date").attr("required","true");$("#commission_date").removeAttr("required");$("#retirement_date").attr("required","true");$("#current_profession").removeAttr("required");$("#profession_details").removeAttr("required");$("#description_about_cadet").removeAttr("required");$("#existing_cadet_number").removeAttr("required");let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}}});$("#cadet_division").on("change",function(){let cadet_division=$("#cadet_division option:selected").val();let registered_as=$("#registered_as option:selected").val();if(registered_as==='cadet'){if(cadet_division==='senior'){$("#div_existing_cadet").show();}else{$("#div_existing_cadet").hide();$("#div_existing_cadet_number").hide();}}else{$("#div_existing_cadet_number").hide();}});$("#is_existing_cadet").on("change",function(){let is_existing_cadet=$("#is_existing_cadet").is(":checked");if(is_existing_cadet==true){$("#div_existing_cadet_number").show();}else{$("#div_existing_cadet_number").hide();}});$("#is_forgot_cadet").on("change",function(){let is_forgot_cadet=$("#is_forgot_cadet").is(":checked");let selected_wing=$("#wing option:selected").val();if(is_forgot_cadet==true){$("#div_description_about_cadet").show();$('#lbl_personal_number').html('Cadet Number');$("#lbl_rank").html('Rank');$("#lbl_joining_date").html('Joining Date');$("#lbl_retirement_date").html('Retirement Date');$("#lbl_regiment").html('Regiment');$("#lbl_flotilla").html('Flotilla');$("#lbl_squadron").html('Squadron');$("#lbl_institute").html('Institute');$("#description_about_cadet").attr("required","true");$("#personal_number").removeAttr("required");$("#rank_id").removeAttr("required");$("#joining_date").removeAttr("required");$("#retirement_date").removeAttr("required");$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#institute_id").removeAttr("required");}else{$("#div_description_about_cadet").hide();$("#description_about_cadet").removeAttr("required");$("#personal_number").attr("required","true");$("#rank_id").attr("required","true");$("#joining_date").attr("required","true");$("#retirement_date").attr("required","true");$("#current_profession").attr("required","true");$("#profession_details").attr("required","true");$('#lbl_personal_number').html('Cadet Number<span class="text-danger">*</span>');$("#lbl_rank").html('Rank<span class="text-danger">*</span>');$("#lbl_joining_date").html('Joining Date<span class="text-danger">*</span>');$("#lbl_retirement_date").html('Retirement Date<span class="text-danger">*</span>');$("#lbl_current_profession").html('Current Job Type<span class="text-danger">*</span>');$("#lbl_profession_details").html('Job Position<span class="text-danger">*</span>');}});$("#wing").on("change",function(){$("#regiment_id").val("");$("#flotilla_id").val("");$("#squadron_id").val("");$("#institute_id").val("");let selected_wing=$("#wing option:selected").val();let selected_registered_as=$("#registered_as option:selected").val();if(selected_registered_as==='cadet'||selected_registered_as==='ex_cadet'||selected_registered_as==='bncco_or_puo_or_tuo'||selected_registered_as==='ex_bncco_or_puo_or_tuo'){if(selected_wing==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");$("#institute_id").attr("required","true");}else if(selected_wing==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$("#div_institute").show();$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron<span class="text-danger">*</span>');$('#lbl_institute').html('Institute<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");$("#institute_id").attr("required","true");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$("#div_institute").hide();$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$('#lbl_institute').html('Institute');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#institute_id").removeAttr("required");}}else if(selected_registered_as==='military_instructor'||selected_registered_as==='ex_military_instructor'){if(selected_wing==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('Sena No<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}else if(selected_wing==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$('#lbl_personal_number').html('Official No<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");}else if(selected_wing==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$('#lbl_personal_number').html('Official No<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");}}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('wing',selected_wing);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}});$("#service").on("change",function(){$("#regiment_id").val("");$("#flotilla_id").val("");$("#squadron_id").val("");$("#institute_id").val("");let selected_service=$("#service option:selected").val();if(selected_service==='army'){$("#div_regiment").show();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('BA Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Headquarter/Regiment<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$("#regiment_id").attr("required","true");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}else if(selected_service==='navy'){$("#div_regiment").hide();$("#div_flotilla").show();$("#div_squadron").hide();$('#lbl_personal_number').html('Personal Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Headquarter/Flotilla<span class="text-danger">*</span>');$('#lbl_squadron').html('Squadron');$("#regiment_id").removeAttr("required");$("#flotilla_id").attr("required","true");$("#squadron_id").removeAttr("required");}else if(selected_service==='air'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").show();$('#lbl_personal_number').html('BD Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Headquarter/Squadron<span class="text-danger">*</span>');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").attr("required","true");}else if(selected_service==='civil'){$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('Personal Number<span class="text-danger">*</span>');$('#lbl_regiment').html('Regiment');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$("#regiment_id").removeAttr("required");$("#flotilla_id").removeAttr("required");$("#squadron_id").removeAttr("required");}else{$("#div_regiment").hide();$("#div_flotilla").hide();$("#div_squadron").hide();$('#lbl_personal_number').html('Personal Number<span class="text-danger">*</span>');$('#lbl_flotilla').html('Flotilla');$('#lbl_squadron').html('Squadron');$('#lbl_regiment').html('Regiment');$("#regiment_id").removeAttr("required");$("#squadron_id").removeAttr("required");$("#flotilla_id").removeAttr("required");}
let category=$("#registered_as option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('category',category);fd.append('service',selected_service);if(category!=''){$.ajax({url:'/onchange-registered-as',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#rank_id option').each(function(){$(this).remove();});$('#rank_id').append($(new Option('Choose Rank','')));$.each(data.ranks,function(index,value){let option=new Option(value.name,value.id);$('#rank_id').append($(option));});}});}else{$('#rank_id option').each(function(){$(this).remove();});}});$('#btn_existing_cadet_info').click(function(){let existing_cadet_number=$('#existing_cadet_number').val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('existing_cadet_number',existing_cadet_number);$.ajax({url:'/cadet/info/set',dataType:"JSON",data:fd,type:'POST',contentType:false,processData:false,success:function(data){if(data.status){if(data.data){$("#title").val(data.data.title).change();$("#first_name").val(data.data.first_name).change();$("#middle_name").val(data.data.middle_name).change();$("#last_name").val(data.data.last_name).change();$("#email").val(data.data.email).change();$("#mobile").val(data.data.mobile).change();$("#gender").val(data.data.gender).change();$("#blood_group").val(data.data.blood_group).change();$("#birth_date").val(data.data.birth_date).change();$("#nationality").val(data.data.nationality).change();$("#guardians_mobile").val(data.data.guardians_mobile).change();$("#wing").val(data.data.wing).change();$("#rank_id").val(data.data.rank).change();$("#regiment_id").val(data.data.regiment).change();let regiment=data.data.regiment;let institute=data.data.institute;let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('regiment_id',regiment);if(regiment!=''){$.ajax({url:'/onchange-regiment',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#institute_id option').each(function(){if($(this).val()!=''){$(this).remove();}});$.each(data.institutes,function(index,value){let option=new Option(value.name,value.id);$('#institute_id').append($(option));});$("#institute_id").val(institute).change();}});}else{$('#institute_id option').each(function(){if($(this).val()!=''){$(this).remove();}});}
$("#joining_date").val(data.data.joining_date).change();$("#street").val(data.data.street).change();$("#city").val(data.data.city).change();$("#zip").val(data.data.zip).change();$("#country_id").val(data.data.country).change();$("#division_id").val(data.data.division).change();$("#district_id").val(data.data.district).change();$("#upazila_id").val(data.data.upazila).change();$("#p_street").val(data.data.p_street).change();$("#p_city").val(data.data.p_city).change();$("#p_zip").val(data.data.p_zip).change();$("#p_country_id").val(data.data.p_country).change();$("#p_division_id").val(data.data.p_division).change();$("#p_district_id").val(data.data.p_district).change();$("#p_upazila_id").val(data.data.p_upazila).change();}else{$('#application_form').trigger("reset");toastr.warning(data.message);}}else{toastr.error(data.message);}}});});$("#regiment_id").on("change",function(){let selected_item=$("#regiment_id option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('regiment_id',selected_item);if(selected_item!=''){$.ajax({url:'/onchange-regiment',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#institute_id option').each(function(){$(this).remove();});$('#institute_id').append($(new Option('Choose Institute','')));$.each(data.institutes,function(index,value){let option=new Option(value.name,value.id);$('#institute_id').append($(option));});}});}else{$('#institute_id option').each(function(){$(this).remove();});}});$("#flotilla_id").on("change",function(){let selected_item=$("#flotilla_id option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('flotilla_id',selected_item);if(selected_item!=''){$.ajax({url:'/onchange-flotilla',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#institute_id option').each(function(){$(this).remove();});$('#institute_id').append($(new Option('Choose Institute','')));$.each(data.institutes,function(index,value){let option=new Option(value.name,value.id);$('#institute_id').append($(option));});}});}else{$('#institute_id option').each(function(){$(this).remove();});}});$("#squadron_id").on("change",function(){let selected_item=$("#squadron_id option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('squadron_id',selected_item);if(selected_item!=''){$.ajax({url:'/onchange-squadron',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#institute_id option').each(function(){$(this).remove();});$('#institute_id').append($(new Option('Choose Institute','')));$.each(data.institutes,function(index,value){let option=new Option(value.name,value.id);$('#institute_id').append($(option));});}});}else{$('#institute_id option').each(function(){$(this).remove();});}});$("#division_id").on("change",function(){let selected_item=$("#division_id option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('division_id',selected_item);if(selected_item!=''){$.ajax({url:'/onchange-division',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#district_id option').each(function(){$(this).remove();});$('#district_id').append($(new Option('Select District','')));$.each(data.districts,function(index,value){let option=new Option(value.name,value.id);$('#district_id').append($(option));});}});}else{$('#district_id option').each(function(){$(this).remove();});}});$("#district_id").on("change",function(){let selected_item=$("#district_id option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('district_id',selected_item);if(selected_item!=''){$.ajax({url:'/onchange-district',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#upazila_id option').each(function(){$(this).remove();});$('#upazila_id').append($(new Option('Select Upazila','')));$.each(data.upazilas,function(index,value){let option=new Option(value.name,value.id);$('#upazila_id').append($(option));});}});}else{$('#upazila_id option').each(function(){$(this).remove();});}});$("#p_division_id").on("change",function(){let selected_item=$("#p_division_id option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('division_id',selected_item);if(selected_item!=''){$.ajax({url:'/onchange-division',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#p_district_id option').each(function(){$(this).remove();});$('#p_district_id').append($(new Option('Select District','')));$.each(data.districts,function(index,value){let option=new Option(value.name,value.id);$('#p_district_id').append($(option));});}});}else{$('#p_district_id option').each(function(){$(this).remove();});}});$("#p_district_id").on("change",function(){let selected_item=$("#p_district_id option:selected").val();let fd=new FormData();fd.append('csrf_token',$('#csrf_token').val());fd.append('district_id',selected_item);if(selected_item!=''){$.ajax({url:'/onchange-district',dataType:"JSON",data:fd,contentType:false,processData:false,type:'POST',success:function(data){$('#p_upazila_id option').each(function(){$(this).remove();});$('#p_upazila_id').append($(new Option('Select Upazila','')));$.each(data.upazilas,function(index,value){let option=new Option(value.name,value.id);$('#p_upazila_id').append($(option));});}});}else{$('#p_upazila_id option').each(function(){$(this).remove();});}});$('#application_form').submit(function(e){e.preventDefault();let fd=new FormData(this);$.ajax({url:'/create/application',dataType:"JSON",data:fd,type:'POST',contentType:false,processData:false,cache:false,beforeSend:function(){$('.loading').show();},complete:function(){$('.loading').hide();},success:function(data){if(data.status){toastr.success(data.message);document.location.href='/application-thanks';}else{toastr.error(data.message);}
console.log(data);}});});});;

/* <inline asset> defined in bundle 'web.assets_frontend_lazy' */
$(document).ready(function(){$('#div_cadet_info').hide();$('#find_cadet_form').submit(function(e){e.preventDefault();let fd=new FormData(this);$.ajax({url:'/cadet/info',dataType:"JSON",data:fd,type:'POST',contentType:false,processData:false,success:function(data){if(data.status){if(data.data){$('#div_cadet_info').show();$('#tbl_cadet_info').html('<tr><th>Name</th><td>'+data.data.name+'</td></tr>'+'<tr><th>Email</th><td>'+data.data.email+'</td></tr>'+'<tr><th>Mobile</th><td>'+data.data.mobile+'</td></tr>'+'<tr><th>Identification Number</th><td>'+data.data.number+'</td></tr>'+'<tr><th>Registered As</th><td>'+data.data.registered_as+'</td></tr>'+'<tr><th>Wing</th><td>'+data.data.wing+'</td></tr>'+'<tr><th>Rank</th><td>'+data.data.rank+'</td></tr>'+'<tr><th>Regiment</th><td>'+data.data.regiment+'</td></tr>'+'<tr><th>Institute</th><td>'+data.data.institute+'</td></tr>'+'<tr><th>Joining Date</th><td>'+data.data.joining_date+'</td></tr>');}else{toastr.warning(data.message);$('#div_cadet_info').hide();}}else{toastr.error(data.message);$('#div_cadet_info').hide();}
console.log(data);}});});});;

/* /project/static/src/js/portal_rating.js defined in bundle 'web.assets_frontend_lazy' */
odoo.define('website_rating_project.rating',function(require){'use strict';var time=require('web.time');var publicWidget=require('web.public.widget');publicWidget.registry.ProjectRatingImage=publicWidget.Widget.extend({selector:'.o_portal_project_rating .o_rating_image',start:function(){this.$el.popover({placement:'bottom',trigger:'hover',html:true,content:function(){var $elem=$(this);var id=$elem.data('id');var ratingDate=$elem.data('rating-date');var baseDate=time.auto_str_to_date(ratingDate);var duration=moment(baseDate).fromNow();var $rating=$('#rating_'+id);$rating.find('.rating_timeduration').text(duration);return $rating.html();},});return this._super.apply(this,arguments);},});});;

/* /purchase/static/src/js/purchase_datetimepicker.js defined in bundle 'web.assets_frontend_lazy' */
$(function(){$('input.o-purchase-datetimepicker').datetimepicker();$('input.o-purchase-datetimepicker').on("hide.datetimepicker",function(){$(this).parents('form').submit();});})